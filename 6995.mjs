(self.webpackChunkradial_bar_chart_plugin=self.webpackChunkradial_bar_chart_plugin||[]).push([[6995],{49029:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},18674:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},36128:(e,t,n)=>{var i=n(20731),r=n(21078),l=n(45652);e.exports=function(e,t,n){var a=e.length;if(a<2)return a?l(e[0]):[];for(var o=-1,s=Array(a);++o<a;)for(var c=e[o],u=-1;++u<a;)u!=o&&(s[o]=i(s[o]||c,e[u],t,n));return l(r(s,1),t,n)}},35393:(e,t,n)=>{var i=n(62663),r=n(53816),l=n(58748),a=RegExp("['’]","g");e.exports=function(e){return function(t){return i(l(r(t).replace(a,"")),e,"")}}},69389:(e,t,n)=>{var i=n(18674)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});e.exports=i},93157:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},2757:e=>{var t="\\ud800-\\udfff",n="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",l="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+l+"]",o="\\d+",s="["+n+"]",c="["+i+"]",u="[^"+t+l+o+n+i+r+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",g="["+r+"]",p="(?:"+c+"|"+u+")",h="(?:"+g+"|"+u+")",f="(?:['’](?:d|ll|m|re|s|t|ve))?",b="(?:['’](?:D|LL|M|RE|S|T|VE))?",v="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",E="[\\ufe0e\\ufe0f]?",y=E+v+"(?:\\u200d(?:"+["[^"+t+"]",d,m].join("|")+")"+E+v+")*",C="(?:"+[s,d,m].join("|")+")"+y,S=RegExp([g+"?"+c+"+"+f+"(?="+[a,g,"$"].join("|")+")",h+"+"+b+"(?="+[a,g+p,"$"].join("|")+")",g+"?"+p+"+"+f,g+"+"+b,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o,C].join("|"),"g");e.exports=function(e){return e.match(S)||[]}},68929:(e,t,n)=>{var i=n(48403),r=n(35393)((function(e,t,n){return t=t.toLowerCase(),e+(n?i(t):t)}));e.exports=r},53816:(e,t,n)=>{var i=n(69389),r=n(79833),l=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=r(e))&&e.replace(l,i).replace(a,"")}},21804:(e,t,n)=>{var i=n(35393)((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}));e.exports=i},58748:(e,t,n)=>{var i=n(49029),r=n(93157),l=n(79833),a=n(2757);e.exports=function(e,t,n){return e=l(e),void 0===(t=n?void 0:t)?r(e)?a(e):i(e):e.match(t)||[]}},72905:(e,t,n)=>{var i=n(34963),r=n(5976),l=n(36128),a=n(29246),o=n(10928),s=r((function(e){var t=o(e);return t="function"==typeof t?t:void 0,l(i(e,a),void 0,t)}));e.exports=s},86995:(e,t,n)=>{n.r(t),n.d(t,{AttributeDatasetInfo:()=>ja,AttributeDisplayFormSelect:()=>La,AttributeFilter:()=>Pa,AttributeFilterAllValuesFilteredResult:()=>sa,AttributeFilterButton:()=>Da,AttributeFilterButtonToolip:()=>ql,AttributeFilterConfigurationButton:()=>Ba,AttributeFilterDeleteButton:()=>Ha,AttributeFilterDropdownActions:()=>Yl,AttributeFilterDropdownBody:()=>Kl,AttributeFilterDropdownButton:()=>Gl,AttributeFilterElementsActions:()=>ha,AttributeFilterElementsSearchBar:()=>Ql,AttributeFilterElementsSelect:()=>Jl,AttributeFilterElementsSelectError:()=>na,AttributeFilterElementsSelectItem:()=>ta,AttributeFilterElementsSelectLoading:()=>ia,AttributeFilterEmptyAttributeResult:()=>la,AttributeFilterEmptyResult:()=>ca,AttributeFilterEmptySearchResult:()=>ra,AttributeFilterError:()=>Ul,AttributeFilterFilteredStatus:()=>ma,AttributeFilterLoading:()=>zl,AttributeFilterSelectionStatus:()=>ga,AttributeFilterSimpleDropdownButton:()=>xa,AttributeFilterSimpleDropdownButtonWithSelection:()=>Oa,AttributeFilterStatusBar:()=>pa,DateFilter:()=>xn,DateFilterHelpers:()=>q,EmptyElementsSearchBar:()=>Za,MeasureValueFilter:()=>ei,MeasureValueFilterDropdown:()=>Jn,RankingFilter:()=>xi,RankingFilterDropdown:()=>ki,SingleSelectionAttributeFilterElementsSelectItem:()=>fa,SingleSelectionAttributeFilterStatusBar:()=>va,defaultDateFilterOptions:()=>m,filterVisibleDateFilterOptions:()=>D,getLocalizedIcuDateFormatPattern:()=>Ee,isAbsoluteDateFilterOption:()=>F,isRelativeDateFilterOption:()=>k,isUiRelativeDateFilterForm:()=>w,isWarningMessage:()=>Hn,newAttributeFilterHandler:()=>wl,useAttributeFilterContext:()=>Vl,useAttributeFilterController:()=>Ll,useAttributeFilterHandler:()=>Tl,useAttributeFilterSearch:()=>Ga,useAutoOpenAttributeFilterDropdownButton:()=>qa,useOnCloseAttributeFilterDropdownButton:()=>Wa});const i={"GDC.time.minute":"minute","GDC.time.hour":"hour","GDC.time.date":"day","GDC.time.week_us":"week","GDC.time.month":"month","GDC.time.quarter":"quarter","GDC.time.year":"year"};var r=n(30381);const l="YYYY-MM-DD",a="YYYY-MM-DD HH:mm",o="HH:mm",s=", HH:mm",c="00:00",u="23:59",d="MM/dd/yyyy",m={allTime:{localIdentifier:"ALL_TIME",type:"allTime",name:"",visible:!0},absoluteForm:{localIdentifier:"ABSOLUTE_FORM",type:"absoluteForm",from:r().subtract(1,"month").startOf("day").format(l),to:r().startOf("day").format(l),name:"",visible:!0},absolutePreset:[],relativeForm:{localIdentifier:"RELATIVE_FORM",type:"relativeForm",granularity:"GDC.time.month",from:void 0,to:void 0,name:"",visible:!0},relativePreset:{"GDC.time.date":[{from:-6,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_7_DAYS",type:"relativePreset",visible:!0,name:""},{from:-29,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_30_DAYS",type:"relativePreset",visible:!0,name:""},{from:-89,to:0,granularity:"GDC.time.date",localIdentifier:"LAST_90_DAYS",type:"relativePreset",visible:!0,name:""}],"GDC.time.month":[{from:0,to:0,granularity:"GDC.time.month",localIdentifier:"THIS_MONTH",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.month",localIdentifier:"LAST_MONTH",type:"relativePreset",visible:!0,name:""},{from:-11,to:0,granularity:"GDC.time.month",localIdentifier:"LAST_12_MONTHS",type:"relativePreset",visible:!0,name:""}],"GDC.time.quarter":[{from:0,to:0,granularity:"GDC.time.quarter",localIdentifier:"THIS_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.quarter",localIdentifier:"LAST_QUARTER",type:"relativePreset",visible:!0,name:""},{from:-3,to:0,granularity:"GDC.time.quarter",localIdentifier:"LAST_4_QUARTERS",type:"relativePreset",visible:!0,name:""}],"GDC.time.year":[{from:0,to:0,granularity:"GDC.time.year",localIdentifier:"THIS_YEAR",type:"relativePreset",visible:!0,name:""},{from:-1,to:-1,granularity:"GDC.time.year",localIdentifier:"LAST_YEAR",type:"relativePreset",visible:!0,name:""}]}};var g=n(88216),p=n(47037),h=n(47960);const f=(e,t=l)=>h(e)?r(e).local().format(t):e,b=e=>p(e)?new Date(r(e,a).format()):e,v=(0,n(50049).vU)({minute:{id:"filters.granularity.minutes"},hour:{id:"filters.granularity.hours"},day:{id:"filters.granularity.days"},week:{id:"filters.granularity.weeks"},month:{id:"filters.granularity.months"},quarter:{id:"filters.granularity.quarters"},year:{id:"filters.granularity.years"},allTimeExcluded:{id:"filters.allTime.excludeCurrentPeriod"},minuteExcluded:{id:"filters.minute.excludeCurrentPeriod"},hourExcluded:{id:"filters.hour.excludeCurrentPeriod"},dayExcluded:{id:"filters.day.excludeCurrentPeriod"},weekExcluded:{id:"filters.week.excludeCurrentPeriod"},monthExcluded:{id:"filters.month.excludeCurrentPeriod"},quarterExcluded:{id:"filters.quarter.excludeCurrentPeriod"},yearExcluded:{id:"filters.year.excludeCurrentPeriod"},minute_history:{id:"filters.floatingRange.option.minute.offset.history"},minute_today:{id:"filters.floatingRange.option.minute.offset.today"},minute_future:{id:"filters.floatingRange.option.minute.offset.future"},hour_history:{id:"filters.floatingRange.option.hour.offset.history"},hour_today:{id:"filters.floatingRange.option.hour.offset.today"},hour_future:{id:"filters.floatingRange.option.hour.offset.future"},day_history:{id:"filters.floatingRange.option.day.offset.history"},day_today:{id:"filters.floatingRange.option.day.offset.today"},day_future:{id:"filters.floatingRange.option.day.offset.future"},week_history:{id:"filters.floatingRange.option.week.offset.history"},week_today:{id:"filters.floatingRange.option.week.offset.today"},week_future:{id:"filters.floatingRange.option.week.offset.future"},month_history:{id:"filters.floatingRange.option.month.offset.history"},month_today:{id:"filters.floatingRange.option.month.offset.today"},month_future:{id:"filters.floatingRange.option.month.offset.future"},quarter_history:{id:"filters.floatingRange.option.quarter.offset.history"},quarter_today:{id:"filters.floatingRange.option.quarter.offset.today"},quarter_future:{id:"filters.floatingRange.option.quarter.offset.future"},year_history:{id:"filters.floatingRange.option.year.offset.history"},year_today:{id:"filters.floatingRange.option.year.offset.today"},year_future:{id:"filters.floatingRange.option.year.offset.future"},"GDC.time.minute":{id:"filters.minute.title"},"GDC.time.hour":{id:"filters.hour.title"},"GDC.time.date":{id:"filters.day.title"},"GDC.time.week_us":{id:"filters.week.title"},"GDC.time.month":{id:"filters.month.title"},"GDC.time.quarter":{id:"filters.quarter.title"},"GDC.time.year":{id:"filters.year.title"},top:{id:"rankingFilter.top"},bottom:{id:"rankingFilter.bottom"},topWithAttr:{id:"rankingFilter.preview.top_with_attribute"},topWithoutAttr:{id:"rankingFilter.preview.top_without_attribute"},bottomWithAttr:{id:"rankingFilter.preview.bottom_with_attribute"},bottomWithoutAttr:{id:"rankingFilter.preview.bottom_without_attribute"},ALL:{id:"mvf.operator.all"},GREATER_THAN:{id:"mvf.operator.greaterThan"},GREATER_THAN_OR_EQUAL_TO:{id:"mvf.operator.greaterThanOrEqualTo"},LESS_THAN:{id:"mvf.operator.lessThan"},LESS_THAN_OR_EQUAL_TO:{id:"mvf.operator.lessThanOrEqualTo"},EQUAL_TO:{id:"mvf.operator.equalTo"},NOT_EQUAL_TO:{id:"mvf.operator.notEqualTo"},BETWEEN:{id:"mvf.operator.between"},NOT_BETWEEN:{id:"mvf.operator.notBetween"},incorrectFormat:{id:"filters.staticPeriod.incorrectFormat"},endDateBeforeStartDate:{id:"filters.staticPeriod.endDateBeforeStartDate"},thisMinute:{id:"filters.thisMinute.title"},lastMinute:{id:"filters.lastMinute.title"},nextMinute:{id:"filters.nextMinute.title"},thisHour:{id:"filters.thisHour.title"},lastHour:{id:"filters.lastHour.title"},nextHour:{id:"filters.nextHour.title"},thisDay:{id:"filters.thisDay.title"},lastDay:{id:"filters.lastDay.title"},nextDay:{id:"filters.nextDay.title"},thisWeek:{id:"filters.thisWeek.title"},lastWeek:{id:"filters.lastWeek.title"},nextWeek:{id:"filters.nextWeek.title"},thisMonth:{id:"filters.thisMonth.title"},lastMonth:{id:"filters.lastMonth.title"},nextMonth:{id:"filters.nextMonth.title"},thisQuarter:{id:"filters.thisQuarter.title"},lastQuarter:{id:"filters.lastQuarter.title"},nextQuarter:{id:"filters.nextQuarter.title"},thisYear:{id:"filters.thisYear.title"},lastYear:{id:"filters.lastYear.title"},nextYear:{id:"filters.nextYear.title"},lastNMinutes:{id:"filters.lastNMinutes"},lastNHours:{id:"filters.lastNHours"},lastNDays:{id:"filters.lastNDays"},lastNWeeks:{id:"filters.lastNWeeks"},lastNMonths:{id:"filters.lastNMonths"},lastNQuarters:{id:"filters.lastNQuarters"},lastNYears:{id:"filters.lastNYears"},nextNMinutes:{id:"filters.nextNMinutes"},nextNHours:{id:"filters.nextNHours"},nextNDays:{id:"filters.nextNDays"},nextNWeeks:{id:"filters.nextNWeeks"},nextNMonths:{id:"filters.nextNMonths"},nextNQuarters:{id:"filters.nextNQuarters"},nextNYears:{id:"filters.nextNYears"},"minutes.past":{id:"filters.interval.minutes.past"},"minutes.past.sameValue":{id:"filters.interval.minutes.past.sameValue"},"minutes.future":{id:"filters.interval.minutes.future"},"minutes.future.sameValue":{id:"filters.interval.minutes.future.sameValue"},"minutes.mixed":{id:"filters.interval.minutes.mixed"},"hours.past":{id:"filters.interval.hours.past"},"hours.past.sameValue":{id:"filters.interval.hours.past.sameValue"},"hours.future":{id:"filters.interval.hours.future"},"hours.future.sameValue":{id:"filters.interval.hours.future.sameValue"},"hours.mixed":{id:"filters.interval.hours.mixed"},"days.past":{id:"filters.interval.days.past"},"days.past.sameValue":{id:"filters.interval.days.past.sameValue"},"days.future":{id:"filters.interval.days.future"},"days.future.sameValue":{id:"filters.interval.days.future.sameValue"},"days.mixed":{id:"filters.interval.days.mixed"},"weeks.past":{id:"filters.interval.weeks.past"},"weeks.past.sameValue":{id:"filters.interval.weeks.past.sameValue"},"weeks.future":{id:"filters.interval.weeks.future"},"weeks.future.sameValue":{id:"filters.interval.weeks.future.sameValue"},"weeks.mixed":{id:"filters.interval.weeks.mixed"},"months.past":{id:"filters.interval.months.past"},"months.past.sameValue":{id:"filters.interval.months.past.sameValue"},"months.future":{id:"filters.interval.months.future"},"months.future.sameValue":{id:"filters.interval.months.future.sameValue"},"months.mixed":{id:"filters.interval.months.mixed"},"quarters.past":{id:"filters.interval.quarters.past"},"quarters.past.sameValue":{id:"filters.interval.quarters.past.sameValue"},"quarters.future":{id:"filters.interval.quarters.future"},"quarters.future.sameValue":{id:"filters.interval.quarters.future.sameValue"},"quarters.mixed":{id:"filters.interval.quarters.mixed"},"years.past":{id:"filters.interval.years.past"},"years.past.sameValue":{id:"filters.interval.years.past.sameValue"},"years.future":{id:"filters.interval.years.future"},"years.future.sameValue":{id:"filters.interval.years.future.sameValue"},"years.mixed":{id:"filters.interval.years.mixed"}}),E=e=>{const t={};return e.visible||(t[e.type]={}),t},y=e=>(0,g.isAbsoluteDateFilterForm)(e)?(e=>{const t=E(e);return["from","to"].forEach((n=>{e[n]||(t.absoluteForm=t.absoluteForm||{},void 0===e[n]&&(t.absoluteForm[n]=v.incorrectFormat.id))})),t.absoluteForm||b(e.from)>b(e.to)&&(t.absoluteForm={to:v.endDateBeforeStartDate.id}),t.absoluteForm?t:{}})(e):(0,g.isRelativeDateFilterForm)(e)?(e=>{const t=E(e);return["from","to"].forEach((n=>{void 0===e[n]&&(t.relativeForm=t.relativeForm||{})})),t.relativeForm?t:{}})(e):E(e),C=(e,t)=>{if(!e||!t)return e;if((0,g.isAllTimeDateFilterOption)(e)||(0,g.isAbsoluteDateFilterForm)(e)||(0,g.isAbsoluteDateFilterPreset)(e)||(0,g.isRelativeDateFilterForm)(e))return e;if((0,g.isRelativeDateFilterPreset)(e)){const{from:t,to:n}=e,i=0===n&&t<n;return Object.assign(Object.assign({},e),{from:i?e.from-1:e.from,to:i?-1:n})}throw new Error("Unknown date filter value type")},S=e=>!!e.visible&&!!(0,g.isRelativeDateFilterPreset)(e)&&0===e.to&&e.from<e.to;var I=n(41609);const w=e=>!I(e)&&"relativeForm"===e.type,F=e=>(0,g.isAbsoluteDateFilterForm)(e)||(0,g.isAbsoluteDateFilterPreset)(e),k=e=>(0,g.isRelativeDateFilterForm)(e)||(0,g.isRelativeDateFilterPreset)(e);function x(e){return null==e?void 0:e.visible}function O(e){return x(e)?e:void 0}function P(e){const{absoluteForm:t,absolutePreset:n,allTime:i,relativeForm:r,relativePreset:l}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i&&{allTime:i}),t&&{absoluteForm:t}),!I(n)&&{absolutePreset:n}),r&&{relativeForm:r}),!I(l)&&{relativePreset:l})}function D(e){var t;const n=O(e.allTime),i=O(e.absoluteForm),r=O(e.relativeForm);return P({allTime:n,absoluteForm:i,absolutePreset:null===(t=e.absolutePreset)||void 0===t?void 0:t.filter(x),relativeForm:r,relativePreset:e.relativePreset&&(l=e.relativePreset,Object.keys(l).reduce(((e,t)=>{const n=l[t].filter(x);return n.length&&(e[t]=n),e}),{}))});var l}function A(e){return e.from>e.to?Object.assign(Object.assign({},e),{from:e.to,to:e.from}):e}function N(e){var t;const n=null===(t=e.absolutePreset)||void 0===t?void 0:t.map(A),i=e.relativePreset&&function(e){return Object.keys(e).reduce(((t,n)=>{const i=e[n];return t[n]=i.map(A),t}),{})}(e.relativePreset);return P(Object.assign(Object.assign({},e),{absolutePreset:n,relativePreset:i}))}var M=n(15616),T=n(48403),R=n(4400);const L=(e,t,n=c)=>p(e)&&t&&1===e.split(" ").length?`${e} ${n}`:e,_=(e,t,n)=>{const i=n.includes(o),l=n.replace(s,""),a=L(e,i,c),d=L(t,i,u),m=b(a),g=b(d),p=(f=g,0===(h=m).getHours()&&0===h.getMinutes()&&23===f.getHours()&&59===f.getMinutes());var h,f;if(r(m).isSame(g,"day"))return i&&!p?`${M(m,l)}, ${((e,t)=>{const n=M(e,o),i=M(t,o);return n===i?n:`${n} – ${i}`})(m,g)}`:M(m,l);const v=p?l:n;return`${M(m,v)} – ${M(g,v)}`},B=[{predicate:(e,t)=>0===e&&0===t,formatter:(e,t,n,i)=>i.formatMessage(v[`this${T(n)}`])},{predicate:(e,t)=>1===e&&1===t,formatter:(e,t,n,i)=>i.formatMessage(v[`next${T(n)}`])},{predicate:(e,t)=>-1===e&&-1===t,formatter:(e,t,n,i)=>i.formatMessage(v[`last${T(n)}`])},{predicate:e=>0===e,formatter:(e,t,n,i)=>i.formatMessage(v[`nextN${T(n)}s`],{n:Math.abs(t)+1})},{predicate:(e,t)=>0===t,formatter:(e,t,n,i)=>i.formatMessage(v[`lastN${T(n)}s`],{n:Math.abs(e)+1})},{predicate:(e,t)=>e<0&&e===t,formatter:(e,t,n,i)=>i.formatMessage(v[`${n}s.past.sameValue`],{value:Math.abs(e)})},{predicate:(e,t)=>e>0&&e===t,formatter:(e,t,n,i)=>i.formatMessage(v[`${n}s.future.sameValue`],{value:Math.abs(e)})},{predicate:(e,t)=>e<0&&t<0,formatter:(e,t,n,i)=>i.formatMessage(v[`${n}s.past`],{from:Math.abs(e),to:Math.abs(t)})},{predicate:(e,t)=>e>0&&t>0,formatter:(e,t,n,i)=>i.formatMessage(v[`${n}s.future`],{from:Math.abs(e),to:Math.abs(t)})},{predicate:()=>!0,formatter:(e,t,n,i)=>i.formatMessage(v[`${n}s.mixed`],{from:Math.abs(e),to:Math.abs(t)})}],V=(e,t,n,r)=>{const l=i[n],{formatter:a}=B.find((n=>n.predicate(e,t)));return a(e,t,l,r)},H=(e,t,n)=>{if((0,g.isAbsoluteDateFilterForm)(e)||(0,g.isRelativeDateFilterForm)(e))return Z(e,t,n);if((0,g.isAllTimeDateFilterOption)(e)||(0,g.isAbsoluteDateFilterPreset)(e)||(0,g.isRelativeDateFilterPreset)(e))return e.name||Z(e,t,n);throw new Error("Unknown DateFilterOption type")},j=(e,t,n=d)=>{const i=(0,R.getIntl)(t);return H(e,i,n)},Z=(e,t,n)=>{if((0,g.isAbsoluteDateFilterForm)(e))return((e,t)=>e.from&&e.to?_(e.from,e.to,t):"")(e,n);if((0,g.isAbsoluteDateFilterPreset)(e))return((e,t)=>_(e.from,e.to,t))(e,n);if((0,g.isAllTimeDateFilterOption)(e))return(e=>e.formatMessage({id:"filters.allTime.title"}))(t);if((0,g.isRelativeDateFilterForm)(e))return((e,t)=>"number"==typeof e.from&&"number"==typeof e.to?V(e.from,e.to,e.granularity,t):"")(e,t);if((0,g.isRelativeDateFilterPreset)(e))return((e,t)=>V(e.from,e.to,e.granularity,t))(e,t);throw new Error("Unknown DateFilterOption type")},q={validateFilterOption:y,getDateFilterTitle:j,getDateFilterTitleUsingTranslator:(e,t,n=d)=>H(e,t,n),getDateFilterRepresentation:(e,t,n=d)=>{const i=(0,R.getIntl)(t);return Z(e,i,n)},granularityIntlCodes:i,applyExcludeCurrentPeriod:C,defaultDateFilterOptions:m,canExcludeCurrentPeriod:S,mapOptionToAfm:(e,t,n)=>{const i=C(e,n);if((0,g.isAllTimeDateFilterOption)(i))return null;if(F(i))return((e,t)=>({absoluteDateFilter:{dataSet:t,from:e.from,to:e.to}}))(i,t);if(k(i))return((e,t)=>({relativeDateFilter:{dataSet:t,from:e.from,to:e.to,granularity:e.granularity}}))(i,t);throw new Error("Unknown date filter value provided")},formatAbsoluteDateRange:_,formatRelativeDateRange:V,filterVisibleDateFilterOptions:D};var W=n(59882),G=n(18446),z=n(14293),U=n(50308),$=n(97582),K=n(59242),Y=n(1852),Q=n(25356),J=n(6829);const X=(e=>`only screen and (min-width:${e.lower}px) and (max-width:${e.upper}px)`)({lower:0,upper:640});var ee=n(44012),te=n(94184);const ne=({isOpen:e,isMobile:t,title:n,children:i,disabled:r})=>W.createElement("div",{className:te("s-date-filter-button","gd-date-filter-button","dropdown-button",t&&"gd-date-filter-button-mobile",e&&"is-active",r&&"disabled")},W.createElement("div",{className:"button-content"},W.createElement("div",{className:"s-date-filter-title button-title"},n),W.createElement("div",{className:"button-subtitle"},i)));var ie=n(74806);const re=(0,ie.ZP)((({dateFormat:e,filter:t,intl:n})=>W.createElement(W.Fragment,null,j(t,(0,R.resolveLocale)(n.locale),e)))),le=({dateFilterOption:e,dateFormat:t,isOpen:n=!1,isMobile:i=!0,customFilterName:r,disabled:l})=>W.createElement(ne,{title:r||W.createElement(ee.Z,{id:"dateFilterDropdown.title"}),isOpen:n,isMobile:i,disabled:l},W.createElement("span",{className:"s-button-text"},W.createElement(re,{filter:e,dateFormat:t}))),ae=(0,Q.b)(Y),oe=e=>{var{isSelected:t,className:n,children:i}=e,r=(0,$.__rest)(e,["isSelected","className","children"]);return W.createElement(W.Fragment,null,W.createElement("button",Object.assign({className:te("gd-list-item","gd-filter-list-item",{"is-selected":t,"gd-filter-list-item-selected":t},n)},r),i,t?W.createElement(ae,{query:X},W.createElement(J.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-date-filter"})):null))},se=e=>{const t=!e.disabled&&e.granularity?v[`${i[e.granularity]}Excluded`].id:v.allTimeExcluded.id;return W.createElement(ee.Z,{id:t},((...e)=>W.createElement("span",{className:"input-label-text"},e)))},ce=[{align:"tc bc"}],ue=({value:e,onChange:t,disabled:n,granularity:i})=>W.createElement("div",{className:"gd-extended-date-filter-exclude-current"},W.createElement(J.BubbleHoverTrigger,null,W.createElement("label",{className:te("s-exclude-current-period","input-checkbox-label",{"s-exclude-current-perod-enabled":!n,"s-exclude-current-perod-disabled":n})},W.createElement("input",{type:"checkbox",className:"input-checkbox",checked:e,onChange:e=>t(e.target.checked),disabled:n})," ",W.createElement(se,{granularity:i,disabled:n})),n?W.createElement(J.Bubble,{alignPoints:ce},W.createElement(ee.Z,{id:"filters.excludeCurrentPeriod.unavailable"})):null)),de=e=>{var{className:t,children:n}=e,i=(0,$.__rest)(e,["className","children"]);return W.createElement("div",Object.assign({className:te("gd-visible-scrollbar",t)},i),n)},me=({className:e,filterOption:t,selectedFilterOption:n,onSelectedFilterOptionChange:i})=>W.createElement(oe,{isSelected:t.localIdentifier===n.localIdentifier,onClick:()=>i(t),className:te("s-all-time",e)},t.name?t.name:W.createElement(ee.Z,{id:"filters.allTime.title"})),ge=e=>{var{children:t,isMobile:n,className:i}=e,r=(0,$.__rest)(e,["children","isMobile","className"]);return W.createElement("div",Object.assign({className:te(i,"gd-date-filter-form-wrapper",!n&&"gd-date-filter-form-wrapper-desktop")},r),W.createElement("div",{className:"gd-date-filter-form-wrapper-inner"},t))};var pe=n(12595);const he=e=>r(e).format(l);var fe=n(2498);const be=e=>{var t;const n=r().locale(fe.Z(e)),i=(null==n?void 0:n.localeData)&&n.localeData();return null===(t=null==i?void 0:i._longDateFormat)||void 0===t?void 0:t.L},ve={"en-US":"M/d/y","en-GB":"dd/MM/y","cs-CZ":"d. M. y","de-DE":"d.M.y","es-ES":"d/M/y","fr-FR":"dd/MM/y","ja-JP":"y/M/d","nl-NL":"d-M-y","pt-BR":"dd/MM/y","pt-PT":"dd/MM/y","zh-Hans":"y/M/d","ru-RU":"dd.MM.y"},Ee=e=>{var t;return null!==(t=ve[e])&&void 0!==t?t:ve["en-US"]},ye=(0,ie.ZP)((e=>{const{dateFormat:t,errorId:n,intl:i}=e;return W.createElement("div",{className:"gd-date-range-picker-error-message s-absolute-range-error"},W.createElement(ee.Z,{id:n,values:{format:t||be(i.locale)}}))}));var Ce=n(39989),Se=n(91884);class Ie extends W.Component{constructor(){super(...arguments),this.inputRef=W.createRef(),this.invokeInputMethod=e=>{this.inputRef.current&&this.inputRef.current[e]()},this.blur=()=>this.invokeInputMethod("blur"),this.focus=()=>this.invokeInputMethod("focus")}get value(){return this.inputRef.current?this.inputRef.current.value:""}render(){const{className:e}=this.props;return W.createElement("span",{className:te(e)},W.createElement("span",{className:"gd-icon-calendar"}),W.createElement("input",Object.assign({},this.props,{ref:this.inputRef,className:"input-text s-date-range-picker-input-field"})))}}function we(e,t){return M(e,t)}const Fe=W.forwardRef(((e,t)=>{const{placeholderDate:n,value:i,onChange:l,dateFormat:a,handleDayClick:s,isMobile:c,isTimeEnabled:u,onKeyDown:d,className:m,error:g=!1}=e,[p,h]=(0,W.useState)((e=>r(e).format(o))(i)),[f,v]=(0,W.useState)(we(i,a));(0,W.useEffect)((()=>{v(we(i,a))}),[i,a]);const E=e=>{l((e=>{if(u&&e){const t=null!=i?i:r(p,o).toDate();e.setHours(t.getHours()),e.setMinutes(t.getMinutes())}return e})(e))};return W.createElement("div",{className:te(m,u&&"gd-flex-row")},c?W.createElement(Ie,{type:"date",className:te("s-date-range-picker-date","gd-date-range-picker-input","gd-date-range-picker-input-native",g&&"gd-date-range-picker-input-error"),placeholder:n,onChange:e=>E(b(e.target.value)),value:he(i)}):W.createElement("div",{className:te("gd-date-range-picker-input",g&&"gd-date-range-picker-input-error")},W.createElement("span",null,W.createElement("span",{className:"gd-icon-calendar"}),W.createElement("input",{onKeyDown:d,ref:t,placeholder:n,onChange:e=>(e=>{v(e);const t=function(e,t){try{const n=Se(e,t,new Date);return Ce(n)&&n.getFullYear()>=1e3&&e===we(n,t)?n:void 0}catch(e){return}}(e,a);E(t)})(e.target.value),onClick:s,onFocus:s,value:f,className:"input-text s-date-range-picker-input-field"}))),u?W.createElement("span",{className:te("gd-date-range-picker-input","gd-date-range-picker-input-time","s-date-range-picker-input-time",g&&"gd-date-range-picker-input-error")},W.createElement("span",{className:"gd-icon-clock"}),W.createElement("input",{type:"time",className:"input-text",onChange:e=>(e=>{const t=null!=i?i:new Date,n=r(e,o);n.isValid()&&(t.setHours(n.hours()),t.setMinutes(n.minutes()),h(e)),l(t)})(e.target.value),value:p})):null)}));Fe.displayName="DateTimePickerComponent";const ke=(0,ie.ZP)(Fe,{forwardRef:!0});ke.displayName="DateTimePicker";var xe=n(82512),Oe=n(76119),Pe=n(19962),De=n(63126),Ae=n(42180),Ne=n(70390),Me=n(63086);const Te={"en-US":xe,"de-DE":Oe,"es-ES":Pe,"fr-FR":De,"ja-JP":Ae,"nl-NL":Ne,"pt-BR":n(81333),"pt-PT":Me,"zh-Hans":n(24602),"ru-RU":n(66754)},Re=[{align:"bl tl",offset:{x:0,y:1}}];function Le(e){switch(e){case"Sunday":return 0;case"Monday":return 1;default:throw new Error(`Unknown week start ${e}`)}}class _e extends W.Component{constructor(e){super(e),this.dateRangePickerInputFrom=W.createRef(),this.dateRangePickerInputTo=W.createRef(),this.dateRangePickerContainer=W.createRef(),this.handleRangeSelect=(e,t)=>{let n,i;"from"==this.state.selectedInput?(n=this.setTimeForDate(t,this.state.inputFromValue),i=this.state.inputToValue):(n=this.state.inputFromValue,i=this.setTimeForDate(t,this.state.inputToValue)),this.setState({inputFromValue:n,inputToValue:i,selectedRange:{from:n,to:i},isOpen:!1},(()=>{this.updateRange(n,i)}))},this.updateRange=(e,t)=>{this.props.onRangeChange({from:e,to:t})},this.handleFromDayClick=()=>{this.setState({selectedInput:"from",isOpen:!0,monthDate:this.props.range.from})},this.handleToDayClick=()=>{this.setState({selectedInput:"to",isOpen:!0,monthDate:this.props.range.to})},this.handleFromChange=e=>{e&&this.setState({inputFromValue:e}),this.setState({selectedRange:{from:e,to:this.state.selectedRange.to},monthDate:e},(()=>{this.updateRange(e,this.state.selectedRange.to)}))},this.handleToChange=e=>{e&&this.setState({inputToValue:e}),this.setState({selectedRange:{from:this.state.selectedRange.from,to:e},monthDate:e},(()=>{this.updateRange(this.state.selectedRange.from,e)}))},this.state={isOpen:!1,inputFromValue:this.props.range.from,inputToValue:this.props.range.to,selectedRange:{from:this.props.range.from,to:this.props.range.to},monthDate:null,selectedInput:null},this.handleMonthChanged=this.handleMonthChanged.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.handleMonthChanged=this.handleMonthChanged.bind(this),this.handleRangeSelect=this.handleRangeSelect.bind(this),this.handleFromDayClick=this.handleFromDayClick.bind(this),this.handleToDayClick=this.handleToDayClick.bind(this),this.handleFromChange=this.handleFromChange.bind(this),this.handleToChange=this.handleToChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}componentDidMount(){document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleClickOutside)}render(){const{dateFormat:e,range:{from:t,to:n},dayPickerProps:i,intl:r,isMobile:l,errors:{from:a,to:o}={from:void 0,to:void 0},isTimeEnabled:s,weekStart:c="Sunday",shouldOverlayDatePicker:d=!1}=this.props;var m;const g=(S={mode:"range",showOutsideDays:!0,modifiers:{start:t,end:n},selected:{from:t,to:n},locale:(m=r.locale,Te[m])},(I=i)?((e,t)=>{return Object.assign(Object.assign(Object.assign({},e),t),(n=e.modifiers,i=t.modifiers,n?{modifiers:Object.assign(Object.assign({},n),i)}:void 0));var n,i})(S,I):S),p={root:`gd-date-range-picker-picker s-date-range-calendar-${this.state.selectedInput}`},h=W.createElement("div",{className:"gd-date-range-picker-wrapper",ref:this.dateRangePickerContainer},W.createElement(pe._W,Object.assign({},g,{onSelect:this.handleRangeSelect,selected:this.state.selectedRange,month:this.state.monthDate,classNames:p,onMonthChange:this.handleMonthChanged,weekStartsOn:Le(c)}))),f=W.createElement(J.Overlay,{alignTo:`.gd-date-range-picker-${s?this.state.selectedInput:"from"}`,alignPoints:Re,closeOnOutsideClick:!0,closeOnMouseDrag:!0,closeOnParentScroll:!0},h),b=W.createElement(ke,{onKeyDown:this.onKeyDown,ref:this.dateRangePickerInputFrom,placeholderDate:r.formatMessage({id:"filters.from"}),onChange:this.handleFromChange,value:this.state.inputFromValue,dateFormat:e,isMobile:l,handleDayClick:this.handleFromDayClick,isTimeEnabled:s,className:te("s-date-range-picker-from","gd-date-range-picker-from"),error:void 0!==a}),v=W.createElement(ke,{onKeyDown:this.onKeyDown,ref:this.dateRangePickerInputTo,placeholderDate:r.formatMessage({id:"filters.to"}),onChange:this.handleToChange,value:this.state.inputToValue,dateFormat:e,isMobile:l,handleDayClick:this.handleToDayClick,isTimeEnabled:s,className:te("s-date-range-picker-to","gd-date-range-picker-to"),defaultTime:u,error:void 0!==o}),E=d?f:h,y="from"===this.state.selectedInput&&this.state.isOpen,C="to"===this.state.selectedInput&&this.state.isOpen;var S,I;return W.createElement(W.Fragment,null,s?W.createElement("div",{className:"gd-date-range-picker datetime s-date-range-picker"},W.createElement("label",null,r.formatMessage({id:"filters.from"})),b,y?E:null,W.createElement("label",null,r.formatMessage({id:"filters.to"})),v,C?E:null):W.createElement(W.Fragment,null,W.createElement("div",{className:"gd-date-range-picker gd-flex-row s-date-range-picker"},b,W.createElement("span",{className:"gd-date-range-picker-dash"},"–"),v),this.state.isOpen?E:null),a||o?W.createElement(ye,{dateFormat:e,errorId:a||o}):null)}onKeyDown(e){"Escape"!==e.key&&"Tab"!==e.key||this.setState({isOpen:!1})}handleMonthChanged(e){this.setState({monthDate:e})}setTimeForDate(e,t){const n=new Date(e);return n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n}handleClickOutside(e){this.dateRangePickerContainer.current&&!this.dateRangePickerContainer.current.contains(e.target)&&this.dateRangePickerInputFrom&&!this.dateRangePickerInputFrom.current.contains(e.target)&&this.dateRangePickerInputTo&&!this.dateRangePickerInputTo.current.contains(e.target)&&this.setState({isOpen:!1})}}const Be=(0,ie.ZP)(_e),Ve=(e,t=!1)=>{const n=e.from&&e.from.split(" ").length>1,i=e.to&&e.to.split(" ").length>1,r=e&&b(e.from),l=e&&b(e.to);return r&&!n&&t&&(r.setHours(0),r.setMinutes(0)),l&&!i&&t&&(l.setHours(23),l.setMinutes(59)),{from:r,to:l}},He={mode:"range",weekStartsOn:0};class je extends W.Component{constructor(){super(...arguments),this.handleRangeChange=e=>{const{selectedFilterOption:t,isTimeEnabled:n}=this.props;this.props.onSelectedFilterOptionChange(((e,t,n)=>{const i=n?a:l;return{from:f(e.from,i),to:f(e.to,i),localIdentifier:t,type:"absoluteForm",name:"",visible:!0}})(e,t.localIdentifier,n))}}render(){const{dateFormat:e,isMobile:t,selectedFilterOption:n,errors:i,isTimeEnabled:r,weekStart:l,shouldOverlayDatePicker:a}=this.props;return W.createElement(Be,{dateFormat:e,onRangeChange:this.handleRangeChange,range:Ve(n,r),errors:i,isMobile:t,dayPickerProps:He,isTimeEnabled:r,weekStart:l,shouldOverlayDatePicker:a})}}const Ze=e=>{var{children:t,className:n,bubbleAlignPoints:i}=e,r=(0,$.__rest)(e,["children","className","bubbleAlignPoints"]);return W.createElement("span",Object.assign({className:te("gd-list-item-tooltip",n)},r),W.createElement(J.BubbleHoverTrigger,null,W.createElement("span",{className:"gd-icon-circle-question gd-list-item-tooltip-icon"}),W.createElement(J.Bubble,{alignPoints:i},t)))};var qe=n(89734);const We=e=>{var{className:t,children:n}=e,i=(0,$.__rest)(e,["className","children"]);return W.createElement("div",Object.assign({className:te("gd-tabs small is-condensed",t)},i),n)},Ge=e=>{var{selected:t,className:n,children:i}=e,r=(0,$.__rest)(e,["selected","className","children"]);return W.createElement("div",Object.assign({className:te(t&&"is-active","gd-tab",n)},r),i)},ze={"GDC.time.year":0,"GDC.time.quarter":1,"GDC.time.month":2,"GDC.time.week_us":3,"GDC.time.date":4,"GDC.time.hour":5,"GDC.time.minute":6},Ue=({availableGranularities:e,onSelectedGranularityChange:t,selectedGranularity:n})=>{return W.createElement(We,{className:"gd-relative-filter-form-granularity-tabs s-relative-filter-form-granularity-tabs"},(r=e,qe(r,(e=>ze[e]))).map((e=>{const r=i[e];return W.createElement(Ge,{key:e,selected:e===n,onClick:()=>t(e),className:`s-granularity-${r}`},W.createElement(ee.Z,{id:v[r].id}))})));var r};var $e=n(63366),Ke=n(87462),Ye=n(97326),Qe=n(94578),Je=n(45697),Xe=n.n(Je),et=n(9155);function tt(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function nt(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function it(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return nt(n.overflowY,t)||nt(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function rt(e,t,n,i,r,l,a,o){return l<e&&a>t||l>e&&a<t?0:l<=e&&o<=n||a>=t&&o>=n?l-e-i:a>t&&o<n||l<e&&o>n?a-t+r:0}n(59864);var lt=0;function at(e){return"function"==typeof e?e:ot}function ot(){}function st(e,t){if(null!==e){var n=function(e,t){var n=window,i=t.scrollMode,r=t.block,l=t.inline,a=t.boundary,o=t.skipOverflowHiddenElements,s="function"==typeof a?a:function(e){return e!==a};if(!tt(e))throw new TypeError("Invalid target");for(var c,u,d=document.scrollingElement||document.documentElement,m=[],g=e;tt(g)&&s(g);){if((g=null==(u=(c=g).parentElement)?c.getRootNode().host||null:u)===d){m.push(g);break}null!=g&&g===document.body&&it(g)&&!it(document.documentElement)||null!=g&&it(g,o)&&m.push(g)}for(var p=n.visualViewport?n.visualViewport.width:innerWidth,h=n.visualViewport?n.visualViewport.height:innerHeight,f=window.scrollX||pageXOffset,b=window.scrollY||pageYOffset,v=e.getBoundingClientRect(),E=v.height,y=v.width,C=v.top,S=v.right,I=v.bottom,w=v.left,F="start"===r||"nearest"===r?C:"end"===r?I:C+E/2,k="center"===l?w+y/2:"end"===l?S:w,x=[],O=0;O<m.length;O++){var P=m[O],D=P.getBoundingClientRect(),A=D.height,N=D.width,M=D.top,T=D.right,R=D.bottom,L=D.left;if("if-needed"===i&&C>=0&&w>=0&&I<=h&&S<=p&&C>=M&&I<=R&&w>=L&&S<=T)return x;var _=getComputedStyle(P),B=parseInt(_.borderLeftWidth,10),V=parseInt(_.borderTopWidth,10),H=parseInt(_.borderRightWidth,10),j=parseInt(_.borderBottomWidth,10),Z=0,q=0,W="offsetWidth"in P?P.offsetWidth-P.clientWidth-B-H:0,G="offsetHeight"in P?P.offsetHeight-P.clientHeight-V-j:0,z="offsetWidth"in P?0===P.offsetWidth?0:N/P.offsetWidth:0,U="offsetHeight"in P?0===P.offsetHeight?0:A/P.offsetHeight:0;if(d===P)Z="start"===r?F:"end"===r?F-h:"nearest"===r?rt(b,b+h,h,V,j,b+F,b+F+E,E):F-h/2,q="start"===l?k:"center"===l?k-p/2:"end"===l?k-p:rt(f,f+p,p,B,H,f+k,f+k+y,y),Z=Math.max(0,Z+b),q=Math.max(0,q+f);else{Z="start"===r?F-M-V:"end"===r?F-R+j+G:"nearest"===r?rt(M,R,A,V,j+G,F,F+E,E):F-(M+A/2)+G/2,q="start"===l?k-L-B:"center"===l?k-(L+N/2)+W/2:"end"===l?k-T+H+W:rt(L,T,N,B,H+W,k,k+y,y);var $=P.scrollLeft,K=P.scrollTop;F+=K-(Z=Math.max(0,Math.min(K+Z/U,P.scrollHeight-A/U+G))),k+=$-(q=Math.max(0,Math.min($+q/z,P.scrollWidth-N/z+W)))}x.push({el:P,top:Z,left:q})}return x}(e,{boundary:t,block:"nearest",scrollMode:"if-needed"});n.forEach((function(e){var t=e.el,n=e.top,i=e.left;t.scrollTop=n,t.scrollLeft=i}))}}function ct(e,t){return e===t||e.contains&&e.contains(t)}function ut(e,t){var n;function i(){n&&clearTimeout(n)}function r(){for(var r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];i(),n=setTimeout((function(){n=null,e.apply(void 0,l)}),t)}return r.cancel=i,r}function dt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.some((function(t){return t&&t.apply(void 0,[e].concat(i)),e.preventDownshiftDefault||e.hasOwnProperty("nativeEvent")&&e.nativeEvent.preventDownshiftDefault}))}}function mt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){"function"==typeof t?t(e):t&&(t.current=e)}))}}function gt(e){var t=e.isOpen,n=e.selectedItem,i=e.resultCount,r=e.previousResultCount,l=e.itemToString;return t?i?i!==r?i+" result"+(1===i?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":n?l(n):""}function pt(e,t){return!(e=Array.isArray(e)?e[0]:e)&&t?t:e}var ht=["highlightedIndex","inputValue","isOpen","selectedItem","type"];function ft(e){void 0===e&&(e={});var t={};return ht.forEach((function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}function bt(e){var t=e.key,n=e.keyCode;return n>=37&&n<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}function vt(e,t,n){var i=n-1;("number"!=typeof t||t<0||t>=n)&&(t=e>0?-1:i+1);var r=t+e;return r<0?r=i:r>i&&(r=0),r}var Et=ut((function(){yt().textContent=""}),500);function yt(e){void 0===e&&(e=document);var t=e.getElementById("a11y-status-message");return t||((t=e.createElement("div")).setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var Ct=Object.freeze({__proto__:null,unknown:0,mouseUp:1,itemMouseEnter:2,keyDownArrowUp:3,keyDownArrowDown:4,keyDownEscape:5,keyDownEnter:6,keyDownHome:7,keyDownEnd:8,clickItem:9,blurInput:10,changeInput:11,keyDownSpaceButton:12,clickButton:13,blurButton:14,controlledPropUpdatedSelectedItem:15,touchEnd:16}),St=function(){var e=function(e){function t(t){var n=e.call(this,t)||this;n.id=n.props.id||"downshift-"+String(lt++),n.menuId=n.props.menuId||n.id+"-menu",n.labelId=n.props.labelId||n.id+"-label",n.inputId=n.props.inputId||n.id+"-input",n.getItemId=n.props.getItemId||function(e){return n.id+"-item-"+e},n.input=null,n.items=[],n.itemCount=null,n.previousResultCount=0,n.timeoutIds=[],n.internalSetTimeout=function(e,t){var i=setTimeout((function(){n.timeoutIds=n.timeoutIds.filter((function(e){return e!==i})),e()}),t);n.timeoutIds.push(i)},n.setItemCount=function(e){n.itemCount=e},n.unsetItemCount=function(){n.itemCount=null},n.setHighlightedIndex=function(e,t){void 0===e&&(e=n.props.defaultHighlightedIndex),void 0===t&&(t={}),t=ft(t),n.internalSetState((0,Ke.Z)({highlightedIndex:e},t))},n.clearSelection=function(e){n.internalSetState({selectedItem:null,inputValue:"",highlightedIndex:n.props.defaultHighlightedIndex,isOpen:n.props.defaultIsOpen},e)},n.selectItem=function(e,t,i){t=ft(t),n.internalSetState((0,Ke.Z)({isOpen:n.props.defaultIsOpen,highlightedIndex:n.props.defaultHighlightedIndex,selectedItem:e,inputValue:n.props.itemToString(e)},t),i)},n.selectItemAtIndex=function(e,t,i){var r=n.items[e];null!=r&&n.selectItem(r,t,i)},n.selectHighlightedItem=function(e,t){return n.selectItemAtIndex(n.getState().highlightedIndex,e,t)},n.internalSetState=function(e,t){var i,r,l={},a="function"==typeof e;return!a&&e.hasOwnProperty("inputValue")&&n.props.onInputValueChange(e.inputValue,(0,Ke.Z)({},n.getStateAndHelpers(),{},e)),n.setState((function(t){t=n.getState(t);var o=a?e(t):e;o=n.props.stateReducer(t,o),i=o.hasOwnProperty("selectedItem");var s={},c={};return i&&o.selectedItem!==t.selectedItem&&(r=o.selectedItem),o.type=o.type||0,Object.keys(o).forEach((function(e){t[e]!==o[e]&&(l[e]=o[e]),"type"!==e&&(c[e]=o[e],n.isControlledProp(e)||(s[e]=o[e]))})),a&&o.hasOwnProperty("inputValue")&&n.props.onInputValueChange(o.inputValue,(0,Ke.Z)({},n.getStateAndHelpers(),{},o)),s}),(function(){at(t)(),Object.keys(l).length>1&&n.props.onStateChange(l,n.getStateAndHelpers()),i&&n.props.onSelect(e.selectedItem,n.getStateAndHelpers()),void 0!==r&&n.props.onChange(r,n.getStateAndHelpers()),n.props.onUserAction(l,n.getStateAndHelpers())}))},n.rootRef=function(e){return n._rootNode=e},n.getRootProps=function(e,t){var i,r=void 0===e?{}:e,l=r.refKey,a=void 0===l?"ref":l,o=r.ref,s=(0,$e.Z)(r,["refKey","ref"]),c=(void 0===t?{}:t).suppressRefError,u=void 0!==c&&c;n.getRootProps.called=!0,n.getRootProps.refKey=a,n.getRootProps.suppressRefError=u;var d=n.getState().isOpen;return(0,Ke.Z)(((i={})[a]=mt(o,n.rootRef),i.role="combobox",i["aria-expanded"]=d,i["aria-haspopup"]="listbox",i["aria-owns"]=d?n.menuId:null,i["aria-labelledby"]=n.labelId,i),s)},n.keyDownHandlers={ArrowDown:function(e){var t=this;if(e.preventDefault(),this.getState().isOpen){var n=e.shiftKey?5:1;this.moveHighlightedIndex(n,{type:4})}else this.internalSetState({isOpen:!0,type:4},(function(){var e=t.getItemCount();e>0&&t.setHighlightedIndex(vt(1,t.getState().highlightedIndex,e),{type:4})}))},ArrowUp:function(e){var t=this;if(e.preventDefault(),this.getState().isOpen){var n=e.shiftKey?-5:-1;this.moveHighlightedIndex(n,{type:3})}else this.internalSetState({isOpen:!0,type:3},(function(){var e=t.getItemCount();e>0&&t.setHighlightedIndex(vt(-1,t.getState().highlightedIndex,e),{type:4})}))},Enter:function(e){var t=this.getState(),n=t.isOpen,i=t.highlightedIndex;if(n&&null!=i){e.preventDefault();var r=this.items[i],l=this.getItemNodeFromIndex(i);if(null==r||l&&l.hasAttribute("disabled"))return;this.selectHighlightedItem({type:6})}},Escape:function(e){e.preventDefault(),this.reset({type:5,selectedItem:null,inputValue:""})}},n.buttonKeyDownHandlers=(0,Ke.Z)({},n.keyDownHandlers,{" ":function(e){e.preventDefault(),this.toggleMenu({type:12})}}),n.inputKeyDownHandlers=(0,Ke.Z)({},n.keyDownHandlers,{Home:function(e){this.highlightFirstOrLastIndex(e,!0,{type:7})},End:function(e){this.highlightFirstOrLastIndex(e,!1,{type:8})}}),n.getToggleButtonProps=function(e){var t=void 0===e?{}:e,i=t.onClick,r=(t.onPress,t.onKeyDown),l=t.onKeyUp,a=t.onBlur,o=(0,$e.Z)(t,["onClick","onPress","onKeyDown","onKeyUp","onBlur"]),s=n.getState().isOpen,c={onClick:dt(i,n.buttonHandleClick),onKeyDown:dt(r,n.buttonHandleKeyDown),onKeyUp:dt(l,n.buttonHandleKeyUp),onBlur:dt(a,n.buttonHandleBlur)},u=o.disabled?{}:c;return(0,Ke.Z)({type:"button",role:"button","aria-label":s?"close menu":"open menu","aria-haspopup":!0,"data-toggle":!0},u,{},o)},n.buttonHandleKeyUp=function(e){e.preventDefault()},n.buttonHandleKeyDown=function(e){var t=bt(e);n.buttonKeyDownHandlers[t]&&n.buttonKeyDownHandlers[t].call((0,Ye.Z)(n),e)},n.buttonHandleClick=function(e){e.preventDefault(),n.props.environment.document.activeElement===n.props.environment.document.body&&e.target.focus(),n.internalSetTimeout((function(){return n.toggleMenu({type:13})}))},n.buttonHandleBlur=function(e){var t=e.target;n.internalSetTimeout((function(){n.isMouseDown||null!=n.props.environment.document.activeElement&&n.props.environment.document.activeElement.id===n.inputId||n.props.environment.document.activeElement===t||n.reset({type:14})}))},n.getLabelProps=function(e){return(0,Ke.Z)({htmlFor:n.inputId,id:n.labelId},e)},n.getInputProps=function(e){var t,i=void 0===e?{}:e,r=i.onKeyDown,l=i.onBlur,a=i.onChange,o=i.onInput,s=(i.onChangeText,(0,$e.Z)(i,["onKeyDown","onBlur","onChange","onInput","onChangeText"])),c={},u=n.getState(),d=u.inputValue,m=u.isOpen,g=u.highlightedIndex;return s.disabled||((t={}).onChange=dt(a,o,n.inputHandleChange),t.onKeyDown=dt(r,n.inputHandleKeyDown),t.onBlur=dt(l,n.inputHandleBlur),c=t),(0,Ke.Z)({"aria-autocomplete":"list","aria-activedescendant":m&&"number"==typeof g&&g>=0?n.getItemId(g):null,"aria-controls":m?n.menuId:null,"aria-labelledby":n.labelId,autoComplete:"off",value:d,id:n.inputId},c,{},s)},n.inputHandleKeyDown=function(e){var t=bt(e);t&&n.inputKeyDownHandlers[t]&&n.inputKeyDownHandlers[t].call((0,Ye.Z)(n),e)},n.inputHandleChange=function(e){n.internalSetState({type:11,isOpen:!0,inputValue:e.target.value,highlightedIndex:n.props.defaultHighlightedIndex})},n.inputHandleBlur=function(){n.internalSetTimeout((function(){var e=n.props.environment.document&&!!n.props.environment.document.activeElement&&!!n.props.environment.document.activeElement.dataset&&n.props.environment.document.activeElement.dataset.toggle&&n._rootNode&&n._rootNode.contains(n.props.environment.document.activeElement);n.isMouseDown||e||n.reset({type:10})}))},n.menuRef=function(e){n._menuNode=e},n.getMenuProps=function(e,t){var i,r=void 0===e?{}:e,l=r.refKey,a=void 0===l?"ref":l,o=r.ref,s=(0,$e.Z)(r,["refKey","ref"]),c=(void 0===t?{}:t).suppressRefError,u=void 0!==c&&c;return n.getMenuProps.called=!0,n.getMenuProps.refKey=a,n.getMenuProps.suppressRefError=u,(0,Ke.Z)(((i={})[a]=mt(o,n.menuRef),i.role="listbox",i["aria-labelledby"]=s&&s["aria-label"]?null:n.labelId,i.id=n.menuId,i),s)},n.getItemProps=function(e){var t,i=void 0===e?{}:e,r=i.onMouseMove,l=i.onMouseDown,a=i.onClick,o=(i.onPress,i.index),s=i.item,c=void 0===s?void 0:s,u=(0,$e.Z)(i,["onMouseMove","onMouseDown","onClick","onPress","index","item"]);void 0===o?(n.items.push(c),o=n.items.indexOf(c)):n.items[o]=c;var d=a,m=((t={onMouseMove:dt(r,(function(){o!==n.getState().highlightedIndex&&(n.setHighlightedIndex(o,{type:2}),n.avoidScrolling=!0,n.internalSetTimeout((function(){return n.avoidScrolling=!1}),250))})),onMouseDown:dt(l,(function(e){e.preventDefault()}))}).onClick=dt(d,(function(){n.selectItemAtIndex(o,{type:9})})),t),g=u.disabled?{onMouseDown:m.onMouseDown}:m;return(0,Ke.Z)({id:n.getItemId(o),role:"option","aria-selected":n.getState().highlightedIndex===o},g,{},u)},n.clearItems=function(){n.items=[]},n.reset=function(e,t){void 0===e&&(e={}),e=ft(e),n.internalSetState((function(t){var i=t.selectedItem;return(0,Ke.Z)({isOpen:n.props.defaultIsOpen,highlightedIndex:n.props.defaultHighlightedIndex,inputValue:n.props.itemToString(i)},e)}),t)},n.toggleMenu=function(e,t){void 0===e&&(e={}),e=ft(e),n.internalSetState((function(t){var i=t.isOpen;return(0,Ke.Z)({isOpen:!i},i&&{highlightedIndex:n.props.defaultHighlightedIndex},{},e)}),(function(){var i=n.getState(),r=i.isOpen,l=i.highlightedIndex;r&&n.getItemCount()>0&&"number"==typeof l&&n.setHighlightedIndex(l,e),at(t)()}))},n.openMenu=function(e){n.internalSetState({isOpen:!0},e)},n.closeMenu=function(e){n.internalSetState({isOpen:!1},e)},n.updateStatus=ut((function(){var e=n.getState(),t=n.items[e.highlightedIndex],i=n.getItemCount(),r=n.props.getA11yStatusMessage((0,Ke.Z)({itemToString:n.props.itemToString,previousResultCount:n.previousResultCount,resultCount:i,highlightedItem:t},e));n.previousResultCount=i,function(e,t){var n=yt(t);e&&(n.textContent=e,Et())}(r,n.props.environment.document)}),200);var i=n.props,r=i.defaultHighlightedIndex,l=i.initialHighlightedIndex,a=void 0===l?r:l,o=i.defaultIsOpen,s=i.initialIsOpen,c=void 0===s?o:s,u=i.initialInputValue,d=void 0===u?"":u,m=i.initialSelectedItem,g=void 0===m?null:m,p=n.getState({highlightedIndex:a,isOpen:c,inputValue:d,selectedItem:g});return null!=p.selectedItem&&void 0===n.props.initialInputValue&&(p.inputValue=n.props.itemToString(p.selectedItem)),n.state=p,n}(0,Qe.Z)(t,e);var n=t.prototype;return n.internalClearTimeouts=function(){this.timeoutIds.forEach((function(e){clearTimeout(e)})),this.timeoutIds=[]},n.getState=function(e){var t=this;return void 0===e&&(e=this.state),Object.keys(e).reduce((function(n,i){return n[i]=t.isControlledProp(i)?t.props[i]:e[i],n}),{})},n.isControlledProp=function(e){return void 0!==this.props[e]},n.getItemCount=function(){var e=this.items.length;return null!=this.itemCount?e=this.itemCount:void 0!==this.props.itemCount&&(e=this.props.itemCount),e},n.getItemNodeFromIndex=function(e){return this.props.environment.document.getElementById(this.getItemId(e))},n.scrollHighlightedItemIntoView=function(){var e=this.getItemNodeFromIndex(this.getState().highlightedIndex);this.props.scrollIntoView(e,this._menuNode)},n.moveHighlightedIndex=function(e,t){var n=this.getItemCount();if(n>0){var i=vt(e,this.getState().highlightedIndex,n);this.setHighlightedIndex(i,t)}},n.highlightFirstOrLastIndex=function(e,t,n){var i=this.getItemCount()-1;i<0||!this.getState().isOpen||(e.preventDefault(),this.setHighlightedIndex(t?0:i,n))},n.getStateAndHelpers=function(){var e=this.getState(),t=e.highlightedIndex,n=e.inputValue,i=e.selectedItem,r=e.isOpen,l=this.props.itemToString,a=this.id,o=this.getRootProps,s=this.getToggleButtonProps,c=this.getLabelProps,u=this.getMenuProps,d=this.getInputProps,m=this.getItemProps,g=this.openMenu,p=this.closeMenu,h=this.toggleMenu,f=this.selectItem,b=this.selectItemAtIndex,v=this.selectHighlightedItem,E=this.setHighlightedIndex,y=this.clearSelection,C=this.clearItems;return{getRootProps:o,getToggleButtonProps:s,getLabelProps:c,getMenuProps:u,getInputProps:d,getItemProps:m,reset:this.reset,openMenu:g,closeMenu:p,toggleMenu:h,selectItem:f,selectItemAtIndex:b,selectHighlightedItem:v,setHighlightedIndex:E,clearSelection:y,clearItems:C,setItemCount:this.setItemCount,unsetItemCount:this.unsetItemCount,setState:this.internalSetState,itemToString:l,id:a,highlightedIndex:t,inputValue:n,isOpen:r,selectedItem:i}},n.componentDidMount=function(){var e=this,t=function(t,n){void 0===n&&(n=!0);var i=e.props.environment.document;return[e._rootNode,e._menuNode].some((function(e){return e&&(ct(e,t)||n&&ct(e,i.activeElement))}))},n=function(){e.isMouseDown=!0},i=function(n){e.isMouseDown=!1,!t(n.target)&&e.getState().isOpen&&e.reset({type:1},(function(){return e.props.onOuterClick(e.getStateAndHelpers())}))},r=function(){e.isTouchMove=!1},l=function(){e.isTouchMove=!0},a=function(n){var i=t(n.target,!1);e.isTouchMove||i||!e.getState().isOpen||e.reset({type:16},(function(){return e.props.onOuterClick(e.getStateAndHelpers())}))},o=this.props.environment;o.addEventListener("mousedown",n),o.addEventListener("mouseup",i),o.addEventListener("touchstart",r),o.addEventListener("touchmove",l),o.addEventListener("touchend",a),this.cleanup=function(){e.internalClearTimeouts(),e.updateStatus.cancel(),o.removeEventListener("mousedown",n),o.removeEventListener("mouseup",i),o.removeEventListener("touchstart",r),o.removeEventListener("touchmove",l),o.removeEventListener("touchend",a)}},n.shouldScroll=function(e,t){var n=(void 0===this.props.highlightedIndex?this.getState():this.props).highlightedIndex,i=(void 0===t.highlightedIndex?e:t).highlightedIndex;return n&&this.getState().isOpen&&!e.isOpen||n!==i},n.componentDidUpdate=function(e,t){this.isControlledProp("selectedItem")&&this.props.selectedItemChanged(e.selectedItem,this.props.selectedItem)&&this.internalSetState({type:15,inputValue:this.props.itemToString(this.props.selectedItem)}),!this.avoidScrolling&&this.shouldScroll(t,e)&&this.scrollHighlightedItemIntoView(),this.updateStatus()},n.componentWillUnmount=function(){this.cleanup()},n.render=function(){var e=pt(this.props.children,ot);this.clearItems(),this.getRootProps.called=!1,this.getRootProps.refKey=void 0,this.getRootProps.suppressRefError=void 0,this.getMenuProps.called=!1,this.getMenuProps.refKey=void 0,this.getMenuProps.suppressRefError=void 0,this.getLabelProps.called=!1,this.getInputProps.called=!1;var t=pt(e(this.getStateAndHelpers()));return t?this.getRootProps.called||this.props.suppressRefError?t:function(e){return"string"==typeof e.type}(t)?(0,et.cloneElement)(t,this.getRootProps(function(e){return e.props}(t))):void 0:null},t}(et.Component);return e.defaultProps={defaultHighlightedIndex:null,defaultIsOpen:!1,getA11yStatusMessage:gt,itemToString:function(e){return null==e?"":String(e)},onStateChange:ot,onInputValueChange:ot,onUserAction:ot,onChange:ot,onSelect:ot,onOuterClick:ot,selectedItemChanged:function(e,t){return e!==t},environment:"undefined"==typeof window?{}:window,stateReducer:function(e,t){return t},suppressRefError:!1,scrollIntoView:st},e.stateChangeTypes=Ct,e}();Xe().array.isRequired,Xe().func,Xe().func,Xe().func,Xe().bool,Xe().number,Xe().number,Xe().number,Xe().bool,Xe().bool,Xe().bool,Xe().any,Xe().any,Xe().any,Xe().string,Xe().string,Xe().string,Xe().func,Xe().string,Xe().func,Xe().func,Xe().func,Xe().func,Xe().func,Xe().shape({addEventListener:Xe().func,removeEventListener:Xe().func,document:Xe().shape({getElementById:Xe().func,activeElement:Xe().any,body:Xe().any})}),"undefined"==typeof window||window;const It=St,wt=e=>"option"===(null==e?void 0:e.type)&&e.label?e.label:"",Ft=e=>e.filter((e=>"option"===e.type));var kt=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function xt(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!((i=e[n])===(r=t[n])||kt(i)&&kt(r)))return!1;var i,r;return!0}const Ot=function(e,t){var n;void 0===t&&(t=xt);var i,r=[],l=!1;return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return l&&n===this&&t(a,r)||(i=e.apply(this,a),l=!0,n=this,r=a),i}};var Pt=n(31049),Dt="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function At(e){cancelAnimationFrame(e.id)}var Nt=-1;function Mt(e){if(void 0===e&&(e=!1),-1===Nt||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(t),Nt=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Nt}var Tt=null;function Rt(e){if(void 0===e&&(e=!1),null===Tt||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var i=document.createElement("div"),r=i.style;return r.width="100px",r.height="100px",t.appendChild(i),document.body.appendChild(t),t.scrollLeft>0?Tt="positive-descending":(t.scrollLeft=1,Tt=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),Tt}return Tt}var Lt=function(e,t){return e};function _t(e){var t,n=e.getItemOffset,i=e.getEstimatedTotalSize,r=e.getItemSize,l=e.getOffsetForIndexAndAlignment,a=e.getStartIndexForOffset,o=e.getStopIndexForStartIndex,s=e.initInstanceProps,c=e.shouldResetStyleCacheOnItemSizeChange,u=e.validateProps;return t=function(e){function t(t){var i;return(i=e.call(this,t)||this)._instanceProps=s(i.props,(0,Ye.Z)(i)),i._outerRef=void 0,i._resetIsScrollingTimeoutId=null,i.state={instance:(0,Ye.Z)(i),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof i.props.initialScrollOffset?i.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},i._callOnItemsRendered=void 0,i._callOnItemsRendered=Ot((function(e,t,n,r){return i.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:n,visibleStopIndex:r})})),i._callOnScroll=void 0,i._callOnScroll=Ot((function(e,t,n){return i.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:n})})),i._getItemStyle=void 0,i._getItemStyle=function(e){var t,l=i.props,a=l.direction,o=l.itemSize,s=l.layout,u=i._getItemStyleCache(c&&o,c&&s,c&&a);if(u.hasOwnProperty(e))t=u[e];else{var d=n(i.props,e,i._instanceProps),m=r(i.props,e,i._instanceProps),g="horizontal"===a||"horizontal"===s,p="rtl"===a,h=g?d:0;u[e]=t={position:"absolute",left:p?void 0:h,right:p?h:void 0,top:g?0:d,height:g?"100%":m,width:g?m:"100%"}}return t},i._getItemStyleCache=void 0,i._getItemStyleCache=Ot((function(e,t,n){return{}})),i._onScrollHorizontal=function(e){var t=e.currentTarget,n=t.clientWidth,r=t.scrollLeft,l=t.scrollWidth;i.setState((function(e){if(e.scrollOffset===r)return null;var t=i.props.direction,a=r;if("rtl"===t)switch(Rt()){case"negative":a=-r;break;case"positive-descending":a=l-n-r}return a=Math.max(0,Math.min(a,l-n)),{isScrolling:!0,scrollDirection:e.scrollOffset<r?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),i._resetIsScrollingDebounced)},i._onScrollVertical=function(e){var t=e.currentTarget,n=t.clientHeight,r=t.scrollHeight,l=t.scrollTop;i.setState((function(e){if(e.scrollOffset===l)return null;var t=Math.max(0,Math.min(l,r-n));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),i._resetIsScrollingDebounced)},i._outerRefSetter=function(e){var t=i.props.outerRef;i._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},i._resetIsScrollingDebounced=function(){var e,t,n,r;null!==i._resetIsScrollingTimeoutId&&At(i._resetIsScrollingTimeoutId),i._resetIsScrollingTimeoutId=(e=i._resetIsScrolling,t=150,n=Dt(),r={id:requestAnimationFrame((function i(){Dt()-n>=t?e.call(null):r.id=requestAnimationFrame(i)}))})},i._resetIsScrolling=function(){i._resetIsScrollingTimeoutId=null,i.setState({isScrolling:!1},(function(){i._getItemStyleCache(-1,null)}))},i}(0,Qe.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return Bt(e,t),u(e),null};var d=t.prototype;return d.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},d.scrollToItem=function(e,t){void 0===t&&(t="auto");var n=this.props,i=n.itemCount,r=n.layout,a=this.state.scrollOffset;e=Math.max(0,Math.min(e,i-1));var o=0;if(this._outerRef){var s=this._outerRef;o="vertical"===r?s.scrollWidth>s.clientWidth?Mt():0:s.scrollHeight>s.clientHeight?Mt():0}this.scrollTo(l(this.props,e,t,a,this._instanceProps,o))},d.componentDidMount=function(){var e=this.props,t=e.direction,n=e.initialScrollOffset,i=e.layout;if("number"==typeof n&&null!=this._outerRef){var r=this._outerRef;"horizontal"===t||"horizontal"===i?r.scrollLeft=n:r.scrollTop=n}this._callPropsCallbacks()},d.componentDidUpdate=function(){var e=this.props,t=e.direction,n=e.layout,i=this.state,r=i.scrollOffset;if(i.scrollUpdateWasRequested&&null!=this._outerRef){var l=this._outerRef;if("horizontal"===t||"horizontal"===n)if("rtl"===t)switch(Rt()){case"negative":l.scrollLeft=-r;break;case"positive-ascending":l.scrollLeft=r;break;default:var a=l.clientWidth,o=l.scrollWidth;l.scrollLeft=o-a-r}else l.scrollLeft=r;else l.scrollTop=r}this._callPropsCallbacks()},d.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&At(this._resetIsScrollingTimeoutId)},d.render=function(){var e=this.props,t=e.children,n=e.className,r=e.direction,l=e.height,a=e.innerRef,o=e.innerElementType,s=e.innerTagName,c=e.itemCount,u=e.itemData,d=e.itemKey,m=void 0===d?Lt:d,g=e.layout,p=e.outerElementType,h=e.outerTagName,f=e.style,b=e.useIsScrolling,v=e.width,E=this.state.isScrolling,y="horizontal"===r||"horizontal"===g,C=y?this._onScrollHorizontal:this._onScrollVertical,S=this._getRangeToRender(),I=S[0],w=S[1],F=[];if(c>0)for(var k=I;k<=w;k++)F.push((0,Pt.createElement)(t,{data:u,key:m(k,u),index:k,isScrolling:b?E:void 0,style:this._getItemStyle(k)}));var x=i(this.props,this._instanceProps);return(0,Pt.createElement)(p||h||"div",{className:n,onScroll:C,ref:this._outerRefSetter,style:(0,Ke.Z)({position:"relative",height:l,width:v,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:r},f)},(0,Pt.createElement)(o||s||"div",{children:F,ref:a,style:{height:y?"100%":x,pointerEvents:E?"none":void 0,width:y?x:"100%"}}))},d._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],n=e[1],i=e[2],r=e[3];this._callOnItemsRendered(t,n,i,r)}if("function"==typeof this.props.onScroll){var l=this.state,a=l.scrollDirection,o=l.scrollOffset,s=l.scrollUpdateWasRequested;this._callOnScroll(a,o,s)}},d._getRangeToRender=function(){var e=this.props,t=e.itemCount,n=e.overscanCount,i=this.state,r=i.isScrolling,l=i.scrollDirection,s=i.scrollOffset;if(0===t)return[0,0,0,0];var c=a(this.props,s,this._instanceProps),u=o(this.props,c,s,this._instanceProps),d=r&&"backward"!==l?1:Math.max(1,n),m=r&&"forward"!==l?1:Math.max(1,n);return[Math.max(0,c-d),Math.max(0,Math.min(t-1,u+m)),c,u]},t}(Pt.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var Bt=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},Vt=function(e,t,n){var i=e.itemSize,r=n.itemMetadataMap,l=n.lastMeasuredIndex;if(t>l){var a=0;if(l>=0){var o=r[l];a=o.offset+o.size}for(var s=l+1;s<=t;s++){var c=i(s);r[s]={offset:a,size:c},a+=c}n.lastMeasuredIndex=t}return r[t]},Ht=function(e,t,n,i,r){for(;i<=n;){var l=i+Math.floor((n-i)/2),a=Vt(e,l,t).offset;if(a===r)return l;a<r?i=l+1:a>r&&(n=l-1)}return i>0?i-1:0},jt=function(e,t){var n=e.itemCount,i=t.itemMetadataMap,r=t.estimatedItemSize,l=t.lastMeasuredIndex,a=0;if(l>=n&&(l=n-1),l>=0){var o=i[l];a=o.offset+o.size}return a+(n-l-1)*r},Zt=_t({getItemOffset:function(e,t,n){return Vt(e,t,n).offset},getItemSize:function(e,t,n){return n.itemMetadataMap[t].size},getEstimatedTotalSize:jt,getOffsetForIndexAndAlignment:function(e,t,n,i,r,l){var a=e.direction,o=e.height,s=e.layout,c=e.width,u="horizontal"===a||"horizontal"===s?c:o,d=Vt(e,t,r),m=jt(e,r),g=Math.max(0,Math.min(m-u,d.offset)),p=Math.max(0,d.offset-u+d.size+l);switch("smart"===n&&(n=i>=p-u&&i<=g+u?"auto":"center"),n){case"start":return g;case"end":return p;case"center":return Math.round(p+(g-p)/2);default:return i>=p&&i<=g?i:i<p?p:g}},getStartIndexForOffset:function(e,t,n){return function(e,t,n){var i=t.itemMetadataMap,r=t.lastMeasuredIndex;return(r>0?i[r].offset:0)>=n?Ht(e,t,r,0,n):function(e,t,n,i){for(var r=e.itemCount,l=1;n<r&&Vt(e,n,t).offset<i;)n+=l,l*=2;return Ht(e,t,Math.min(n,r-1),Math.floor(n/2),i)}(e,t,Math.max(0,r),n)}(e,n,t)},getStopIndexForStartIndex:function(e,t,n,i){for(var r=e.direction,l=e.height,a=e.itemCount,o=e.layout,s=e.width,c="horizontal"===r||"horizontal"===o?s:l,u=Vt(e,t,i),d=n+c,m=u.offset+u.size,g=t;g<a-1&&m<d;)g++,m+=Vt(e,g,i).size;return g},initInstanceProps:function(e,t){var n={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,i){void 0===i&&(i=!0),n.lastMeasuredIndex=Math.min(n.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),i&&t.forceUpdate()},n},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}}),qt=n(96026);const Wt=e=>{var{isFocused:t,isSelected:n,className:i,children:r}=e,l=(0,$.__rest)(e,["isFocused","isSelected","className","children"]);return W.createElement("div",Object.assign({className:te("gd-list-item","gd-select-option",n&&"gd-select-option-is-selected",t&&"gd-select-option-is-focused s-select-item-focused",i)},l),r)},Gt=e=>{var{children:t,className:n}=e,i=(0,$.__rest)(e,["children","className"]);return W.createElement("div",Object.assign({className:te("gd-select-heading gd-list-item gd-list-item-header",n)},i),t)},zt=e=>{var{className:t}=e,n=(0,$.__rest)(e,["className"]);return W.createElement("hr",Object.assign({className:te("gd-separator-generic",t)},n))},Ut=e=>{var{className:t}=e,n=(0,$.__rest)(e,["className"]);return W.createElement("div",Object.assign({className:te("gd-select-separator",t)},n),W.createElement(zt,null))},$t={option:32,heading:22,error:22,separator:1},Kt=e=>t=>{const n=e[t].type;return $t[n]},Yt=e=>Math.floor(e.length/2);class Qt extends W.Component{constructor(){super(...arguments),this.listRef=W.createRef(),this.scrollToIndex=(e=this.props.highlightedIndex)=>{if(this.listRef.current){const{items:t}=this.props,n=Ft(t)[null!==e?e:Yt(Ft(t))],i=t.indexOf(n);this.listRef.current.scrollToItem(i,"center")}},this.scrollToTop=()=>{this.listRef.current&&this.listRef.current.scrollTo(0)},this.componentDidUpdate=e=>{const{highlightedIndex:t,items:n,setHighlightedIndex:i,inputValue:r}=this.props,l=Ft(e.items).length-1,a=Ft(n).length-1,o=0===e.highlightedIndex&&t===a,s=e.highlightedIndex===l&&0===t,c=""===r.trim(),u=""!==e.inputValue.trim()&&c,d=e.inputValue.trim()!==r.trim(),m=Yt(Ft(n));u?i(m):d&&i(0);const g=1===this.props.items.length;u?this.scrollToIndex(m):o||s?this.scrollToIndex():g&&this.scrollToTop()}}render(){const{items:e,selectedItem:t,highlightedIndex:n,getItemProps:i,getMenuProps:r,className:l,optionClassName:a,visibleItemsRange:o}=this.props,s=(({items:e,selectedItem:t,highlightedIndex:n,getItemProps:i,optionClassName:r})=>function({index:l,style:a}){const o=Ft(e),s=e[l];return"option"===s.type?W.createElement(Wt,Object.assign({},i({key:`${s.type}-${s.value}`,item:s,index:o.indexOf(s),isSelected:!(!t||!s)&&t.value===s.value,className:r}),{isFocused:!(!o[n]||!s)&&o[n].value===s.value,style:a}),s.label):"heading"===s.type||"error"===s.type?W.createElement(Gt,{key:`${s.type}-${s.label}`,style:a},s.label):"separator"===s.type?W.createElement(Ut,{key:`${s.type}-${l}`,style:a}):null})({items:e,selectedItem:t,highlightedIndex:n,getItemProps:i,optionClassName:a}),c=Yt(Ft(e)),u=qt(Math.max(c-o,0),Math.min(c+o+1,e.length)).reduce(((t,n)=>t+Kt(e)(n)),0);return W.createElement("div",Object.assign({},r({className:te("gd-select-menu-wrapper",l)})),W.createElement("div",{className:"gd-select-menu s-select-menu"},W.createElement(Zt,{className:"List",ref:this.listRef,itemCount:e.length,itemSize:Kt(e),height:u,width:"100%",overscanCount:10,estimatedItemSize:$t.option,style:1===e.length?{overflow:"hidden"}:void 0},s)))}componentDidMount(){if(this.props.inputValue)this.scrollToIndex();else{const e=Yt(Ft(this.props.items));this.props.setHighlightedIndex(e),this.scrollToIndex(e)}}}Qt.defaultProps={selectedItem:null,visibleItemsRange:3};const Jt="GDC.time.date",Xt={inputCategory:"Empty"},en={inputCategory:"TooBig"},tn={"GDC.time.minute":120,"GDC.time.hour":48,[Jt]:365,"GDC.time.week_us":104,"GDC.time.month":60,"GDC.time.quarter":20,"GDC.time.year":20},nn=(e,t,n)=>{const r=i[t],l=e<0?"history":0===e?"today":"future";return{type:"option",value:e,label:n.formatMessage(v[`${r}_${l}`],{offset:e,n:Math.abs(e)})}},rn=(e,t,n)=>e.map((e=>nn(e,t,n))),ln=(e,t,n,i)=>{const r=e.toLowerCase(),l=((e,t,n)=>{const i=[-1,0,1],r=Math.abs(e),l=void 0!==e&&r>1?[-r,...i,r]:i;return rn(l,t,n)})(t,n,i).filter((e=>e.label.toLowerCase().includes(r)));return l.length>0?l:(e=>[{type:"error",label:e.formatMessage({id:"filters.floatingRange.noMatch"})}])(i)},an=(e,t)=>Ft(e).find((e=>e.value===t));function on(e="",t=Jt,n){const i=(e=>null==e?void 0:e.trim())(e),r=(e=>{if(!e)return Xt;const t=/^[^-\d]*(-?\d+)(?:\s|$)/.exec(e);if(t){const i=t[1],r=Number.parseInt(i,10);return n=r,Math.abs(n)<=99999?{offset:r,isOnlyNumber:i===e,inputCategory:"Numeric"}:en}var n;return{inputCategory:"Textual",trimmedValue:e}})(i);switch(r.inputCategory){case"Empty":return((e,t)=>{const n=tn[e],i=rn(qt(-n,0),e,t),r=rn(qt(1,n+1),e,t);return[...i,{type:"separator"},nn(0,e,t),{type:"separator"},...r]})(t,n);case"TooBig":return(e=>[{type:"error",label:e.formatMessage({id:"filters.floatingRange.tooBig"},{limit:99999})}])(n);case"Textual":return ln(r.trimmedValue,void 0,t,n);case"Numeric":{const{offset:e,isOnlyNumber:l}=r;return l?((e,t,n)=>rn(e>0?[e,-e]:[e],t,n))(e,t,n):ln(i,e,t,n)}}}const sn=(0,Q.b)(It);class cn extends W.Component{constructor(e){super(e),this.inputRef=W.createRef(),this.onChange=e=>{e&&this.props.onChange(e.value)},this.componentDidUpdate=e=>{var t;if(e.value!==this.props.value){const e=this.props.getItems(this.props.value.toString()),n=(null===(t=an(e,this.props.value))||void 0===t?void 0:t.label)||this.props.value.toString();this.setState({inputValue:n})}},this.focus=()=>{this.inputRef.current&&this.inputRef.current.focus()},this.blur=()=>{this.inputRef.current&&this.inputRef.current.blur()},this.onInputValueChanged=e=>{e!==this.state.inputValue&&this.setState({inputValue:e})},this.onBlurHandler=(e,t,n)=>{const{customValueValidator:i,value:r}=this.props;i?(n(),this.onInputValueChanged(null==r?void 0:r.toString())):(t(e),this.onInputValueChanged(e?e.label:""))},this.onChangeHandler=(e,t)=>{const{customValueValidator:n}=this.props,i=e.target.value;(null==n?void 0:n(i))&&t({type:"option",value:Number(i),label:i}),this.onInputValueChanged(i)};const t=void 0!==e.value?an(e.getItems(e.value.toString()),e.value):null;this.state={inputValue:t?wt(t):e.value?e.value.toString():""}}render(){const{initialIsOpen:e,placeholder:t,getItems:n,value:i=null,className:r,style:l,optionClassName:a,visibleItemsRange:o}=this.props,s=n(this.state.inputValue),c=null!==i?n(i.toString()):[],u=null!==i&&an(c,i)||null,d=Ft(s),m=""!==this.state.inputValue.trim();return W.createElement(sn,{onChange:this.onChange,itemToString:wt,initialIsOpen:e,selectedItem:u,itemCount:d.length,inputValue:this.state.inputValue,defaultHighlightedIndex:u||m?0:Yt(d)},(({getInputProps:e,getMenuProps:n,getItemProps:i,isOpen:c,openMenu:m,closeMenu:g,inputValue:p,highlightedIndex:h,setHighlightedIndex:f,selectItem:b})=>{const v=h>d.length-1?0:h,E={items:s,selectedItem:u,highlightedIndex:v,getItemProps:i,getMenuProps:n,className:"gd-dynamic-select-menu",optionClassName:a,inputValue:p,setHighlightedIndex:f,visibleItemsRange:o};return W.createElement("div",{className:te("gd-dynamic-select",r),style:l},W.createElement("div",{className:"gd-dynamic-select-input-wrapper"},W.createElement("input",Object.assign({type:"text",className:"s-relative-range-input gd-input-field"},e({ref:this.inputRef,placeholder:u?u.label:t,value:p,onFocus:()=>{this.setState({inputValue:""}),m()},onChange:e=>this.onChangeHandler(e,b),onBlur:()=>this.onBlurHandler(u,b,g)})))),c&&s.length>0?W.createElement(Qt,Object.assign({},E)):null)}))}}cn.defaultProps={onChange:U,initialIsOpen:!1,visibleItemsRange:3};class un extends W.Component{constructor(){super(...arguments),this.toFieldRef=W.createRef(),this.isTouchDevice=()=>"ontouchstart"in window||navigator.maxTouchPoints>0,this.focusToField=()=>{const e=this.isTouchDevice();this.toFieldRef.current&&(e?setTimeout((()=>{var e;null===(e=this.toFieldRef.current)||void 0===e||e.focus()}),0):this.toFieldRef.current.focus())},this.blurToField=()=>{const e=this.isTouchDevice();this.toFieldRef.current&&(e?setTimeout((()=>{var e;null===(e=this.toFieldRef.current)||void 0===e||e.blur()}),0):this.toFieldRef.current.blur())},this.handleFromChange=e=>{this.props.onSelectedFilterOptionChange(Object.assign(Object.assign({},this.props.selectedFilterOption),{from:e})),void 0!==e&&this.focusToField()},this.handleToChange=e=>{this.props.onSelectedFilterOptionChange(Object.assign(Object.assign({},this.props.selectedFilterOption),{to:e})),this.blurToField()}}render(){const{handleFromChange:e,handleToChange:t}=this,{selectedFilterOption:n,intl:i,isMobile:r}=this.props,l={visibleItemsRange:r?5:3,optionClassName:"s-relative-date-filter-option s-do-not-close-dropdown-on-click",getItems:e=>{const t=on(e,n.granularity,i);return r?t.filter((e=>"separator"!==e.type)):t}};return W.createElement("div",{className:"gd-relative-range-picker s-relative-range-picker"},W.createElement(cn,Object.assign({value:n.from,onChange:e,placeholder:i.formatMessage({id:"filters.from"}),className:te("gd-relative-range-picker-picker","s-relative-range-picker-from",r&&"gd-relative-range-picker-picker-mobile")},l)),W.createElement("span",{className:"gd-relative-range-picker-dash"},"–"),W.createElement(cn,Object.assign({value:n.to,onChange:t,placeholder:i.formatMessage({id:"filters.to"}),className:te("gd-relative-range-picker-picker","s-relative-range-picker-to",r&&"gd-relative-range-picker-picker-mobile")},l,{ref:this.toFieldRef})))}}const dn=(0,ie.ZP)(un),mn=({selectedFilterOption:e,availableGranularities:t,onSelectedFilterOptionChange:n,isMobile:i})=>W.createElement(W.Fragment,null,W.createElement(Ue,{availableGranularities:t,selectedGranularity:e.granularity,onSelectedGranularityChange:t=>n(Object.assign(Object.assign(Object.assign({},e),e.granularity!==t&&{from:void 0,to:void 0}),{granularity:t}))}),W.createElement(dn,{selectedFilterOption:e,onSelectedFilterOptionChange:n,key:e.granularity,isMobile:i}));var gn=n(21804);const pn=e=>{var{children:t,className:n}=e,i=(0,$.__rest)(e,["children","className"]);return W.createElement("div",Object.assign({className:te("gd-list-item gd-list-item-header gd-filter-list-heading",n)},i),t)},hn=({granularity:e})=>{const t=v[e]||null;return t?W.createElement(ee.Z,{id:t.id}):null},fn=["GDC.time.year","GDC.time.quarter","GDC.time.month","GDC.time.week_us","GDC.time.date","GDC.time.hour","GDC.time.minute"],bn=({dateFormat:e,filterOption:t,selectedFilterOption:n,onSelectedFilterOptionChange:i,className:r})=>{const l=fn.filter((e=>{var n;return Boolean((null===(n=null==t?void 0:t[e])||void 0===n?void 0:n.length)>0)})).map((e=>({granularity:e,items:t[e]})));return W.createElement(W.Fragment,null,l.map((t=>W.createElement(W.Fragment,{key:t.granularity},W.createElement(pn,{className:r},W.createElement(hn,{granularity:t.granularity})),t.items.map((t=>W.createElement(oe,{key:t.localIdentifier,isSelected:t.localIdentifier===n.localIdentifier,onClick:()=>i(t),className:te(`s-relative-preset-${gn(t.localIdentifier)}`,r)},W.createElement(re,{filter:t,dateFormat:e}))))))))},vn=()=>W.createElement("div",{className:"s-extended-date-filter-edit-mode-message gd-extended-date-filter-edit-mode-message"},W.createElement("div",{className:"gd-extended-date-filter-edit-mode-message-text"},W.createElement(ee.Z,{id:"dateFilterDropdown.setDefault",values:{nbsp:W.createElement(W.Fragment,null," ")}})),W.createElement("hr",{className:"gd-separator-generic"})),En=e=>{var{children:t,changeRoute:n}=e,i=(0,$.__rest)(e,["children","changeRoute"]);return W.createElement("button",Object.assign({className:"gd-extended-date-filter-header s-do-not-close-dropdown-on-click",onClick:e=>{e.preventDefault(),n(null)}},i),W.createElement("span",{className:"gd-icon-navigateleft"})," ",t)},yn=(0,ie.ZP)((e=>W.createElement(J.Button,{type:"button",value:e.intl.formatMessage({id:e.messageId}),className:e.className,disabled:e.disabled,onClick:e.onClick}))),Cn=({filterOptions:e,dateFormat:t,selectedFilterOption:n,onSelectedFilterOptionChange:i,className:r})=>W.createElement(W.Fragment,null,e.map((e=>W.createElement(oe,{key:e.localIdentifier,isSelected:e.localIdentifier===n.localIdentifier,onClick:()=>i(e),className:te(`s-absolute-preset-${gn(e.localIdentifier)}`,r)},W.createElement(re,{filter:e,dateFormat:t}))))),Sn="gd-date-filter-item-mobile";class In extends W.Component{constructor(){super(...arguments),this.state={route:null},this.changeRoute=(e=null)=>{this.setState({route:e})},this.renderAllTime=()=>{const{filterOptions:e,isMobile:t,selectedFilterOption:n,onSelectedFilterOptionChange:i}=this.props;return e.allTime?W.createElement(me,{filterOption:e.allTime,selectedFilterOption:n,onSelectedFilterOptionChange:i,className:t?Sn:void 0}):null},this.renderAbsoluteForm=()=>{const{dateFormat:e,filterOptions:t,selectedFilterOption:n,onSelectedFilterOptionChange:i,isTimeForAbsoluteRangeEnabled:r,isMobile:l,errors:a,weekStart:o}=this.props;if(!t.absoluteForm)return null;const{route:s}=this.state,c=t.absoluteForm.localIdentifier===n.localIdentifier,u="absoluteForm"===s;return W.createElement(W.Fragment,null,l&&u?null:W.createElement(oe,{isSelected:c,onClick:()=>{this.changeRoute("absoluteForm"),(0,g.isAbsoluteDateFilterForm)(n)||i(t.absoluteForm)},className:te("s-absolute-form","s-do-not-close-dropdown-on-click",l&&Sn)},t.absoluteForm.name?t.absoluteForm.name:W.createElement(ee.Z,{id:"filters.staticPeriod"})),!c||l&&!u?null:W.createElement(ge,{isMobile:l},W.createElement(je,{dateFormat:e,errors:(null==a?void 0:a.absoluteForm)||void 0,onSelectedFilterOptionChange:i,selectedFilterOption:n,isMobile:l,isTimeEnabled:r,weekStart:o})))},this.renderRelativeForm=()=>{const{filterOptions:e,selectedFilterOption:t,onSelectedFilterOptionChange:n,availableGranularities:i,isMobile:r}=this.props;if(!e.relativeForm)return null;const{route:l}=this.state,a=e.relativeForm.localIdentifier===t.localIdentifier,o="relativeForm"===l;return W.createElement(W.Fragment,null,r&&o?null:W.createElement(oe,{isSelected:a,onClick:()=>{this.changeRoute("relativeForm"),(0,g.isRelativeDateFilterForm)(t)||n(e.relativeForm)},className:te("s-relative-form","s-do-not-close-dropdown-on-click",r&&Sn)},e.relativeForm.name?e.relativeForm.name:W.createElement(ee.Z,{id:"filters.floatingRange"}),r?null:W.createElement(Ze,{bubbleAlignPoints:[{align:"cr cl"}]},W.createElement(ee.Z,{id:"filters.floatingRange.tooltip"}))),!a||r&&!o?null:W.createElement(ge,{isMobile:r},W.createElement(mn,{onSelectedFilterOptionChange:e=>{n(e)},selectedFilterOption:t,availableGranularities:i,isMobile:r})))},this.renderAbsolutePreset=()=>{const{dateFormat:e,filterOptions:t,selectedFilterOption:n,onSelectedFilterOptionChange:i,isMobile:r}=this.props;return t.absolutePreset&&t.absolutePreset.length>0?W.createElement(Cn,{dateFormat:e,filterOptions:t.absolutePreset,selectedFilterOption:n,onSelectedFilterOptionChange:i,className:r?Sn:void 0}):null},this.renderRelativePreset=()=>{const{dateFormat:e,filterOptions:t,selectedFilterOption:n,onSelectedFilterOptionChange:i,isMobile:r}=this.props;return t.relativePreset?W.createElement(bn,{dateFormat:e,filterOption:t.relativePreset,selectedFilterOption:n,onSelectedFilterOptionChange:i,className:r?Sn:void 0}):null},this.renderExcludeCurrent=()=>{const{selectedFilterOption:e,onExcludeCurrentPeriodChange:t,excludeCurrentPeriod:n,isExcludeCurrentPeriodEnabled:i}=this.props;return W.createElement(ue,{value:n,onChange:t,disabled:!i,granularity:(r=e,w(r)||(0,g.isRelativeDateFilterPreset)(r)?r.granularity:void 0)});var r},this.calculateHeight=e=>{if(window.innerHeight<=414){const t=e?30:0;return window.innerHeight-t-53-8}}}componentDidMount(){this.props.isMobile&&((0,g.isAbsoluteDateFilterForm)(this.props.selectedFilterOption)?this.changeRoute("absoluteForm"):(0,g.isRelativeDateFilterForm)(this.props.selectedFilterOption)&&this.changeRoute("relativeForm"))}render(){const{isExcludeCurrentPeriodEnabled:e,isMobile:t,isEditMode:n,onApplyClick:i,onCancelClick:r,closeDropdown:l,selectedFilterOption:a,dateFilterButton:o,errors:s}=this.props,{route:c}=this.state,u=!t||e,d=this.calculateHeight(u);let m={},p={};return d&&(m={display:"block",height:`${d}px`},p={minHeight:`${d}px`}),W.createElement("div",{className:"gd-extended-date-filter-container"},W.createElement("div",{className:te("gd-extended-date-filter-body","s-extended-date-filters-body",t&&"gd-extended-date-filter-body-mobile")},null===c&&t?W.createElement("div",{onClick:()=>{r(),l()}},o):null,W.createElement("div",{className:te("gd-extended-date-filter-body-wrapper",{"gd-extended-date-filter-body-wrapper-wide":(0,g.isRelativeDateFilterForm)(a)}),style:m},n&&!t?W.createElement(vn,null):null,t?this.renderMobileContent():W.createElement(de,{className:"gd-extended-date-filter-body-scrollable",style:p},this.renderDefaultContent())),u?this.renderExcludeCurrent():null,W.createElement("div",{className:te("gd-extended-date-filter-actions")},W.createElement("div",{className:"gd-extended-date-filter-actions-buttons"},W.createElement(yn,{messageId:"cancel",className:"gd-button-secondary gd-button-small s-date-filter-cancel",onClick:()=>{r(),l()}}),W.createElement(yn,{messageId:"apply",className:"gd-button-action gd-button-small s-date-filter-apply",disabled:!I(s),onClick:()=>{i(),l()}})))))}renderMobileContent(){const{route:e}=this.state;return"absoluteForm"===e?W.createElement(W.Fragment,null,W.createElement(En,{changeRoute:this.changeRoute},W.createElement(ee.Z,{id:"filters.staticPeriod"})),this.renderAbsoluteForm()):"relativeForm"===e?I(this.props.availableGranularities)?null:W.createElement(W.Fragment,null,W.createElement(En,{changeRoute:this.changeRoute},W.createElement(ee.Z,{id:"filters.floatingRange"})),this.renderRelativeForm()):this.renderDefaultContent()}renderDefaultContent(){return W.createElement(W.Fragment,null,this.renderAllTime(),this.renderAbsoluteForm(),I(this.props.availableGranularities)?null:this.renderRelativeForm(),this.renderAbsolutePreset(),this.renderRelativePreset())}}const wn=(0,Q.b)(Y),Fn=(e,t=!1)=>t?e+s:e,kn=e=>{var{originalSelectedFilterOption:t,originalExcludeCurrentPeriod:n,onDropdownOpenChanged:i,customFilterName:r,dateFormat:l,disabled:a,locale:o,filterOptions:s,isTimeForAbsoluteRangeEnabled:c,weekStart:u}=e,m=(0,$.__rest)(e,["originalSelectedFilterOption","originalExcludeCurrentPeriod","onDropdownOpenChanged","customFilterName","dateFormat","disabled","locale","filterOptions","isTimeForAbsoluteRangeEnabled","weekStart"]);const g=(e=>{try{return M(new Date,e),e}catch(t){return console.warn(`Unsupported date format ${e}, the default format ${d} is used instead.`),d}})(l),p=(0,W.useMemo)((()=>K(D,N)(s)),[s]);return W.createElement(R.IntlWrapper,{locale:o||"en-US"},W.createElement(wn,{query:X},(e=>{const l=(i=!1)=>W.createElement(le,{disabled:a,isMobile:e,isOpen:i,dateFilterOption:C(t,n),dateFormat:Fn(g,c),customFilterName:r});return W.createElement(J.Dropdown,{closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,alignPoints:[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-50}}],onOpenStateChanged:i,renderButton:({isOpen:e,toggleDropdown:t})=>W.createElement("span",{onClick:a?U:t},l(e)),ignoreClicksOnByClass:[".s-do-not-close-dropdown-on-click",".rdp-day"],renderBody:({closeDropdown:t})=>W.createElement(In,Object.assign({},m,{filterOptions:p,isMobile:e,closeDropdown:t,dateFilterButton:l(),dateFormat:g,isTimeForAbsoluteRangeEnabled:c,weekStart:u}))})})))};class xn extends W.PureComponent{static getDerivedStateFromProps(e,t){return G(e.selectedFilterOption,t.initSelectedFilterOption)&&e.excludeCurrentPeriod===t.initExcludeCurrentPeriod?null:xn.getStateFromProps(e)}static getStateFromProps(e){const t=S(e.selectedFilterOption);return{initSelectedFilterOption:e.selectedFilterOption,selectedFilterOption:e.selectedFilterOption,initExcludeCurrentPeriod:e.excludeCurrentPeriod,excludeCurrentPeriod:!!t&&e.excludeCurrentPeriod,isTimeForAbsoluteRangeEnabled:e.isTimeForAbsoluteRangeEnabled,isExcludeCurrentPeriodEnabled:t}}constructor(e){super(e),this.handleApplyClick=()=>{const e=(t=this.state.selectedFilterOption,w(t)&&t.from>t.to?Object.assign(Object.assign({},t),{from:t.to,to:t.from}):t);var t;this.props.onApply(e,this.state.excludeCurrentPeriod)},this.onChangesDiscarded=()=>{this.setState((()=>xn.getStateFromProps(this.props)))},this.onCancelClicked=()=>{this.props.onCancel(),this.onChangesDiscarded()},this.onDropdownOpenChanged=e=>{e?this.props.onOpen():(this.props.onClose(),this.onChangesDiscarded())},this.handleExcludeCurrentPeriodChange=e=>{this.setState({excludeCurrentPeriod:e})},this.handleSelectedFilterOptionChange=e=>{this.setState((t=>xn.getStateFromSelectedOption(e,t.excludeCurrentPeriod)))},this.state=xn.getStateFromProps(e)}componentDidMount(){xn.checkInitialFilterOption(this.props.selectedFilterOption)}render(){const{customFilterName:e,dateFilterMode:t,dateFormat:n,filterOptions:i,selectedFilterOption:r,excludeCurrentPeriod:l,availableGranularities:a,isEditMode:o,locale:s,isTimeForAbsoluteRangeEnabled:c,weekStart:u}=this.props,{excludeCurrentPeriod:d,selectedFilterOption:m,isExcludeCurrentPeriodEnabled:g}=this.state;return"hidden"===t?null:W.createElement(kn,{availableGranularities:a,customFilterName:e,dateFormat:n,disabled:"readonly"===t,excludeCurrentPeriod:d,originalExcludeCurrentPeriod:l,isExcludeCurrentPeriodEnabled:g,isTimeForAbsoluteRangeEnabled:c,isEditMode:o,filterOptions:i,selectedFilterOption:m,originalSelectedFilterOption:r,locale:s,onApplyClick:this.handleApplyClick,onCancelClick:this.onCancelClicked,onDropdownOpenChanged:this.onDropdownOpenChanged,onExcludeCurrentPeriodChange:this.handleExcludeCurrentPeriodChange,onSelectedFilterOptionChange:this.handleSelectedFilterOptionChange,errors:y(m),weekStart:u})}}xn.defaultProps={dateFormat:d,isEditMode:!1,isTimeForAbsoluteRangeEnabled:!1,locale:"en-US",onCancel:U,onOpen:U,onClose:U,weekStart:"Sunday"},xn.getStateFromSelectedOption=(e,t)=>{const n=S(e);return{selectedFilterOption:e,excludeCurrentPeriod:!!n&&t,isExcludeCurrentPeriodEnabled:n}},xn.checkInitialFilterOption=e=>{(0,g.isAbsoluteDateFilterForm)(e)&&(z(e.from)||z(e.to))&&console.warn("The default filter option is not valid. Values 'from' and 'to' from absoluteForm filter option must be specified."),w(e)&&(z(e.from)||z(e.to))&&console.warn("The default filter option is not valid. Values 'from' and 'to' from relativeForm filter option must be specified.")};var On=n(56541);const Pn=e=>v[e].id,Dn=e=>({ALL:"all",GREATER_THAN:"greater-than",GREATER_THAN_OR_EQUAL_TO:"greater-than-equal-to",LESS_THAN:"less-than",LESS_THAN_OR_EQUAL_TO:"less-than-equal-to",EQUAL_TO:"equal-to",NOT_EQUAL_TO:"not-equal-to",BETWEEN:"between",NOT_BETWEEN:"not-between"}[e]);class An extends W.PureComponent{constructor(){super(...arguments),this.handleOnClick=e=>{const{operator:t,onClick:n}=this.props;n(t),e.preventDefault()}}render(){const{intl:e,operator:t,selectedOperator:n,bubbleText:i}=this.props,r=te("gd-list-item","gd-list-item-shortened",`s-mvf-operator-${On.gl(t)}`,{"is-selected":n===t}),l=e.formatMessage({id:Pn(t)});return W.createElement("div",{className:r,onClick:this.handleOnClick},W.createElement("div",{className:`gd-icon-${Dn(t)}`,title:l}),W.createElement("span",{title:l},T(l)),i?this.renderBubble(i):null)}renderBubble(e){return W.createElement("div",{className:"tooltip-bubble"},W.createElement(J.BubbleHoverTrigger,{tagName:"div",showDelay:400,hideDelay:200},W.createElement("div",{className:"inlineBubbleHelp"}),W.createElement(J.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}]},e)))}}An.defaultProps={onClick:U,bubbleText:null};const Nn=(0,ie.ZP)(An);class Mn extends W.PureComponent{render(){const{onSelect:e,onClose:t,selectedOperator:n,alignTo:i,intl:r}=this.props;return W.createElement(J.Overlay,{closeOnOutsideClick:!0,alignTo:i,alignPoints:[{align:"bl tl"}],onClose:t},W.createElement("div",{className:"gd-dropdown overlay"},W.createElement("div",{className:"gd-mvf-operator-dropdown-body s-mvf-operator-dropdown-body"},W.createElement(Nn,{operator:"ALL",selectedOperator:n,onClick:e}),W.createElement(J.Separator,null),W.createElement(Nn,{operator:"GREATER_THAN",selectedOperator:n,onClick:e}),W.createElement(Nn,{operator:"GREATER_THAN_OR_EQUAL_TO",selectedOperator:n,onClick:e}),W.createElement(J.Separator,null),W.createElement(Nn,{operator:"LESS_THAN",selectedOperator:n,onClick:e}),W.createElement(Nn,{operator:"LESS_THAN_OR_EQUAL_TO",selectedOperator:n,onClick:e}),W.createElement(J.Separator,null),W.createElement(Nn,{operator:"BETWEEN",selectedOperator:n,onClick:e,bubbleText:r.formatMessage({id:"mvf.operator.between.tooltip.bubble"})}),W.createElement(Nn,{operator:"NOT_BETWEEN",selectedOperator:n,onClick:e,bubbleText:r.formatMessage({id:"mvf.operator.notBetween.tooltip.bubble"})}),W.createElement(J.Separator,null),W.createElement(Nn,{operator:"EQUAL_TO",selectedOperator:n,onClick:e}),W.createElement(Nn,{operator:"NOT_EQUAL_TO",selectedOperator:n,onClick:e}))))}}const Tn=(0,ie.ZP)(Mn);class Rn extends W.PureComponent{constructor(){super(...arguments),this.state={opened:!1},this.handleOperatorSelected=e=>{this.closeOperatorDropdown(),this.props.onSelect(e)},this.closeOperatorDropdown=()=>this.setState({opened:!1}),this.handleOperatorDropdownButtonClick=()=>this.setState((e=>Object.assign(Object.assign({},e),{opened:!e.opened})))}render(){return W.createElement(W.Fragment,null,this.renderDropdownButton(),this.state.opened?W.createElement(Tn,{alignTo:".gd-mvf-operator-dropdown-button",onSelect:this.handleOperatorSelected,selectedOperator:this.props.operator,onClose:this.closeOperatorDropdown}):null)}renderDropdownButton(){const{intl:e,operator:t,isDisabled:n}=this.props,{opened:i}=this.state,r=T(e.formatMessage({id:Pn(t)})),l=te("gd-mvf-operator-dropdown-button","s-mvf-operator-dropdown-button",`s-mvf-operator-dropdown-button-${On.gl(t)}`,"gd-button-primary","gd-button-small",{"button-dropdown":!0,"is-dropdown-open":i,"is-active":i});return W.createElement(J.Button,{title:r,className:l,value:r,onClick:this.handleOperatorDropdownButtonClick,iconLeft:`gd-icon-${Dn(t)}`,iconRight:i?"gd-icon-navigateup":"gd-icon-navigatedown",disabled:n})}}const Ln=(0,ie.ZP)(Rn),_n=({from:e,to:t,usePercentage:n,disableAutofocus:i,onFromChange:r,onToChange:l,onEnterKeyPress:a,separators:o})=>W.createElement("div",{className:"gd-mvf-range-input"},W.createElement(J.InputWithNumberFormat,{className:"s-mvf-range-from-input",value:e,onChange:r,onEnterKeyPress:a,isSmall:!0,autofocus:!i,suffix:n?"%":"",separators:o}),W.createElement(J.InputWithNumberFormat,{className:"s-mvf-range-to-input",value:t,onChange:l,onEnterKeyPress:a,isSmall:!0,suffix:n?"%":"",separators:o})),Bn=({value:e,usePercentage:t,disableAutofocus:n,onValueChange:i,onEnterKeyPress:r,separators:l})=>W.createElement(J.InputWithNumberFormat,{className:"s-mvf-comparison-value-input",value:e,onEnterKeyPress:r,onChange:i,isSmall:!0,autofocus:!n,suffix:t?"%":"",separators:l}),Vn=({checked:e=!1,onChange:t,intl:n})=>W.createElement("label",{className:"input-checkbox-label gd-mvf-treat-null-values-as-zero s-treat-null-values-as-zero"},W.createElement("input",{type:"checkbox",name:"treat-null-values-as",className:"input-checkbox",checked:e,onChange:e=>t(e.target.checked)}),W.createElement("span",{className:"input-label-text"},n.formatMessage({id:"mvf.treatNullValuesAsZeroLabel"}),W.createElement(J.BubbleHoverTrigger,{showDelay:400,hideDelay:200},W.createElement("span",{className:"inlineBubbleHelp"}),W.createElement(J.Bubble,{className:"bubble-primary",alignPoints:[{align:"tc bl"}]},n.formatMessage({id:"mvf.treatNullValuesAsZeroTooltip"})))));function Hn(e){return!I(e)&&!!e.severity}const jn=({warningMessage:e,className:t})=>{const n=te("gd-mvf-warning-message",(e=>{if("string"==typeof e)return"gd-mvf-warning-message-low s-mvf-warning-message-low";switch(e.severity){case"low":return"gd-mvf-warning-message-low s-mvf-warning-message-low";case"medium":return"gd-mvf-warning-message-medium s-mvf-warning-message-medium";case"high":return"gd-mvf-warning-message-high s-mvf-warning-message-high"}})(e),t,"s-mvf-warning-message");return W.createElement("div",{className:n},Hn(e)?e.text:e)},Zn=6;class qn extends W.PureComponent{constructor(e){super(e),this.renderInputSection=()=>{const{usePercentage:e,disableAutofocus:t,separators:n}=this.props,{operator:i,value:{value:r=null,from:l=null,to:a=null}}=this.state;return(0,g.isComparisonConditionOperator)(i)?W.createElement(Bn,{value:r,usePercentage:e,onValueChange:this.handleValueChange,onEnterKeyPress:this.onApply,disableAutofocus:t,separators:n}):(0,g.isRangeConditionOperator)(i)?W.createElement(_n,{from:l,to:a,usePercentage:e,onFromChange:this.handleFromChange,onToChange:this.handleToChange,onEnterKeyPress:this.onApply,disableAutofocus:t,separators:n}):null},this.isChanged=()=>this.state.operator!==this.props.operator||this.state.enabledTreatNullValuesAsZero!==this.props.treatNullAsZeroValue,this.isApplyButtonDisabled=()=>{const{operator:e}=this.state;return(0,g.isComparisonConditionOperator)(e)?this.isApplyButtonDisabledForComparison():(0,g.isRangeConditionOperator)(e)?this.isApplyButtonDisabledForRange():this.isApplyButtonDisabledForAll()},this.handleOperatorSelection=e=>this.setState({operator:e}),this.handleValueChange=e=>{this.setState({value:Object.assign(Object.assign({},this.state.value),{value:e})})},this.handleFromChange=e=>{this.setState({value:Object.assign(Object.assign({},this.state.value),{from:e})})},this.handleToChange=e=>{this.setState({value:Object.assign(Object.assign({},this.state.value),{to:e})})},this.handleTreatNullAsZeroClicked=e=>{this.setState({enabledTreatNullValuesAsZero:e})},this.trimToPrecision=e=>{const{valuePrecision:t=Zn}=this.props;return e?parseFloat(e.toFixed(t)):e},this.fromPercentToDecimal=e=>e?e/100:e,this.fromDecimalToPercent=e=>e?100*e:e,this.convertToRawValue=(e,t)=>e?(0,g.isComparisonConditionOperator)(t)?{value:this.trimToPrecision(this.fromPercentToDecimal(e.value))}:{from:this.trimToPrecision(this.fromPercentToDecimal(e.from)),to:this.trimToPrecision(this.fromPercentToDecimal(e.to))}:e,this.convertToPercentageValue=(e,t)=>e?(0,g.isComparisonConditionOperator)(t)?{value:this.trimToPrecision(this.fromDecimalToPercent(e.value))}:{from:this.trimToPrecision(this.fromDecimalToPercent(e.from)),to:this.trimToPrecision(this.fromDecimalToPercent(e.to))}:e,this.onApply=()=>{if(this.isApplyButtonDisabled())return;const{enabledTreatNullValuesAsZero:e,operator:t,value:n}=this.state,{usePercentage:i}=this.props,r="ALL"===t?null:t,l=i?this.convertToRawValue(n,t):n;this.props.onApply(r,l,e)};const{operator:t,value:n,usePercentage:i,treatNullAsZeroValue:r}=e;this.state={operator:t||"ALL",value:(i?this.convertToPercentageValue(n,t):n)||{},enabledTreatNullValuesAsZero:r}}render(){const{onCancel:e,warningMessage:t,displayTreatNullAsZeroOption:n,enableOperatorSelection:i,intl:r}=this.props,{operator:l,enabledTreatNullValuesAsZero:a}=this.state;return W.createElement("div",{className:"gd-mvf-dropdown-body gd-dialog gd-dropdown overlay s-mvf-dropdown-body"},W.createElement("div",{className:"gd-mvf-dropdown-content"},t?W.createElement("div",{className:"gd-mvf-dropdown-section"},W.createElement(jn,{warningMessage:t})):null,W.createElement("div",{className:"gd-mvf-dropdown-section"},W.createElement(Ln,{onSelect:this.handleOperatorSelection,operator:l,isDisabled:!i})),"ALL"!==l?W.createElement("div",{className:"gd-mvf-dropdown-section"},this.renderInputSection()," ",n?W.createElement(Vn,{onChange:this.handleTreatNullAsZeroClicked,checked:a,intl:r}):null):null),W.createElement("div",{className:"gd-mvf-dropdown-footer"},W.createElement(J.Button,{className:"gd-button-secondary gd-button-small s-mvf-dropdown-cancel",onClick:e,value:r.formatMessage({id:"cancel"})}),W.createElement(J.Button,{className:"gd-button-action gd-button-small s-mvf-dropdown-apply",onClick:this.onApply,value:r.formatMessage({id:"apply"}),disabled:this.isApplyButtonDisabled()})))}isApplyButtonDisabledForComparison(){const{value:e=null}=this.state.value;return null===e||null!==this.props.value&&!this.isChanged()&&(this.props.usePercentage?this.trimToPrecision(this.fromPercentToDecimal(e))===this.props.value.value:e===this.props.value.value)}isApplyButtonDisabledForRange(){const{from:e=null,to:t=null}=this.state.value;return null===e||null===t||null!==this.props.value&&!this.isChanged()&&(this.props.usePercentage?this.trimToPrecision(this.fromPercentToDecimal(e))===this.props.value.from&&this.trimToPrecision(this.fromPercentToDecimal(t))===this.props.value.to:e===this.props.value.from&&t===this.props.value.to)}isApplyButtonDisabledForAll(){return"ALL"===this.props.operator}}const Wn=(0,ie.ZP)(qn);class Gn extends W.PureComponent{render(){return W.createElement(R.IntlWrapper,{locale:this.props.locale},W.createElement(Wn,Object.assign({},this.props)))}}const zn=["bl tl","tl bl","br tr","tr br"].map((e=>({align:e,offset:{x:1,y:0}})));class Un extends W.PureComponent{constructor(){super(...arguments),this.onApply=(e,t,n)=>{this.props.onApply(e,t,n)}}render(){const{operator:e,value:t,usePercentage:n,warningMessage:i,locale:r,onCancel:l,anchorEl:a,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroValue:c,enableOperatorSelection:u}=this.props,d=null!==e?e:"ALL";return W.createElement(J.Overlay,{alignTo:a,alignPoints:zn,closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,onClose:l},W.createElement(Gn,{operator:d,value:t,usePercentage:n,warningMessage:i,locale:r,onCancel:l,onApply:this.onApply,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroValue:c,enableOperatorSelection:u}))}}Un.defaultProps={value:{},operator:"ALL",displayTreatNullAsZeroOption:!1,treatNullAsZeroValue:!1};const $n=(0,ie.ZP)(Un);class Kn extends W.PureComponent{render(){return W.createElement(R.IntlWrapper,{locale:this.props.locale},W.createElement($n,Object.assign({},this.props)))}}const Yn=e=>{if(!e)return{};const t=(0,g.measureValueFilterCondition)(e);return t?(0,g.isRangeCondition)(t)?{from:t.range.from,to:t.range.to}:{value:t.comparison.value}:{}},Qn=(e,t)=>{if(!e||!(0,g.measureValueFilterCondition)(e))return void 0!==t&&t;const n=(0,g.measureValueFilterCondition)(e);return(0,g.isComparisonCondition)(n)&&void 0!==n.comparison.treatNullValuesAs||(0,g.isRangeCondition)(n)&&void 0!==n.range.treatNullValuesAs||!1};class Jn extends W.PureComponent{constructor(){super(...arguments),this.onApply=(e,t,n)=>{var i,r,l;const{filter:a,measureIdentifier:o,onApply:s}=this.props;null===e||"ALL"===e?s(null):(0,g.isRangeConditionOperator)(e)?s((0,g.newMeasureValueFilter)({localIdentifier:o}||a.measureValueFilter.measure,e,null!==(i=t.from)&&void 0!==i?i:0,null!==(r=t.to)&&void 0!==r?r:0,n?0:void 0)):s((0,g.newMeasureValueFilter)({localIdentifier:o}||a.measureValueFilter.measure,e,null!==(l=t.value)&&void 0!==l?l:0,n?0:void 0))}}render(){const{filter:e,onCancel:t,usePercentage:n,warningMessage:i,locale:r,anchorEl:l,separators:a,displayTreatNullAsZeroOption:o,treatNullAsZeroDefaultValue:s,enableOperatorSelection:c}=this.props;return W.createElement(Kn,{onApply:this.onApply,onCancel:t,operator:e&&(0,g.measureValueFilterOperator)(e)||null,value:e&&Yn(e)||null,usePercentage:n,warningMessage:i,locale:r,anchorEl:l,separators:a,displayTreatNullAsZeroOption:o,treatNullAsZeroValue:Qn(e,s),enableOperatorSelection:c})}}Jn.defaultProps={displayTreatNullAsZeroOption:!1,treatNullAsZeroDefaultValue:!1,enableOperatorSelection:!0};const Xn=({isActive:e,buttonTitle:t,onClick:n})=>{const i=te("gd-mvf-dropdown-button","s-mvf-dropdown-button","gd-button","gd-button-secondary","button-dropdown","gd-icon-right",{"gd-icon-navigateup":e,"gd-icon-navigatedown":!e});return W.createElement("button",{className:i,onClick:n},t)};class ei extends W.PureComponent{constructor(){super(...arguments),this.state={displayDropdown:!1},this.buttonRef=W.createRef(),this.onApply=e=>{this.closeDropdown(),this.props.onApply(e)},this.onCancel=()=>{this.closeDropdown(),this.props.onCancel()},this.closeDropdown=()=>{this.setState({displayDropdown:!1})},this.toggleDropdown=()=>{this.setState((e=>Object.assign(Object.assign({},e),{displayDropdown:!e.displayDropdown})))}}render(){const{displayDropdown:e}=this.state,{filter:t,measureIdentifier:n,buttonTitle:i,usePercentage:r,warningMessage:l,locale:a,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroDefaultValue:c,enableOperatorSelection:u}=this.props;return W.createElement(W.Fragment,null,W.createElement("div",{ref:this.buttonRef},W.createElement(Xn,{onClick:this.toggleDropdown,isActive:e,buttonTitle:i})),e?W.createElement(Jn,{onApply:this.onApply,onCancel:this.onCancel,filter:t,measureIdentifier:n,usePercentage:r,warningMessage:l,locale:a,separators:o,displayTreatNullAsZeroOption:s,treatNullAsZeroDefaultValue:c,enableOperatorSelection:u,anchorEl:this.buttonRef.current}):null)}}ei.defaultProps={onCancel:U};const ti=({isActive:e,onClick:t,title:n,className:i})=>{const r=te("gd-button","gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":e,"gd-icon-navigatedown":!e},"s-rf-dropdown-button",i);return W.createElement("button",{className:r,onClick:t},n)},ni=({title:e,value:t,isSelected:n,onSelect:i})=>{const r=te("gd-list-item","gd-list-item-shortened",{"is-selected":n},"gd-button-link",`s-rf-operator-${On.gl(e)}`);return W.createElement("button",{className:r,onClick:()=>i(t)},W.createElement("span",null,e))},ii=(0,ie.ZP)((({items:e,selectedValue:t,onSelect:n,onClose:i,intl:r})=>W.createElement(J.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-operator-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:i},W.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-operator-dropdown-body s-rf-operator-dropdown-body"},e.map((({value:e,translationId:i})=>{const l=r.formatMessage({id:i});return W.createElement(ni,{key:e,title:l,value:e,isSelected:e===t,onSelect:n})})))))),ri=[{value:"TOP",translationId:v.top.id},{value:"BOTTOM",translationId:v.bottom.id}],li=(0,ie.ZP)((({selectedValue:e,onSelect:t,intl:n})=>{const[i,r]=(0,W.useState)(!1),l=te("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":i,"gd-icon-navigatedown":!i},"gd-rf-operator-dropdown-button","s-rf-operator-dropdown-button"),a=n.formatMessage({id:(o=e,ri.find((({value:e})=>e===o)).translationId)});var o;return W.createElement(W.Fragment,null,W.createElement(J.Button,{className:l,value:a,onClick:()=>{r(!i)}}),i?W.createElement(ii,{items:ri,selectedValue:e,onSelect:e=>{t(e),r(!1)},onClose:()=>r(!1)}):null)})),ai=[3,5,10,15,20,25,50,100].map((e=>({type:"option",value:e,label:`${e}`}))),oi=e=>/^[^-\d]*(-?\d+)(?:\s|$)/.exec(e),si=e=>e&&oi(e)&&Number(e)>0&&Number(e)<=99999,ci=(0,ie.ZP)((({selectedValue:e,onSelect:t,intl:n})=>W.createElement(cn,{getItems:e=>((e,t)=>{if(!e)return ai;const n=(e=>null==e?void 0:e.trim())(e),i=oi(n);if(i){const e=i[1];return((e,t)=>e<1?[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooSmall"})}]:e>99999?[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooLarge"})}]:ai.filter((t=>t.label.toLowerCase().includes(e.toString()))))(Number.parseInt(e,10),t)}return[{type:"error",label:t.formatMessage({id:"rankingFilter.valueTooSmall"})}]})(e,n),onChange:t,value:e,className:"gd-rf-value-dropdown-button s-rf-value-dropdown-button",optionClassName:"s-rf-value-dropdown-item",customValueValidator:si}))),ui=({item:e,iconClass:t,isSelected:n,onSelect:i,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:a})=>{const{title:o,ref:s}=e,c=a&&!a.enable,u=te("gd-list-item","gd-list-item-shortened",{"is-selected":n,"is-disabled":c},"gd-button-link",t,`s-rf-attribute-${On.gl(o)}`);return c?W.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement(J.Button,{className:u,value:o,title:o,disabled:!0}),W.createElement(J.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-disabled-attribute-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},a.warningMessage)):W.createElement("button",{className:u,onClick:()=>i(s),onMouseOver:()=>{r&&r(s)},onMouseOut:()=>{l&&l()},title:o},W.createElement("span",null,o))},di=({isSelected:e,onSelect:t})=>{const n=te("gd-list-item","gd-list-item-shortened",{"is-selected":e},"gd-button-link","s-rf-attribute-all-records");return W.createElement("button",{className:n,onClick:()=>t()},W.createElement(ee.Z,{id:"rankingFilter.allRecords"}),W.createElement("div",null,W.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement("span",{className:"gd-icon-circle-question gd-rf-attribute-all-records-icon s-rf-attribute-all-records-icon"}),W.createElement(J.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-all-records-bubble",arrowOffsets:{"cr cl":[16,0],"cl cr":[-16,0]},alignPoints:[{align:"cr cl"},{align:"cl cr"}]},W.createElement(ee.Z,{id:"rankingFilter.allRecords.tooltip"})))))},mi=({items:e,selectedItemRef:t,onSelect:n,onClose:i,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:a})=>W.createElement(J.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-attribute-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:i},W.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-attribute-dropdown-body s-rf-attribute-dropdown-body"},e.map((e=>{const{type:i,ref:o}=e;return W.createElement(ui,{key:(0,g.objRefToString)(o),iconClass:"DATE"===i?"gd-icon-date":"gd-icon-attribute",item:e,isSelected:(0,g.areObjRefsEqual)(o,t),onSelect:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,customGranularitySelection:a})})),W.createElement("div",{className:"gd-rf-attribute-dropdown-separator"}),W.createElement(di,{isSelected:!t,onSelect:n}))),gi=(0,ie.ZP)((({items:e,selectedItemRef:t,onSelect:n,onDropDownItemMouseOver:i,onDropDownItemMouseOut:r,customGranularitySelection:l,intl:a})=>{const[o,s]=(0,W.useState)(!1),c=1===e.length,u=te("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":o,"gd-icon-navigatedown":!o},"gd-rf-attribute-dropdown-button","s-rf-attribute-dropdown-button"),d=e.find((e=>(0,g.areObjRefsEqual)(e.ref,t))),m=((e,t)=>e?e.title:t.formatMessage({id:"rankingFilter.allRecords"}))(d,a);return c?W.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement(J.Button,{className:u,value:m,disabled:!0}),W.createElement(J.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-attribute-no-options-bubble",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},W.createElement(ee.Z,{id:"rankingFilter.attributeDropdown.oneAttributeTooltip"}))):W.createElement(W.Fragment,null,W.createElement(J.Button,{className:u,value:m,onClick:()=>{s(!o)},iconLeft:(p=d,p?"DATE"===p.type?"gd-icon-date":"gd-icon-attribute":null)}),o?W.createElement(mi,{items:e,selectedItemRef:t,onSelect:e=>{n(e),s(!1),null==r||r()},onClose:()=>s(!1),onDropDownItemMouseOver:i,onDropDownItemMouseOut:r,customGranularitySelection:l}):null);var p})),pi=({item:e,isSelected:t,onSelect:n,onDropDownItemMouseOver:i,onDropDownItemMouseOut:r,enableRenamingMeasureToMetric:l})=>{const{title:a,ref:o,sequenceNumber:s}=e,c=te("gd-list-item","gd-list-item-shortened",{"is-selected":t},"gd-button-link",l?"gd-icon-metric":"gd-icon-measure",`s-rf-measure-${On.gl(a)}`);return W.createElement("button",{className:c,onClick:()=>n(o),onMouseOver:()=>{i&&i(o)},onMouseOut:()=>{r&&r()},title:a},W.createElement("span",{className:"gd-rf-measure-title"},a),s?W.createElement("span",{className:"gd-rf-sequence-number"},s):null)},hi=({items:e,selectedItemRef:t,onSelect:n,onClose:i,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,enableRenamingMeasureToMetric:a})=>W.createElement(J.Overlay,{closeOnOutsideClick:!0,alignTo:".gd-rf-measure-dropdown-button",alignPoints:[{align:"bl tl"},{align:"tl bl"}],onClose:i},W.createElement("div",{className:"gd-dropdown overlay gd-rf-inner-overlay-dropdown gd-rf-measure-dropdown-body s-rf-measure-dropdown-body"},e.map((e=>{const{ref:i}=e;return W.createElement(pi,{key:(0,g.objRefToString)(i),item:e,isSelected:(0,g.areObjRefsEqual)(i,t),onSelect:n,onDropDownItemMouseOver:r,onDropDownItemMouseOut:l,enableRenamingMeasureToMetric:a})})))),fi=({items:e,selectedItemRef:t,onSelect:n,onDropDownItemMouseOver:i,onDropDownItemMouseOut:r,enableRenamingMeasureToMetric:l})=>{const[a,o]=(0,W.useState)(!1),s=te("gd-button-secondary","gd-button-small","button-dropdown","gd-icon-right",{"gd-icon-navigateup":a,"gd-icon-navigatedown":!a},"gd-rf-measure-dropdown-button","s-rf-measure-dropdown-button"),c=e.find((e=>(0,g.areObjRefsEqual)(e.ref,t))),u=null==c?void 0:c.title;return W.createElement(W.Fragment,null,W.createElement(J.Button,{className:s,value:u,onClick:()=>{o(!a)},iconLeft:l?"gd-icon-metric":"gd-icon-measure"}),a?W.createElement(hi,{items:e,selectedItemRef:t,onSelect:e=>{n(e),o(!1),null==r||r()},onClose:()=>o(!1),onDropDownItemMouseOver:i,onDropDownItemMouseOut:r,enableRenamingMeasureToMetric:l}):null)};var bi=n(72905);const vi=(e,t)=>{switch(e){case"TOP":return t?v.topWithAttr.id:v.topWithoutAttr.id;case"BOTTOM":return t?v.bottomWithAttr.id:v.bottomWithoutAttr.id;default:throw new Error(`Operator '${e}' is not supported!`)}},Ei=({operator:e,value:t,measure:n,attribute:i})=>W.createElement("div",{className:"gd-rf-preview s-rf-preview"},W.createElement(ee.Z,{id:vi(e,i),tagName:"span",values:{measure:n.title,attribute:null==i?void 0:i.title,operator:e,value:t,strong:e=>W.createElement("strong",null,e)}})),yi=(e,t)=>{const n=e.rankingFilter,i=t.rankingFilter,r=n.operator===i.operator,l=n.value===i.value,a=I(bi(n.attributes,i.attributes,G)),o=G(n.measure,i.measure);return r&&l&&a&&o},Ci=({measureItems:e,attributeItems:t,filter:n,onApply:i,onCancel:r,onDropDownItemMouseOver:l,onDropDownItemMouseOut:a,customGranularitySelection:o,intl:s,enableRenamingMeasureToMetric:c})=>{var u;const d=n.rankingFilter,[m,p]=(0,W.useState)(d.value),[h,f]=(0,W.useState)(d.operator),[b,v]=(0,W.useState)(d.measure),[E,y]=(0,W.useState)(null===(u=d.attributes)||void 0===u?void 0:u[0]),C=e.find((e=>(0,g.areObjRefsEqual)(e.ref,b))),S=t.find((e=>(0,g.areObjRefsEqual)(e.ref,E))),I=(0,W.useCallback)((()=>E?(0,g.newRankingFilter)(b,[E],h,m):(0,g.newRankingFilter)(b,h,m)),[b,E,h,m]);return W.createElement("div",{className:"gd-dialog gd-dropdown overlay gd-rf-dropdown-body s-rf-dropdown-body"},W.createElement("div",{className:"gd-rf-dropdown-header"},W.createElement(ee.Z,{id:"rankingFilter.topBottom"})),W.createElement("div",{className:"gd-rf-dropdown-section"},W.createElement("div",{className:"gd-rf-value-section"},W.createElement(li,{selectedValue:h,onSelect:f}),W.createElement(ci,{selectedValue:m,onSelect:p}),W.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement("span",{className:"gd-icon-circle-question gd-rf-value-tooltip-icon s-rf-value-tooltip-icon"}),W.createElement(J.Bubble,{className:"bubble-primary gd-rf-tooltip-bubble s-rf-value-tooltip",alignPoints:[{align:"cr cl"},{align:"cl cr"}]},W.createElement(ee.Z,{id:"rankingFilter.valueTooltip"})))),W.createElement("div",{className:"gd-rf-dropdown-section-title"},W.createElement(ee.Z,{id:"rankingFilter.outOf"})),W.createElement(gi,{items:t,selectedItemRef:E,onSelect:y,onDropDownItemMouseOver:l,onDropDownItemMouseOut:a,customGranularitySelection:o}),W.createElement("div",{className:"gd-rf-dropdown-section-title"},W.createElement(ee.Z,{id:"rankingFilter.basedOn"})),W.createElement(fi,{items:e,selectedItemRef:b,onSelect:v,onDropDownItemMouseOver:l,onDropDownItemMouseOut:a,enableRenamingMeasureToMetric:c}),W.createElement("div",{className:"gd-rf-dropdown-section-title"},W.createElement(ee.Z,{id:"rankingFilter.preview"})),W.createElement(Ei,{measure:C,attribute:S,operator:h,value:m})),W.createElement("div",{className:"gd-rf-dropdown-footer"},W.createElement(J.Button,{className:"gd-button-secondary gd-button-small s-rf-dropdown-cancel",onClick:()=>r(),value:s.formatMessage({id:"cancel"})}),W.createElement(J.Button,{className:"gd-button-action gd-button-small s-rf-dropdown-apply",onClick:()=>{const e=I();i(e)},value:s.formatMessage({id:"apply"}),disabled:yi(n,I())})))};Ci.defaultProps={onCancel:U};const Si=(0,ie.ZP)(Ci),Ii=["bl tl","tl bl","br tr","tr br"].map((e=>({align:e,offset:{x:1,y:0}}))),wi=({measureItems:e,attributeItems:t,filter:n,onApply:i,onCancel:r,anchorEl:l,onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,enableRenamingMeasureToMetric:c})=>{const[u,d]=(0,W.useState)((e=>{const{measure:t,attributes:n,operator:i,value:r}=e.rankingFilter,l=null==n?void 0:n[0],a=l?{attributes:[l]}:{};return{rankingFilter:Object.assign({operator:i,value:r,measure:t},a)}})(n));return W.createElement(J.Overlay,{closeOnOutsideClick:!0,closeOnParentScroll:!0,closeOnMouseDrag:!0,alignTo:l,alignPoints:Ii,onClose:r,ignoreClicksOnByClass:[".gd-rf-inner-overlay-dropdown"]},W.createElement(Si,{measureItems:e,attributeItems:t,filter:u,onApply:e=>{d(e),i(e)},onCancel:r,onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,enableRenamingMeasureToMetric:c}))};wi.defaultProps={onCancel:U};const Fi=(0,ie.ZP)(wi),ki=e=>W.createElement(R.IntlWrapper,{locale:e.locale},W.createElement(Fi,Object.assign({},e))),xi=({measureItems:e,attributeItems:t,filter:n,onApply:i,onCancel:r,buttonTitle:l,onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,locale:c,enableRenamingMeasureToMetric:u})=>{const[d,m]=(0,W.useState)(!1);return W.createElement(W.Fragment,null,W.createElement(ti,{isActive:d,onClick:()=>{m(!d)},title:l,className:"gd-rf-dropdown-button"}),d?W.createElement(ki,{measureItems:e,attributeItems:t,filter:n,onApply:e=>{i(e),m(!1)},onCancel:()=>{r(),m(!1)},anchorEl:".gd-rf-dropdown-button",onDropDownItemMouseOver:a,onDropDownItemMouseOut:o,customGranularitySelection:s,locale:c,enableRenamingMeasureToMetric:u}):null)};xi.defaultProps={onCancel:U};var Oi=n(44586),Pi=n(47591),Di=n(39693),Ai=n(24268),Ni=n(30797),Mi=n(6557);const Ti={init:Mi,initStart:e=>{e.initialization.status="loading"},initSuccess:e=>{e.initialization.status="success"},initError:(e,t)=>{e.initialization.status="error",e.initialization.error=t.payload.error},initCancel:e=>{e.initialization.status="canceled"}},Ri={loadAttributeRequest:Mi,loadAttributeStart:e=>{e.attribute.status="loading",e.attribute.error=void 0,e.attribute.data=void 0},loadAttributeSuccess:(e,t)=>{e.attribute.status="success",e.attribute.data=t.payload.attribute},loadAttributeError:(e,t)=>{e.attribute.status="error",e.attribute.error=t.payload.error},loadAttributeCancelRequest:Mi,loadAttributeCancel:e=>{e.attribute.status="canceled"}},Li=e=>e,_i=(e,t)=>"uris"===e.elementsForm?t.uri:t.title,Bi=e=>e.elementsForm,Vi={loadCustomElementsRequest:Mi,loadCustomElementsStart:Mi,loadCustomElementsSuccess:(e,t)=>{t.payload.elements.forEach((t=>{const n=_i(e,t);e.elements.cache[n]||(e.elements.cache[n]=t)}))},loadCustomElementsError:Mi,loadCustomElementsCancelRequest:Mi,loadCustomElementsCancel:Mi},Hi={loadInitialElementsPageRequest:Mi,loadInitialElementsPageStart:e=>{e.elements.initialPageLoad.status="loading",e.elements.initialPageLoad.error=void 0,e.elements.currentOptions.offset=0,e.elements.lastLoadedOptions.offset=0,e.elements.data=[]},loadInitialElementsPageSuccess:(e,t)=>{e.elements.initialPageLoad.status="success",e.elements.totalCountWithCurrentSettings=t.payload.totalCount,t.payload.elements.forEach((t=>{const n=_i(e,t);e.elements.cache[n]||(e.elements.cache[n]=t)})),e.elements.data=t.payload.elements.map((t=>_i(e,t))),e.elements.lastLoadedOptions=t.payload.options},loadInitialElementsPageError:(e,t)=>{e.elements.initialPageLoad.status="error",e.elements.initialPageLoad.error=t.payload.error},loadInitialElementsPageCancelRequest:Mi,loadInitialElementsPageCancel:e=>{e.attribute.status="canceled"}},ji={loadNextElementsPageRequest:Mi,loadNextElementsPageStart:e=>{e.elements.nextPageLoad.status="loading",e.elements.nextPageLoad.error=void 0},loadNextElementsPageSuccess:(e,t)=>{e.elements.nextPageLoad.status="success",t.payload.elements.forEach((t=>{const n=_i(e,t);e.elements.cache[n]||(e.elements.cache[n]=t)})),e.elements.data=e.elements.data.concat(t.payload.elements.map((t=>_i(e,t)))),e.elements.lastLoadedOptions=t.payload.options},loadNextElementsPageError:(e,t)=>{e.elements.nextPageLoad.status="error",e.elements.nextPageLoad.error=t.payload.error},loadNextElementsPageCancelRequest:Mi,loadNextElementsPageCancel:e=>{e.elements.nextPageLoad.status="canceled"}};var Zi=n(20573);const qi=(0,Zi.createSelector)(Li,(e=>e.selection.working.keys)),Wi=(0,Zi.createSelector)(Li,(e=>e.selection.working.isInverted)),Gi=(0,Zi.createSelector)(Li,(e=>e.selection.commited.keys)),zi=(0,Zi.createSelector)(Li,(e=>e.selection.commited.isInverted)),Ui=(0,Zi.createSelector)(qi,Wi,((e,t)=>({keys:e,isInverted:t}))),$i=(0,Zi.createSelector)(Gi,zi,((e,t)=>({keys:e,isInverted:t}))),Ki=(0,Zi.createSelector)(Wi,qi,zi,Gi,((e,t,n,i)=>e!==n||!G([...i].sort(),[...t].sort()))),Yi=(0,Zi.createSelector)(qi,I),Qi={changeSelection:(e,t)=>{e.selection.working.keys=t.payload.selection,z(t.payload.isInverted)||(e.selection.working.isInverted=t.payload.isInverted)},revertSelection:e=>{const t=Gi(e),n=zi(e);e.selection.working.keys=t,e.selection.working.isInverted=n},commitSelection:e=>{const t=qi(e),n=Wi(e);e.selection.commited.keys=t,e.selection.commited.isInverted=n},invertSelection:e=>{const t=Wi(e);e.selection.working.isInverted=!t},clearSelection:e=>{e.selection.working.keys=[]}},Ji=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ti),Ri),Hi),ji),Vi),Qi),{setElementsTotalCount:(e,t)=>{e.elements.totalCount=t.payload.totalCount},setElementsTotalCountWithCurrentSettings:(e,t)=>{e.elements.totalCountWithCurrentSettings=t.payload.totalCount},setOffset:(e,t)=>{e.elements.currentOptions.offset=t.payload.offset},setLimit:(e,t)=>{e.elements.currentOptions.limit=t.payload.limit},setSearch:(e,t)=>{e.elements.currentOptions.search=t.payload.search},setOrder:(e,t)=>{e.elements.currentOptions.order=t.payload.order},setLimitingAttributeFilters:(e,t)=>{e.elements.currentOptions.limitingAttributeFilters=t.payload.filters},setLimitingMeasures:(e,t)=>{e.elements.currentOptions.limitingMeasures=t.payload.filters},setLimitingDateFilters:(e,t)=>{e.elements.currentOptions.limitingDateFilters=t.payload.filters},setLimitingAttributeFiltersAttributes:(e,t)=>{e.elements.limitingAttributeFiltersAttributes=t.payload.attributes}}),Xi={initialization:{status:"pending"},attribute:{status:"pending"},elements:{cache:{},currentOptions:{offset:0,limit:500,search:"",limitingAttributeFilters:[],limitingDateFilters:[],limitingMeasures:[]},initialPageLoad:{status:"pending"},nextPageLoad:{status:"pending"},limitingAttributeFiltersAttributes:[],lastLoadedOptions:{}},config:{},selection:{commited:{},working:{}}},er=(0,Ai.oM)({name:"attributeFilterSlice",initialState:Xi,reducers:Ji}),tr=er.reducer,nr=er.actions;var ir=n(34857);function*rr(){return yield(0,ir.fw)("attributeFilterContext")}var lr=n(91966),ar=n(93386);const or=(0,Zi.createSelector)(Li,(e=>e.elementsForm)),sr=(0,Zi.createSelector)(Li,(e=>{var t;return null!==(t=e.config.hiddenElements)&&void 0!==t?t:[]})),cr=(0,Zi.createSelector)(or,sr,((e,t)=>"uris"===e?{uris:t}:{values:t})),ur=(0,Zi.createSelector)(Li,(e=>e.displayFormRef)),dr=(0,Zi.createSelector)(or,Gi,((e,t)=>"uris"===e?{uris:t}:{values:t})),mr=(0,Zi.createSelector)(or,Gi,zi,sr,((e,t,n,i)=>{const r=n?ar(t,i):lr(t,i);return"uris"===e?{uris:r}:{values:r}})),gr=(0,Zi.createSelector)(ur,zi,mr,((e,t,n)=>t?(0,g.newNegativeAttributeFilter)(e,n):(0,g.newPositiveAttributeFilter)(e,n)));async function pr(e,t){return e.backend.workspace(e.workspace).attributes().getAttributeByDisplayForm(t).catch((e=>{throw(0,R.convertError)(e)}))}function*hr(){yield(0,ir.Fm)([nr.loadAttributeRequest.match,nr.loadAttributeCancelRequest.match],fr)}function*fr(e){if(nr.loadAttributeCancelRequest.match(e))return;const{payload:{correlation:t}}=e;try{const e=yield(0,ir.Ys)(ur),n=yield(0,ir.RE)(rr);yield(0,ir.gz)(nr.loadAttributeStart({correlation:t}));const i=yield(0,ir.RE)(pr,n,e);return yield(0,ir.gz)(nr.loadAttributeSuccess({attribute:i,correlation:t})),i}catch(e){yield(0,ir.gz)(nr.loadAttributeError({error:e,correlation:t}))}finally{(yield(0,ir.By)())&&(yield(0,ir.gz)(nr.loadAttributeCancel({correlation:t})))}}var br=n(57557);const vr=(0,Zi.createSelector)(Li,(e=>e.attribute.data)),Er=(0,Zi.createSelector)(Li,(e=>e.attribute.status)),yr=(0,Zi.createSelector)(Li,(e=>e.attribute.error)),Cr=(e,t)=>Di(e.map((e=>t[e]))),Sr=(0,Zi.createSelector)(Li,(e=>{var t;return null!==(t=e.elements.data)&&void 0!==t?t:[]})),Ir=(0,Zi.createSelector)(Li,(e=>e.elements.cache)),wr=(0,Zi.createSelector)(Sr,Ir,Cr),Fr=(0,Zi.createSelector)(Li,(e=>e.elements.totalCount)),kr=(0,Zi.createSelector)(Li,(e=>e.elements.totalCountWithCurrentSettings)),xr=(0,Zi.createSelector)(Li,(e=>{var t;return null!==(t=e.config.staticElements)&&void 0!==t?t:[]})),Or=(0,Zi.createSelector)(Li,(e=>e.elements.currentOptions.search)),Pr=(0,Zi.createSelector)(Li,(e=>e.elements.currentOptions.order)),Dr=(0,Zi.createSelector)(Li,(e=>e.elements.currentOptions.limit)),Ar=(0,Zi.createSelector)(Li,(e=>{var t,n,i;return null!==(i=null===(n=null===(t=e.elements)||void 0===t?void 0:t.lastLoadedOptions)||void 0===n?void 0:n.offset)&&void 0!==i?i:e.elements.currentOptions.offset})),Nr=(0,Zi.createSelector)(Li,(e=>e.elements.currentOptions.limitingAttributeFilters)),Mr=(0,Zi.createSelector)(Li,(e=>e.elements.currentOptions.limitingMeasures)),Tr=(0,Zi.createSelector)(Li,(e=>e.elements.currentOptions.limitingDateFilters)),Rr=(0,Zi.createSelector)(Ar,Dr,Pr,Or,Nr,Mr,Tr,((e,t,n,i,r,l,a)=>({limit:t,limitingAttributeFilters:r,limitingDateFilters:a,limitingMeasures:l,offset:e,order:n,search:i}))),Lr=(0,Zi.createSelector)(Li,(e=>e.elements.lastLoadedOptions)),_r=(0,Zi.createSelector)(Li,(e=>e.elements.limitingAttributeFiltersAttributes));var Br=n(40146);class Vr{constructor(e,t=50,n=0){this.allItems=e,(0,Pi.kG)(n>=0,`paging offset must be non-negative, got: ${n}`),(0,Pi.kG)(t>0,`limit must be a positive number, got: ${t}`),this.items=e.slice(n,n+t),this.offset=Math.min(n,e.length),this.limit=t,this.totalCount=e.length}async next(){return 0===this.items.length?this:new Vr(this.allItems,this.limit,this.offset+this.items.length)}async goTo(e){return 0===this.items.length?this:new Vr(this.allItems,this.limit,e*this.items.length)}async all(){return[...this.allItems]}async allSorted(e){return[...this.allItems].sort(e)}}const Hr=e=>t=>(0,g.attributeElementsIsEmpty)(e)?t:(0,g.isAttributeElementsByRef)(e)?t.filter((t=>!e.uris.includes(t.uri))):t.filter((t=>!e.values.includes(t.title))),jr=e=>t=>{if(!e)return t;if((0,Br.isElementsQueryOptionsElementsByPrimaryDisplayFormValue)(e))throw new Br.NotImplemented("Elements by primary display form value are not supported yet");return(0,Br.isElementsQueryOptionsElementsByValue)(e)?t.filter((t=>e.values.includes(t.title))):t.filter((t=>e.uris.includes(t.uri)))},Zr=e=>t=>e?t.filter((t=>t.title.toLowerCase().includes(e.toLowerCase()))):t;const qr=e=>!!e.capabilities.supportsElementUris;async function Wr(e,t,n,i){return(null==i?void 0:i.length)?async function(e,t,n){let i=K(Hr(t.hiddenElements),jr(e.elements),Zr(e.search))(n);return"desc"===e.order&&(i=[...i].reverse()),new Vr(i,e.limit,e.offset)}(t,n,i):async function(e,t,n){const{backend:i,workspace:r}=e,{displayFormRef:l,elements:a,limit:o,limitingAttributeFilters:s,limitingDateFilters:c,limitingMeasures:u,offset:d,search:m,order:p,includeTotalCountWithoutFilters:h,excludePrimaryLabel:f=!0,signal:b}=t,v=I(s)&&I(c)&&I(u)&&!m&&!f&&!p&&0===d;if(qr(i)&&(0,Br.isElementsQueryOptionsElementsByValue)(a)&&v){const e=await async function(e,t,n,i,r){const l=i.values,a=[(0,g.newPositiveAttributeFilter)(n,l)];(0,g.attributeElementsIsEmpty)(r.hiddenElements)||a.push((0,g.newNegativeAttributeFilter)(n,r.hiddenElements));const o=await e.workspace(t).execution().forItems([(0,g.newAttribute)(n)],a).execute().catch((e=>{throw(0,R.convertError)(e)})),s=await o.readAll().catch((e=>{throw(0,R.convertError)(e)})),c=R.DataViewFacade.for(s),[u]=c.meta().attributeHeaders();return u.map((([e])=>({title:e.attributeHeaderItem.name,uri:e.attributeHeaderItem.uri})))}(i,r,l,a,n);return new Vr(e,o,d)}let E=i.workspace(r).attributes().elements().forDisplayForm(l);const y={};o&&(E=E.withLimit(o)),d&&(E=E.withOffset(d)),m&&(y.filter=m),f&&!qr(i)&&(y.excludePrimaryLabel=!0),a&&(y.elements=qr(i)||(0,Br.isValueBasedElementsQueryOptionsElements)(a)?a:{primaryValues:a.uris}),p&&(y.order=p),h&&(y.includeTotalCountWithoutFilters=h),I(y)||(E=E.withOptions(y)),(null==c?void 0:c.length)&&(E=E.withDateFilters(c));const C=function(e,t,n,i){return(0,g.attributeElementsIsEmpty)(n)?null!=t?t:[]:[{attributeFilter:(0,g.newNegativeAttributeFilter)(e,n),overAttribute:i.ref},...null!=t?t:[]]}(l,s,n.hiddenElements,n.attribute);return C.length&&(E=E.withAttributeFilters(C)),(null==u?void 0:u.length)&&(E=E.withMeasures(u)),b&&E.withSignal(b),E.query().catch((e=>{throw(0,R.convertError)(e)}))}(e,t,n)}function*Gr(e){const t=yield(0,ir.RE)(rr),n=yield(0,ir.Ys)(cr),i=yield(0,ir.Ys)(vr),r=yield(0,ir.Ys)(ur),l=yield(0,ir.Ys)(xr),a=yield(0,ir.RE)(Wr,t,Object.assign({displayFormRef:r},e),{hiddenElements:n,attribute:i},l);return{elements:a.items,totalCount:a.totalCount,options:br(e,"signal")}}async function zr(e,t){const n=t.map((e=>(0,g.filterObjRef)(e.attributeFilter)));return Promise.all(n.map((t=>e.backend.workspace(e.workspace).attributes().getAttributeByDisplayForm(t)))).catch((e=>{throw(0,R.convertError)(e)}))}function*Ur(){yield(0,ir.Fm)([nr.loadInitialElementsPageRequest.match,nr.loadInitialElementsPageCancelRequest.match],$r)}function*$r(e){var t;if(nr.loadInitialElementsPageCancelRequest.match(e))return;const n=yield(0,ir.RE)(rr),i=new AbortController,{payload:{correlation:r}}=e;try{yield(0,ir.gz)(nr.loadInitialElementsPageStart({correlation:r}));const e=yield(0,ir.Ys)(Rr),l=yield(0,ir.Ys)(Bi),a=Object.assign(Object.assign({},e),{signal:i.signal,excludePrimaryLabel:!n.backend.capabilities.supportsElementUris&&"values"===l}),o=yield(0,ir.RE)(Gr,a),s=yield(0,ir.RE)(zr,n,null!==(t=e.limitingAttributeFilters)&&void 0!==t?t:[]);yield(0,ir.gz)(nr.setLimitingAttributeFiltersAttributes({attributes:s})),yield(0,ir.gz)(nr.loadInitialElementsPageSuccess(Object.assign(Object.assign({},o),{correlation:r})))}catch(e){yield(0,ir.gz)(nr.loadInitialElementsPageError({error:e,correlation:r}))}finally{(yield(0,ir.By)())&&(i.abort(),yield(0,ir.gz)(nr.loadInitialElementsPageCancel({correlation:r})))}}const Kr=(0,Zi.createSelector)(Li,(e=>e.elements.nextPageLoad.status)),Yr=(0,Zi.createSelector)(Li,(e=>e.elements.nextPageLoad.error)),Qr=(0,Zi.createSelector)(Lr,(e=>Object.assign(Object.assign({},e),{offset:e.offset+e.limit}))),Jr=(0,Zi.createSelector)(Lr,kr,((e,t)=>e.offset+e.limit<t)),Xr=(0,Zi.createSelector)(Rr,Lr,((e,t)=>!G(br(e,"offset","excludePrimaryLabel"),br(t,"offset","excludePrimaryLabel"))));function*el(){yield(0,ir.Fm)([nr.loadNextElementsPageRequest.match,nr.loadNextElementsPageCancelRequest.match,nr.loadInitialElementsPageRequest.match],tl)}function*tl(e){const t=yield(0,ir.RE)(rr);if(nr.loadNextElementsPageCancelRequest.match(e)||nr.loadInitialElementsPageRequest.match(e))return;const{payload:{correlation:n}}=e;if(yield(0,ir.Ys)(Jr))try{yield(0,ir.gz)(nr.loadNextElementsPageStart({correlation:n}));const e=yield(0,ir.Ys)(Qr),i=yield(0,ir.Ys)(Bi),r=Object.assign(Object.assign({},e),{excludePrimaryLabel:!t.backend.capabilities.supportsElementUris&&"values"===i}),l=yield(0,ir.RE)(Gr,r);yield(0,ir.gz)(nr.loadNextElementsPageSuccess(Object.assign(Object.assign({},l),{correlation:n})))}catch(e){yield(0,ir.gz)(nr.loadNextElementsPageError({error:e,correlation:n}))}finally{(yield(0,ir.By)())&&(yield(0,ir.gz)(nr.loadNextElementsPageCancel({correlation:n})))}}function*nl(){yield(0,ir.ib)([nr.loadCustomElementsRequest.match],il)}function*il(e){const{payload:{correlation:t,options:n}}=e;try{yield(0,ir.gz)(nr.loadCustomElementsStart({correlation:t}));const{result:e,canceled:i,anotherRequest:r}=yield(0,ir.S3)({result:(0,ir.RE)(Gr,n),anotherRequest:(0,ir.qn)((e=>nr.loadCustomElementsRequest.match(e)&&(!t||e.payload.correlation===t))),canceled:(0,ir.qn)((e=>nr.loadCustomElementsCancelRequest.match(e)&&(!t||e.payload.correlation===t)))});if(e)return yield(0,ir.gz)(nr.loadCustomElementsSuccess(Object.assign(Object.assign({},e),{correlation:t}))),e;(i||r)&&(yield(0,ir.gz)(nr.loadCustomElementsCancel({correlation:t})))}catch(e){yield(0,ir.gz)(nr.loadCustomElementsError({error:e,correlation:t}))}finally{(yield(0,ir.By)())&&(yield(0,ir.gz)(nr.loadCustomElementsCancel({correlation:t})))}}function*rl(e){yield(0,ir.rM)(fr,nr.loadAttributeRequest({correlation:e}));const{error:t}=yield(0,ir.S3)({success:(0,ir.qn)((t=>nr.loadAttributeSuccess.match(t)&&t.payload.correlation===e)),error:(0,ir.qn)((t=>nr.loadAttributeError.match(t)&&t.payload.correlation===e)),cancel:(0,ir.qn)((t=>nr.loadAttributeCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*ll(e){const t=yield(0,ir.Ys)(dr),n=yield(0,ir.RE)(rr),i=yield(0,ir.Ys)(Bi);if(0===((0,g.isAttributeElementsByRef)(t)?t.uris:t.values).length)return;const r=`initSelection_${e}`;yield(0,ir.rM)(il,nr.loadCustomElementsRequest({options:{elements:t,offset:0,limit:550,search:void 0,excludePrimaryLabel:!n.backend.capabilities.supportsElementUris&&"values"===i},correlation:r}));const{error:l}=yield(0,ir.S3)({success:(0,ir.qn)((e=>nr.loadCustomElementsSuccess.match(e)&&e.payload.correlation===r)),error:(0,ir.qn)((e=>nr.loadCustomElementsError.match(e)&&e.payload.correlation===r)),cancel:(0,ir.qn)((e=>nr.loadCustomElementsCancel.match(e)&&e.payload.correlation===r))});if(l)throw l.payload.error}function*al(e){yield(0,ir.rM)($r,nr.loadInitialElementsPageRequest({correlation:e}));const{error:t}=yield(0,ir.S3)({success:(0,ir.qn)((t=>nr.loadInitialElementsPageSuccess.match(t)&&t.payload.correlation===e)),error:(0,ir.qn)((t=>nr.loadInitialElementsPageError.match(t)&&t.payload.correlation===e)),cancel:(0,ir.qn)((t=>nr.loadInitialElementsPageCancel.match(t)&&t.payload.correlation===e))});if(t)throw t.payload.error}function*ol(e){const t=`initTotalCount_${e}`,n=yield(0,ir.RE)(rr),i=yield(0,ir.Ys)(Bi);yield(0,ir.rM)(il,nr.loadCustomElementsRequest({options:{limit:1,includeTotalCountWithoutFilters:!0,excludePrimaryLabel:!n.backend.capabilities.supportsElementUris&&"values"===i},correlation:t}));const{success:r,error:l}=yield(0,ir.S3)({success:(0,ir.qn)((e=>nr.loadCustomElementsSuccess.match(e)&&e.payload.correlation===t)),error:(0,ir.qn)((e=>nr.loadCustomElementsError.match(e)&&e.payload.correlation===t)),cancel:(0,ir.qn)((e=>nr.loadCustomElementsCancel.match(e)&&e.payload.correlation===t))});if(l)throw l.payload.error;r&&(yield(0,ir.gz)(nr.setElementsTotalCount({totalCount:r.payload.totalCount})))}function sl(e){return I(e)||e.every((e=>!!(0,g.isNegativeAttributeFilter)(e.attributeFilter)&&(0,g.attributeElementsIsEmpty)((0,g.filterAttributeElements)(e.attributeFilter))))}function*cl(){yield(0,ir.Fm)(nr.init.match,ul)}function*ul(e){const{payload:{correlation:t}}=e;try{yield(0,ir.gz)(nr.initStart({correlation:t}));const e=yield(0,ir.Ys)(sr),n=!sl(yield(0,ir.Ys)(Nr)),i=[ll,al];(null==e?void 0:e.length)>0?yield(0,ir.RE)(rl,t):i.unshift(rl),n&&i.push(ol),yield(0,ir.$6)(i.map((e=>(0,ir.RE)(e,t)))),yield(0,ir.gz)(nr.initSuccess({correlation:t}))}catch(e){yield(0,ir.gz)(nr.initError({error:e,correlation:t}))}finally{(yield(0,ir.By)())&&(yield(0,ir.$6)([(0,ir.gz)(nr.initCancel({correlation:t}))]))}}function*dl(){try{yield(0,ir.$6)([hr,Ur,el,nl,cl].map((e=>(0,ir.rM)(e))))}catch(e){console.error("Root saga failed",e)}}const ml=[nr.loadAttributeError.type,nr.loadInitialElementsPageError.type,nr.loadNextElementsPageError.type,nr.loadCustomElementsError.type,nr.initError.type],gl=(0,Q.b)(Ni.ZP),pl=(0,Zi.createSelector)(Li,(e=>e.initialization.status)),hl=(0,Zi.createSelector)(Li,(e=>e.initialization.error)),fl=(0,Zi.createSelector)(Li,(e=>e.elements.initialPageLoad.status)),bl=(0,Zi.createSelector)(Li,(e=>e.elements.initialPageLoad.error));function vl(e,t){const n=t.getCause(),i=n?`\nInner error: ${n}`:"";console.error(`Error while ${e}: ${t.getMessage()}${i}`)}function El(){let e=[];return{invoke:t=>{e.forEach((e=>e(t)))},subscribe:t=>(e.push(t),function(){e=e.filter((e=>e!=t))})}}class yl{constructor(e){this.initializeBridge=()=>{this.callbacks=(()=>{const{registerCallback:e,registrations:t,unsubscribeAll:n}=(()=>{const e=[];return{registrations:{initStart:El(),initSuccess:El(),initError:El(),initCancel:El(),loadAttributeStart:El(),loadAttributeSuccess:El(),loadAttributeError:El(),loadAttributeCancel:El(),loadInitialElementsPageStart:El(),loadInitialElementsPageSuccess:El(),loadInitialElementsPageError:El(),loadInitialElementsPageCancel:El(),loadNextElementsPageStart:El(),loadNextElementsPageSuccess:El(),loadNextElementsPageError:El(),loadNextElementsPageCancel:El(),loadCustomElementsStart:El(),loadCustomElementsSuccess:El(),loadCustomElementsError:El(),loadCustomElementsCancel:El(),selectionChanged:El(),selectionCommitted:El(),update:El()},registerCallback:(t,n)=>{const i=n.subscribe(t);return e.push(i),i},unsubscribeAll:()=>{e.forEach((e=>{e()}))}}})();return{registrations:t,registerCallback:e,unsubscribeAll:n,eventListener:(e,n)=>{nr.initStart.match(e)?t.initStart.invoke(e.payload):nr.initSuccess.match(e)?t.initSuccess.invoke(e.payload):nr.initError.match(e)?(vl("initializing",e.payload.error),t.initError.invoke(e.payload)):nr.initCancel.match(e)&&t.initCancel.invoke(e.payload),nr.loadAttributeStart.match(e)?t.loadAttributeStart.invoke(e.payload):nr.loadAttributeSuccess.match(e)?t.loadAttributeSuccess.invoke(e.payload):nr.loadAttributeError.match(e)?(vl("loading attribute",e.payload.error),t.loadAttributeError.invoke(e.payload)):nr.loadAttributeCancel.match(e)&&t.loadAttributeCancel.invoke(e.payload),nr.loadInitialElementsPageStart.match(e)?t.loadInitialElementsPageStart.invoke(e.payload):nr.loadInitialElementsPageSuccess.match(e)?t.loadInitialElementsPageSuccess.invoke(e.payload):nr.loadInitialElementsPageError.match(e)?(vl("loading initial elements page",e.payload.error),t.loadInitialElementsPageError.invoke(e.payload)):nr.loadInitialElementsPageCancel.match(e)&&t.loadInitialElementsPageCancel.invoke(e.payload),nr.loadNextElementsPageStart.match(e)?t.loadNextElementsPageStart.invoke(e.payload):nr.loadNextElementsPageSuccess.match(e)?t.loadNextElementsPageSuccess.invoke(e.payload):nr.loadNextElementsPageError.match(e)?(vl("loading next elements page",e.payload.error),t.loadNextElementsPageError.invoke(e.payload)):nr.loadNextElementsPageCancel.match(e)&&t.loadNextElementsPageCancel.invoke(e.payload),nr.loadCustomElementsStart.match(e)?t.loadCustomElementsStart.invoke(e.payload):nr.loadCustomElementsSuccess.match(e)?t.loadCustomElementsSuccess.invoke(e.payload):nr.loadCustomElementsError.match(e)?(vl("loading custom elements",e.payload.error),t.loadCustomElementsError.invoke(e.payload)):nr.loadCustomElementsCancel.match(e)&&t.loadCustomElementsCancel.invoke(e.payload),[nr.changeSelection.match,nr.revertSelection.match,nr.invertSelection.match,nr.clearSelection.match].some((t=>t(e)))&&t.selectionChanged.invoke({selection:n(Ui)}),nr.commitSelection.match(e)&&t.selectionCommitted.invoke({selection:n($i)}),[nr.initStart.match,nr.initSuccess.match,nr.initError.match,nr.initCancel.match,nr.loadAttributeStart.match,nr.loadAttributeSuccess.match,nr.loadAttributeError.match,nr.loadAttributeCancel.match,nr.loadInitialElementsPageStart.match,nr.loadInitialElementsPageSuccess.match,nr.loadInitialElementsPageError.match,nr.loadInitialElementsPageCancel.match,nr.loadNextElementsPageStart.match,nr.loadNextElementsPageSuccess.match,nr.loadNextElementsPageError.match,nr.loadNextElementsPageCancel.match,nr.changeSelection.match,nr.revertSelection.match,nr.invertSelection.match,nr.clearSelection.match,nr.commitSelection.match,nr.setLimit.match,nr.setOrder.match,nr.setSearch.match,nr.setLimitingMeasures.match,nr.setLimitingAttributeFilters.match,nr.setLimitingDateFilters.match].some((t=>t(e)))&&t.update.invoke()}}})(),this.redux=function(e){const t=gl({context:{attributeFilterContext:e}}),n=(0,g.filterObjRef)(e.attributeFilter),i=(0,g.filterAttributeElements)(e.attributeFilter),r=(0,g.isAttributeElementsByValue)(i)?"values":"uris",l=(0,g.isAttributeElementsByValue)(i)?i.values:i.uris,a=(0,g.isNegativeAttributeFilter)(e.attributeFilter),o=(0,Ai.xC)({preloadedState:Object.assign(Object.assign({},Xi),{displayFormRef:n,elementsForm:r,selection:{commited:{keys:l,isInverted:a},working:{keys:l,isInverted:a}},config:{hiddenElements:e.hiddenElements,staticElements:e.staticElements}}),reducer:tr,middleware:n=>{return n({thunk:!1,serializableCheck:{ignoredActions:ml,ignoredPaths:["initialization.error","attribute.error","elements.initialPageLoad.error","elements.nextPageLoad.error"]}}).concat([t,(i=e.eventListener,e=>t=>n=>{const r=t(n);return i(r,(t=>t(e.getState()))),r})]);var i}}),s=t.run(dl);return{context:e,cancelRootSaga:()=>{s.cancel()},dispatch:e=>{o.dispatch(e)},select:e=>e(o.getState())}}(Object.assign(Object.assign({},this.config),{eventListener:(e,t)=>{this.callbacks.eventListener(e,t)}}))},this.init=e=>{this.redux.dispatch(nr.init({correlation:e}))},this.getInitStatus=()=>this.redux.select(pl),this.getInitError=()=>this.redux.select(hl),this.onInitStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initStart),this.onInitSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initSuccess),this.onInitError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initError),this.onInitCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.initCancel),this.loadAttribute=e=>{this.redux.dispatch(nr.loadAttributeRequest({correlation:e}))},this.cancelAttributeLoad=()=>{this.redux.dispatch(nr.loadAttributeCancelRequest())},this.getAttribute=()=>this.redux.select(vr),this.getAttributeStatus=()=>this.redux.select(Er),this.getAttributeError=()=>this.redux.select(yr),this.onLoadAttributeStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeStart),this.onLoadAttributeSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeSuccess),this.onLoadAttributeError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeError),this.onLoadAttributeCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadAttributeCancel),this.loadInitialElementsPage=e=>{this.redux.dispatch(nr.loadInitialElementsPageRequest({correlation:e}))},this.cancelInitialElementsPageLoad=()=>{this.redux.dispatch(nr.loadInitialElementsPageCancelRequest())},this.getInitialElementsPageStatus=()=>this.redux.select(fl),this.getInitialElementsPageError=()=>this.redux.select(bl),this.onLoadInitialElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageStart),this.onLoadInitialElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageSuccess),this.onLoadInitialElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageError),this.onLoadInitialElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadInitialElementsPageCancel),this.loadNextElementsPage=e=>{this.redux.dispatch(nr.loadNextElementsPageRequest({correlation:e}))},this.getNextElementsPageStatus=()=>this.redux.select(Kr),this.getNextElementsPageError=()=>this.redux.select(Yr),this.onLoadNextElementsPageStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageStart),this.onLoadNextElementsPageSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageSuccess),this.onLoadNextElementsPageError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageError),this.onLoadNextElementsPageCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadNextElementsPageCancel),this.loadCustomElements=(e,t)=>{this.redux.dispatch(nr.loadCustomElementsRequest({options:e,correlation:t}))},this.onLoadCustomElementsStart=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsStart),this.onLoadCustomElementsSuccess=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsSuccess),this.onLoadCustomElementsError=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsError),this.onLoadCustomElementsCancel=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.loadCustomElementsCancel),this.getOffset=()=>this.redux.select(Ar),this.setSearch=e=>{this.redux.dispatch(nr.setSearch({search:e}))},this.getSearch=()=>this.redux.select(Or),this.setLimit=e=>{this.redux.dispatch(nr.setLimit({limit:e}))},this.getLimit=()=>this.redux.select(Dr),this.setOrder=e=>{this.redux.dispatch(nr.setOrder({order:e}))},this.getOrder=()=>this.redux.select(Pr),this.setLimitingMeasures=e=>{this.redux.dispatch(nr.setLimitingMeasures({filters:e}))},this.getLimitingMeasures=()=>this.redux.select(Mr),this.setLimitingAttributeFilters=e=>{this.redux.dispatch(nr.setLimitingAttributeFilters({filters:e}))},this.getLimitingAttributeFilters=()=>this.redux.select(Nr),this.setLimitingDateFilters=e=>{this.redux.dispatch(nr.setLimitingDateFilters({filters:e}))},this.getLimitingDateFilters=()=>this.redux.select(Tr),this.getAllElements=()=>this.redux.select(wr),this.getElementsByKey=e=>{const t=this.redux.select(Ir);return Cr(e,t)},this.getTotalCount=()=>this.redux.select(Fr),this.getTotalCountWithCurrentSettings=()=>this.redux.select(kr),this.getLimitingAttributeFiltersAttributes=()=>this.redux.select(_r),this.changeMultiSelection=({keys:e,isInverted:t})=>{this.redux.dispatch(nr.changeSelection({selection:e,isInverted:t}))},this.revertMultiSelection=()=>{this.redux.dispatch(nr.revertSelection())},this.commitMultiSelection=()=>{this.redux.dispatch(nr.commitSelection())},this.invertMultiSelection=()=>{this.redux.dispatch(nr.invertSelection())},this.clearMultiSelection=()=>{this.redux.dispatch(nr.clearSelection())},this.getWorkingMultiSelection=()=>this.redux.select(Ui),this.getCommittedMultiSelection=()=>this.redux.select($i),this.changeSingleSelection=e=>{this.redux.dispatch(nr.changeSelection({isInverted:!1,selection:Di([e])}))},this.revertSingleSelection=()=>{this.redux.dispatch(nr.revertSelection())},this.commitSingleSelection=()=>{this.redux.dispatch(nr.commitSelection())},this.getWorkingSingleSelection=()=>{const[e,...t]=this.redux.select(qi);return(0,Pi.kG)(!t.length,"Trying to invoke single select method, but multiple elements are selected."),e},this.getCommittedSingleSelection=()=>{const[e,...t]=this.redux.select(Gi);return(0,Pi.kG)(!t.length,"Trying to invoke single select method, but multiple elements are selected."),e},this.onMultiSelectionChanged=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionChanged),this.onMultiSelectionCommitted=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.selectionCommitted),this.onSingleSelectionChanged=e=>this.callbacks.registerCallback((({selection:t})=>e({selection:t.keys[0]})),this.callbacks.registrations.selectionChanged),this.onSingleSelectionCommitted=e=>this.callbacks.registerCallback((({selection:t})=>e({selection:t.keys[0]})),this.callbacks.registrations.selectionCommitted),this.getIsWorkingSelectionEmpty=()=>this.redux.select(Yi),this.getIsWorkingSelectionChanged=()=>this.redux.select(Ki),this.getFilter=()=>this.redux.select(gr),this.onUpdate=e=>this.callbacks.registerCallback(e,this.callbacks.registrations.update),this.isLoadElementsOptionsChanged=()=>this.redux.select(Xr),this.config=e,this.initializeBridge()}cancelNextElementsPageLoad(){this.redux.dispatch(nr.loadNextElementsPageCancelRequest())}cancelCustomElementsLoad(e){this.redux.dispatch(nr.loadCustomElementsCancelRequest({correlation:e}))}}class Cl{constructor(e){this.validateStaticElementsLoad=()=>{var e,t,n,i,r,l;(0,Pi.kG)(!((null===(e=this.config.staticElements)||void 0===e?void 0:e.length)&&(null===(t=this.getLimitingAttributeFilters())||void 0===t?void 0:t.length)),"Using limitingAttributeFilters is not supported when using static attribute elements"),(0,Pi.kG)(!((null===(n=this.config.staticElements)||void 0===n?void 0:n.length)&&(null===(i=this.getLimitingDateFilters())||void 0===i?void 0:i.length)),"Using limitingDateFilters is not supported when using static attribute elements"),(0,Pi.kG)(!((null===(r=this.config.staticElements)||void 0===r?void 0:r.length)&&(null===(l=this.getLimitingMeasures())||void 0===l?void 0:l.length)),"Using limitingMeasures is not supported when using static attribute elements")},this.init=(e=(0,Oi.Z)())=>{this.validateStaticElementsLoad(),this.bridge.init(e)},this.onInitStart=e=>this.bridge.onInitStart(e),this.onInitSuccess=e=>this.bridge.onInitSuccess(e),this.onInitError=e=>this.bridge.onInitError(e),this.onInitCancel=e=>this.bridge.onInitCancel(e),this.getInitStatus=()=>this.bridge.getInitStatus(),this.getInitError=()=>this.bridge.getInitError(),this.loadAttribute=(e=(0,Oi.Z)())=>{this.bridge.loadAttribute(e)},this.cancelAttributeLoad=()=>{this.bridge.cancelAttributeLoad()},this.getAttribute=()=>this.bridge.getAttribute(),this.getAttributeError=()=>this.bridge.getAttributeError(),this.getAttributeStatus=()=>this.bridge.getAttributeStatus(),this.onLoadAttributeStart=e=>this.bridge.onLoadAttributeStart(e),this.onLoadAttributeSuccess=e=>this.bridge.onLoadAttributeSuccess(e),this.onLoadAttributeError=e=>this.bridge.onLoadAttributeError(e),this.onLoadAttributeCancel=e=>this.bridge.onLoadAttributeCancel(e),this.loadInitialElementsPage=(e=(0,Oi.Z)())=>{(0,Pi.kG)("success"===this.bridge.getInitStatus(),"Cannot call loadInitialElementsPage() before successful initialization."),this.validateStaticElementsLoad(),this.bridge.loadInitialElementsPage(e)},this.getInitialElementsPageStatus=()=>this.bridge.getInitialElementsPageStatus(),this.getInitialElementsPageError=()=>this.bridge.getInitialElementsPageError(),this.onLoadInitialElementsPageStart=e=>this.bridge.onLoadInitialElementsPageStart(e),this.onLoadInitialElementsPageSuccess=e=>this.bridge.onLoadInitialElementsPageSuccess(e),this.onLoadInitialElementsPageError=e=>this.bridge.onLoadInitialElementsPageError(e),this.onLoadInitialElementsPageCancel=e=>this.bridge.onLoadInitialElementsPageCancel(e),this.loadNextElementsPage=(e=(0,Oi.Z)())=>{(0,Pi.kG)("success"===this.bridge.getInitStatus(),"Cannot call loadNextElementsPage() before successful initialization."),(0,Pi.kG)("success"===this.bridge.getInitialElementsPageStatus(),"Cannot call loadNextElementsPage() before loadInitialElementsPage() completes."),(0,Pi.kG)(!this.bridge.isLoadElementsOptionsChanged(),"Cannot call loadNextElementsPage() when load element options were changed. When options are changed, you should call loadInitialElementsPage() first."),this.bridge.loadNextElementsPage(e)},this.getNextElementsPageStatus=()=>this.bridge.getNextElementsPageStatus(),this.getNextElementsPageError=()=>this.bridge.getNextElementsPageError(),this.onLoadNextElementsPageStart=e=>this.bridge.onLoadNextElementsPageStart(e),this.onLoadNextElementsPageSuccess=e=>this.bridge.onLoadNextElementsPageSuccess(e),this.onLoadNextElementsPageError=e=>this.bridge.onLoadNextElementsPageError(e),this.onLoadNextElementsPageCancel=e=>this.bridge.onLoadNextElementsPageCancel(e),this.loadCustomElements=(e,t)=>{this.bridge.loadCustomElements(e,t)},this.onLoadCustomElementsStart=e=>this.bridge.onLoadCustomElementsStart(e),this.onLoadCustomElementsSuccess=e=>this.bridge.onLoadCustomElementsSuccess(e),this.onLoadCustomElementsError=e=>this.bridge.onLoadCustomElementsError(e),this.onLoadCustomElementsCancel=e=>this.bridge.onLoadCustomElementsCancel(e),this.getOffset=()=>this.bridge.getOffset(),this.setSearch=e=>{this.bridge.setSearch(e)},this.getSearch=()=>this.bridge.getSearch(),this.setLimit=e=>{this.bridge.setLimit(e)},this.getLimit=()=>this.bridge.getLimit(),this.setOrder=e=>{this.bridge.setOrder(e)},this.getOrder=()=>this.bridge.getOrder(),this.setLimitingMeasures=e=>{this.bridge.setLimitingMeasures(e)},this.getLimitingMeasures=()=>this.bridge.getLimitingMeasures(),this.setLimitingAttributeFilters=e=>{this.bridge.setLimitingAttributeFilters(e)},this.getLimitingAttributeFilters=()=>this.bridge.getLimitingAttributeFilters(),this.setLimitingDateFilters=e=>{this.bridge.setLimitingDateFilters(e)},this.getLimitingDateFilters=()=>this.bridge.getLimitingDateFilters(),this.getAllElements=()=>this.bridge.getAllElements(),this.getElementsByKey=e=>this.bridge.getElementsByKey(e),this.getTotalElementsCount=()=>this.bridge.getTotalCount(),this.getTotalElementsCountWithCurrentSettings=()=>this.bridge.getTotalCountWithCurrentSettings(),this.getLimitingAttributeFiltersAttributes=()=>this.bridge.getLimitingAttributeFiltersAttributes(),this.getFilter=()=>this.bridge.getFilter(),this.onUpdate=e=>this.bridge.onUpdate(e),this.config=e,this.bridge=new yl(e)}cancelInitialElementsPageLoad(){this.bridge.cancelInitialElementsPageLoad()}cancelNextElementsPageLoad(){this.bridge.cancelNextElementsPageLoad()}cancelCustomElementsLoad(e){this.bridge.cancelCustomElementsLoad(e)}}class Sl extends Cl{constructor(e){super(e),this.changeSelection=e=>{this.bridge.changeMultiSelection(e)},this.revertSelection=()=>{this.bridge.revertMultiSelection()},this.commitSelection=()=>{this.bridge.commitMultiSelection()},this.invertSelection=()=>{this.bridge.invertMultiSelection()},this.clearSelection=()=>{this.bridge.clearMultiSelection()},this.getWorkingSelection=()=>this.bridge.getWorkingMultiSelection(),this.isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty(),this.isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged(),this.getCommittedSelection=()=>this.bridge.getCommittedMultiSelection(),this.onSelectionChanged=e=>this.bridge.onMultiSelectionChanged(e),this.onSelectionCommitted=e=>this.bridge.onMultiSelectionCommitted(e)}}class Il extends Cl{static sanitizeConfig(e){const t=(0,g.filterAttributeElements)(e.attributeFilter),n=((0,g.isAttributeElementsByRef)(t)?t.uris:t.values)[0],i=(0,g.isAttributeElementsByRef)(t)?{uris:[n]}:{values:[n]};return Object.assign(Object.assign({},e),{attributeFilter:(0,g.isPositiveAttributeFilter)(e.attributeFilter)?(0,g.newPositiveAttributeFilter)((0,g.filterObjRef)(e.attributeFilter),i):(0,g.newNegativeAttributeFilter)((0,g.filterObjRef)(e.attributeFilter),i)})}constructor(e){super(Il.sanitizeConfig(e)),this.changeSelection=e=>{this.bridge.changeSingleSelection(e)},this.revertSelection=()=>{this.bridge.revertSingleSelection()},this.commitSelection=()=>{this.bridge.commitSingleSelection()},this.getWorkingSelection=()=>this.bridge.getWorkingSingleSelection(),this.isWorkingSelectionEmpty=()=>this.bridge.getIsWorkingSelectionEmpty(),this.isWorkingSelectionChanged=()=>this.bridge.getIsWorkingSelectionChanged(),this.getCommittedSelection=()=>this.bridge.getCommittedSingleSelection(),this.onSelectionChanged=e=>this.bridge.onSingleSelectionChanged(e),this.onSelectionCommitted=e=>this.bridge.onSingleSelectionCommitted(e)}}function wl(e,t,n,i={selectionMode:"multi"}){const{selectionMode:r,hiddenElements:l,staticElements:a}=i;return"multi"===r?new Sl({backend:e,workspace:t,attributeFilter:n,hiddenElements:l,staticElements:a}):new Il({backend:e,workspace:t,attributeFilter:n,hiddenElements:l,staticElements:a})}const Fl=(e,t)=>()=>{throw new R.UnexpectedSdkError(`Component: ${e} is missing in the ${t}.`)};function kl(e,t){return e.formattedTitle||e.title||`(${t.formatMessage({id:"empty_value"})})`}function xl(e,t){return e.map((e=>kl(e,t))).join(", ")}function Ol(e){return e.uri}const Pl=(0,W.createContext)({ErrorComponent:Fl("ErrorComponent","AttributeFilterComponentsContext"),LoadingComponent:Fl("LoadingComponent","AttributeFilterComponentsContext"),DropdownButtonComponent:Fl("DropdownButtonComponent","AttributeFilterComponentsContext"),DropdownBodyComponent:Fl("DropdownBodyComponent","AttributeFilterComponentsContext"),DropdownActionsComponent:Fl("DropdownActionsComponent","AttributeFilterComponentsContext"),ElementsSearchBarComponent:Fl("ElementsSearchBarComponent","AttributeFilterComponentsContext"),ElementsSelectComponent:Fl("ElementsSelectComponent","AttributeFilterComponentsContext"),ElementsSelectLoadingComponent:Fl("ElementsSelectLoadingComponent","AttributeFilterComponentsContext"),ElementsSelectItemComponent:Fl("ElementsSelectItemComponent","AttributeFilterComponentsContext"),ElementsSelectErrorComponent:Fl("ElementsSelectErrorComponent","AttributeFilterComponentsContext"),ElementsSelectActionsComponent:Fl("ElementsSelectActionsComponent","AttributeFilterComponentsContext"),EmptyResultComponent:Fl("EmptyResultComponent","AttributeFilterComponentsContext"),StatusBarComponent:Fl("StatusBarComponent","AttributeFilterComponentsContext")});Pl.displayName="AttributeFilterComponentsContext";const Dl=()=>(0,W.useContext)(Pl),Al=e=>{const{children:t}=e,n=(0,$.__rest)(e,["children"]);return W.createElement(Pl.Provider,{value:n},t)};var Nl=n(23279),Ml=n(23560);const Tl=e=>{const{backend:t,workspace:n,filter:i,hiddenElements:r,staticElements:l}=e,[,a]=(0,W.useState)(0),o=()=>{a((e=>e+1))},s=(0,W.useRef)(),c=(0,W.useCallback)((()=>{const e=wl(t.withTelemetry("AttributeFilter",{workspace:n,filter:i,hiddenElements:r,staticElements:l}),n,i,{selectionMode:"multi",hiddenElements:r,staticElements:l});s.current=e}),[t,n,i,r,l]);s.current||c();const u=s.current,d=(0,R.usePrevious)(e);return(0,W.useEffect)((()=>{const e=u.onUpdate((()=>{o()}));return t===d.backend&&n===d.workspace&&G((0,g.filterObjRef)(i),(0,g.filterObjRef)(u.getFilter()))&&G(l,d.staticElements)&&G(r,d.hiddenElements)||(c(),o()),()=>{e()}}),[t,n,i,l,r,d,u,c]),u},Rl="parentFilters";const Ll=e=>{const{backend:t,workspace:n,filter:i,connectToPlaceholder:r,parentFilters:l,parentFilterOverAttribute:a,resetOnParentFilterChange:o=!0,onApply:s,onError:c,hiddenElements:u,staticElements:d,elementsOptions:m,selectionMode:p="multi",selectFirst:h=!1}=e,f=(0,R.useBackendStrict)(t,"AttributeFilter"),b=(0,R.useWorkspaceStrict)(n,"AttributeFilter"),{filter:v,setConnectedPlaceholderValue:E}=((e,t)=>{const[n,i]=(0,R.usePlaceholder)(t),r=null!=n?n:e,l=(0,W.useCallback)((e=>{t&&i(e)}),[t,i]);return{filter:r,setConnectedPlaceholderValue:l}})(i,r),y=((e,t)=>{const n=(0,R.useResolveValueWithPlaceholders)(e);return(0,W.useMemo)((()=>((e,t)=>{if(!e||!t)return[];const n=Ml(t)?t:()=>t;return e.map(((e,t)=>({attributeFilter:e,overAttribute:n(e,t)}))).filter((e=>!(0,g.filterIsEmpty)(e.attributeFilter)))})(n,t)),[n,t])})(l,a),C=Tl({backend:f,filter:v,workspace:b,hiddenElements:u,staticElements:d}),S=function(e){var t;const n=(e=>{const t=e.getWorkingSelection(),n=e.getCommittedSelection(),i=e.getInitStatus();return{attributeFilter:e.getFilter(),initialization:{status:e.getInitStatus(),error:e.getInitError()},attribute:{data:e.getAttribute(),status:e.getAttributeStatus(),error:e.getAttributeError()},elements:{data:e.getAllElements(),totalCount:e.getTotalElementsCount(),totalCountWithCurrentSettings:e.getTotalElementsCountWithCurrentSettings(),initialPageLoad:{status:e.getInitialElementsPageStatus(),error:e.getInitialElementsPageError()},nextPageLoad:{status:e.getNextElementsPageStatus(),error:e.getNextElementsPageError()},options:{search:e.getSearch(),offset:e.getOffset(),limit:e.getLimit(),limitingAttributeFilters:e.getLimitingAttributeFilters(),limitingDateFilters:e.getLimitingDateFilters(),limitingMeasures:e.getLimitingMeasures(),order:e.getOrder()}},selection:{committed:{elements:"success"===i?e.getElementsByKey(n.keys):[],keys:n.keys,isInverted:n.isInverted},working:{elements:"success"===i?e.getElementsByKey(t.keys):[],keys:t.keys,isInverted:t.isInverted,isChanged:e.isWorkingSelectionChanged(),isEmpty:e.isWorkingSelectionEmpty()}}}})(e),i=n.initialization.status,r=n.initialization.error,l="loading"===i,a=n.attribute.data,o=n.elements.initialPageLoad.status,s=n.elements.initialPageLoad.error,c="loading"===o,u=n.elements.nextPageLoad.status,d=n.elements.nextPageLoad.error,m="loading"===u,p=n.elements.data,h=n.elements.totalCount,f=n.elements.totalCountWithCurrentSettings,b=n.selection.working.isChanged,v=n.selection.working.isEmpty,E=n.selection.working.isInverted,y=n.selection.working.elements,C=n.selection.committed.isInverted,S=n.selection.committed.elements,I=n.elements.options.search,w=n.elements.options.limit,F=n.elements.options.limitingAttributeFilters,k=p.length<f?Math.min(w,f-p.length):0,x=y.length>500||!b||!E&&v,O=sl(F),P="success"===o&&!O,D=function(e){const[t,n]=(0,W.useState)(!1);return(0,W.useEffect)((()=>{const t=[e.onLoadInitialElementsPageStart(i),e.onLoadInitialElementsPageSuccess(r),e.onLoadInitialElementsPageError(r),e.onLoadInitialElementsPageCancel(r),e.onInitStart(i),e.onInitSuccess(r),e.onInitError(r),e.onInitCancel(r)];function i(e){e.correlation===Rl&&n(!0)}function r(e){e.correlation===Rl&&n(!1)}return()=>{t.forEach((e=>{e()}))}}),[e]),t}(e),A=e.getLimitingAttributeFiltersAttributes(),N=null!==(t=null==a?void 0:a.displayForms)&&void 0!==t?t:[],M=(0,g.filterObjRef)(n.attributeFilter);return{attribute:a,offset:n.elements.options.offset,limit:w,isFiltering:D,isInitializing:l,initError:r,isLoadingInitialElementsPage:c,initialElementsPageError:s,isLoadingNextElementsPage:m,nextElementsPageError:d,nextElementsPageSize:k,elements:p,totalElementsCount:h,totalElementsCountWithCurrentSettings:f,isApplyDisabled:x,isWorkingSelectionInverted:E,workingSelectionElements:y,isCommittedSelectionInverted:C,committedSelectionElements:S,searchString:I,isFilteredByParentFilters:P,parentFilterAttributes:A,displayForms:N,currentDisplayFormRef:M}}(C),w=function(e,t,n){const i="single"===e,r=I(n),l=(0,g.isPositiveAttributeFilter)(t)&&(0,g.attributeElementsCount)((0,g.filterAttributeElements)(t))<2;if(i){if(!l)return console.error("Provided 'filter' or 'connectToPlaceholder' property is not compatible with given single selection mode. It needs to be positive filter with max one item selected in attribute elements"),!1;if(!r)return console.error("Parent filtering can not be used together with single selection mode. Use only one of these properties at the same time."),!1}return!0}(p,v,y)?{}:{initError:new R.UnexpectedSdkError};!function(e,t){const{onError:n}=t;(0,W.useEffect)((()=>{function t(e){null==n||n(e.error)}const i=[e.onInitError(t),e.onLoadAttributeError(t),e.onLoadInitialElementsPageError(t),e.onLoadNextElementsPageError(t),e.onLoadCustomElementsError(t)];return()=>{i.forEach((e=>{e()}))}}),[e,n])}(C,{onError:c}),function(e,t){const{filter:n,limitingAttributeFilters:i,limit:r,resetOnParentFilterChange:l,setConnectedPlaceholderValue:a,onApply:o,selectionMode:s}=t;(0,W.useEffect)((()=>{i.length>0&&e.setLimitingAttributeFilters(i),r&&e.setLimit(r),e.init()}),[e]),(0,W.useEffect)((()=>{const t=!G(i,e.getLimitingAttributeFilters()),r=!G(n,e.getFilter()),c={filter:n,limitingAttributeFilters:i,limitingAttributesChanged:t,filterChanged:r,setConnectedPlaceholderValue:a,onApply:o,selectionMode:s},u=l?function(e,{filter:t,limitingAttributeFilters:n,limitingAttributesChanged:i,filterChanged:r,setConnectedPlaceholderValue:l,onApply:a,selectionMode:o}){var s;if(i){e.changeSelection({keys:[],isInverted:"single"!==o}),e.setLimitingAttributeFilters(n),e.commitSelection();const t=e.getFilter(),i=null===(s=e.getCommittedSelection())||void 0===s?void 0:s.isInverted;return l(t),null==a||a(t,i),"init-parent"}if(r){const n=(0,g.filterAttributeElements)(t),i=(0,g.isAttributeElementsByValue)(n)?n.values:n.uris,r=(0,g.isNegativeAttributeFilter)(t);return e.changeSelection({keys:i,isInverted:r}),e.commitSelection(),"init-self"}}(e,c):function(e,{filter:t,limitingAttributeFilters:n,limitingAttributesChanged:i,filterChanged:r,setConnectedPlaceholderValue:l}){if(i||r){const r=(0,g.filterAttributeElements)(t),a=(0,g.isAttributeElementsByValue)(r)?r.values:r.uris,o=(0,g.isNegativeAttributeFilter)(t);return e.changeSelection({keys:a,isInverted:o}),e.setLimitingAttributeFilters(n),e.commitSelection(),l(e.getFilter()),i?"init-parent":"init-self"}}(e,c);!function(e,t){"init-parent"===t&&("success"!==e.getInitStatus()?e.init(Rl):e.loadInitialElementsPage(Rl)),"init-self"===t&&e.init()}(e,u)}),[n,i,l,e,o,a,s])}(C,{filter:v,limitingAttributeFilters:y,limit:null==m?void 0:m.limit,onApply:s,setConnectedPlaceholderValue:E,resetOnParentFilterChange:o,selectionMode:p});const F=function(e,t){const{onApply:n,setConnectedPlaceholderValue:i,selectionMode:r}=t,l=(0,W.useCallback)(((t,n)=>{const i=e.getFilter(),r=(0,g.isAttributeElementsByRef)((0,g.filterAttributeElements)(i)),l=t.map((e=>r?e.uri:e.title));e.changeSelection({keys:l,isInverted:n})}),[e]),a=(0,W.useCallback)(Nl((t=>{e.getSearch()!==t&&(e.setSearch(t),e.loadInitialElementsPage("search"))}),200),[e]),o=(0,W.useCallback)((()=>{e.loadNextElementsPage()}),[e]),s=(0,W.useCallback)((()=>{e.revertSelection(),e.getSearch().length>0&&(e.setSearch(""),e.loadInitialElementsPage("reset"))}),[e]);return{onApply:(0,W.useCallback)((()=>{var t;e.commitSelection();const l=e.getFilter(),a=null===(t=e.getCommittedSelection())||void 0===t?void 0:t.isInverted;i(l),null==n||n(l,a,r)}),[n,i,e,r]),onLoadNextElementsPage:o,onSearch:a,onSelect:l,onReset:s}}(C,{onApply:s,setConnectedPlaceholderValue:E,selectionMode:p});return _l(C,{selectFirst:h,onApply:F.onApply,selectionMode:p}),Object.assign(Object.assign(Object.assign({},S),F),w)},_l=(e,t)=>{const{selectFirst:n,selectionMode:i,onApply:r}=t,l=e.getCommittedSelection().keys,a=e.getInitialElementsPageStatus(),o=e.getAllElements(),s=e.getFilter();(0,W.useEffect)((()=>{if(n&&"single"===i&&I(l)&&"success"===a&&!I(o)){const t=[(0,g.isAttributeElementsByRef)((0,g.filterAttributeElements)(s))?o[0].uri:o[0].title];e.changeSelection({keys:t,isInverted:!1}),e.commitSelection(),r()}}),[n,i,l,a,o,s,e,r])},Bl=W.createContext(null);Bl.displayName="AttributeFilterContext";const Vl=()=>(0,W.useContext)(Bl),Hl=e=>{var t,n;const{children:i,fullscreenOnMobile:r,title:l,selectionMode:a,selectFirst:o}=e,s=Ll(e),c=null!==(n=null!=l?l:null===(t=null==s?void 0:s.attribute)||void 0===t?void 0:t.title)&&void 0!==n?n:"";return W.createElement(Bl.Provider,{value:Object.assign(Object.assign({},s),{fullscreenOnMobile:r,title:c,selectionMode:a,selectFirst:o})},i)};var jl=n(86896);const Zl=[{align:"cr cl",offset:{x:0,y:50}}],ql=({children:e})=>W.createElement("span",{className:"gd-list-item-tooltip"},W.createElement(J.BubbleHoverTrigger,null,W.createElement("span",{className:"gd-icon-circle-question gd-list-item-tooltip-icon s-attribute-filter-tooltip-icon"}),W.createElement(J.Bubble,{className:"gd-attribute-filter-details s-attribute-filter-details-bubble",alignPoints:Zl,arrowStyle:{display:"none"}},e))),Wl=[{align:"tc bc",offset:{x:0,y:-2}},{align:"cc tc",offset:{x:0,y:10}},{align:"bl tr",offset:{x:-2,y:-8}}],Gl=e=>{const{isOpen:t,title:n,selectedItemsCount:i,showSelectionCount:r=!0,subtitle:l,isFiltering:a,isLoading:o,isLoaded:s,isError:c,isDraggable:u,icon:d,TooltipContentComponent:m,onClick:g}=e,p=(0,jl.Z)(),h=(0,W.useRef)(null),[f,b]=(0,W.useState)(!1),v=c?W.createElement("i",{className:"gd-icon gd-icon-circle-cross"}):d;(0,W.useEffect)((()=>{const e=h.current;if(!e)return;const t=Math.ceil(e.getBoundingClientRect().width)<e.scrollWidth;b(t)}),[l]);let E=n,y=l;return o?(E=p.formatMessage({id:"loading"}),y=p.formatMessage({id:"loading"})):a&&(y=p.formatMessage({id:"filtering"})),W.createElement("div",{className:te("gd-attribute-filter-dropdown-button__next","s-attribute-filter",`s-${On.gl(n)}`,{"gd-message":c,"gd-is-filtering":a,"gd-is-active":t,"gd-is-loaded":s,"gd-is-draggable":u}),onClick:g},v?W.createElement("div",{className:"gd-attribute-filter-dropdown-button-icon__next"},v):null,W.createElement("div",{className:"gd-attribute-filter-dropdown-button-content__next"},W.createElement("div",{className:"gd-attribute-filter-dropdown_button-title-content__next"},W.createElement("div",{className:"gd-attribute-filter-dropdown-button-title__next"},W.createElement(J.ShortenedText,{tooltipAlignPoints:Wl,className:"s-attribute-filter-button-title"},`${E}${o||a?"":":"}`)),m&&s?W.createElement(ql,null,W.createElement(m,null)):null),W.createElement("div",{className:"gd-attribute-filter-dropdown-button-subtitle__next"},W.createElement("span",{className:"gd-attribute-filter-dropdown-button-selected-items__next s-attribute-filter-button-subtitle",ref:h},y),r&&f?W.createElement("span",{className:"gd-attribute-filter-dropdown-button-selected-items-count__next"},`(${i})`):null)))},zl=({onClick:e})=>W.createElement(Gl,{isLoading:!0,onClick:e}),Ul=e=>{const{isOpen:t,isDraggable:n}=e;return W.createElement("div",{className:te("gd-attribute-filter-dropdown-button__next","s-attribute-filter","gd-message error s-button-error",{"gd-is-active":t,"gd-is-draggable":n})},W.createElement(ee.Z,{id:"gs.filter.error"}))},$l=245,Kl=e=>{const{onApplyButtonClick:t,onCancelButtonClick:n,width:i=$l}=e,{DropdownActionsComponent:r,ElementsSelectComponent:l}=Dl(),a=(0,J.useMediaQuery)("mobileDevice"),{initialElementsPageError:o,nextElementsPageError:s,isApplyDisabled:c,isWorkingSelectionInverted:u,isLoadingInitialElementsPage:d,isLoadingNextElementsPage:m,onLoadNextElementsPage:g,elements:p,onSearch:h,onSelect:f,nextElementsPageSize:b,searchString:v,totalElementsCount:E,totalElementsCountWithCurrentSettings:y,workingSelectionElements:C,parentFilterAttributes:S,isFilteredByParentFilters:I,fullscreenOnMobile:w,selectionMode:F}=Vl(),k=(0,W.useMemo)((()=>S.map((e=>e.title))),[S]),x={width:a&&w?"100%":i},O=(0,W.useCallback)(((e,n)=>{f(e,n),"single"===F&&t()}),[f,t,F]);return W.createElement("div",{className:"gd-attribute-filter-dropdown-body__next",style:x},W.createElement(l,{isInverted:u,isLoading:d,isLoadingNextPage:m,items:p,onLoadNextPage:g,onSearch:h,onSelect:O,nextPageSize:b,searchString:v,selectedItems:C,totalItemsCount:E,totalItemsCountWithCurrentSettings:y,parentFilterTitles:k,isFilteredByParentFilters:I,error:null!=o?o:s}),W.createElement(r,{onApplyButtonClick:t,onCancelButtonClick:n,isApplyDisabled:c}))},Yl=({isApplyDisabled:e,onApplyButtonClick:t,onCancelButtonClick:n})=>{const i=(0,jl.Z)(),r=i.formatMessage({id:"gs.list.cancel"}),l=i.formatMessage({id:"gs.list.apply"});return W.createElement("div",{className:"gd-attribute-filter-dropdown-actions__next"},W.createElement("div",{className:"gd-attribute-filter-dropdown-actions-left-content__next"}),W.createElement("div",{className:"gd-attribute-filter-dropdown-actions-right-content__next"},W.createElement(J.Button,{className:"gd-attribute-filter-cancel-button__next gd-button-secondary gd-button-small cancel-button s-cancel",onClick:n,value:r,title:r}),W.createElement(J.Button,{disabled:e,className:"gd-attribute-filter-apply-button__next gd-button-action gd-button-small s-apply",onClick:t,value:l,title:l})))},Ql=e=>{const{onSearch:t,searchString:n,isSmall:i}=e;return W.createElement(J.InvertableSelectSearchBar,{onSearch:t,searchString:n,isSmall:i})},Jl=e=>{const{items:t,totalItemsCount:n,totalItemsCountWithCurrentSettings:i,isInverted:r,selectedItems:l,onSelect:a,searchString:o,onSearch:s,isLoading:c,isLoadingNextPage:u,nextPageSize:d,onLoadNextPage:m,error:g,isFilteredByParentFilters:p,parentFilterTitles:h}=e,f=(0,jl.Z)(),b=(0,J.useMediaQuery)("mobileDevice"),{fullscreenOnMobile:v,selectionMode:E}=Vl(),{ElementsSelectLoadingComponent:y,ElementsSelectItemComponent:C,ElementsSelectErrorComponent:S,EmptyResultComponent:I,ElementsSearchBarComponent:w,ElementsSelectActionsComponent:F,StatusBarComponent:k}=Dl(),x=v&&b?40:28,O=b&&v,P=(0,R.usePrevious)(i),D=(0,W.useMemo)((()=>Math.max((Math.min(P,10)||1)*x,20)+32),[P,x]);return W.createElement(W.Fragment,null,W.createElement(J.InvertableSelect,{className:"gd-attribute-filter-elements-select__next",adaptiveWidth:!0,adaptiveHeight:O,isSingleSelect:"single"===E,items:t,totalItemsCount:i,itemHeight:x,getItemKey:Ol,getItemTitle:e=>kl(e,f),isInverted:r,selectedItems:l,selectedItemsLimit:500,onSelect:a,searchString:o,onSearch:s,isLoading:c,error:g,isLoadingNextPage:u,nextPageItemPlaceholdersCount:d,onLoadNextPage:m,renderItem:e=>W.createElement(C,Object.assign({},e,{fullscreenOnMobile:v})),renderError:()=>W.createElement(S,{error:g}),renderLoading:()=>W.createElement(y,{height:D}),renderNoData:({height:e})=>W.createElement(I,{height:e,isFilteredByParentFilters:p,searchString:o,totalItemsCount:n,parentFilterTitles:h}),renderSearchBar:({onSearch:e,searchString:t})=>W.createElement(w,{onSearch:e,searchString:t,isSmall:!(b&&v)}),renderStatusBar:({getItemTitle:e,isInverted:t,selectedItems:n,selectedItemsLimit:r})=>W.createElement(k,{getItemTitle:e,isFilteredByParentFilters:p,isInverted:t,parentFilterTitles:h,selectedItems:n,totalElementsCountWithCurrentSettings:i,selectedItemsLimit:r}),renderActions:({checked:e,onChange:t,onToggle:n,isFiltered:i,totalItemsCount:r,isPartialSelection:l,isVisible:a})=>W.createElement(F,{isVisible:a,checked:e,onChange:t,onToggle:n,isFiltered:i,totalItemsCount:r,isPartialSelection:l})}))};var Xl=n(68929);const ea=[{align:"bl tc",offset:{x:7,y:0}}],ta=e=>{const{item:t,isSelected:n,onSelect:i,onSelectOnly:r,onDeselect:l}=e,a=(0,jl.Z)(),o=(0,W.useCallback)((()=>{n?l():i()}),[i,l,n]),s=(0,W.useCallback)((e=>{e.stopPropagation(),r()}),[r]),c=te("gd-attribute-filter-elements-select-item__next","gd-list-item","has-only-visible","s-attribute-filter-list-item",`s-attribute-filter-list-item-${Xl(t.title)}`,{"is-selected":n},{"s-attribute-filter-list-item-selected":n},{"gd-attribute-filter-list-empty-item":!t.title}),u=te("input-checkbox-label",{"gd-empty-value-label":!t.title}),d=kl(t,a);return W.createElement("div",{className:c,onClick:o,title:d},W.createElement("label",{className:u},W.createElement("input",{type:"checkbox",className:"input-checkbox",readOnly:!0,checked:n}),W.createElement("span",{className:"input-label-text"},d)),!t.title&&W.createElement("div",{className:"gd-empty-list-item-tooltip-wrapper"},W.createElement(J.BubbleHoverTrigger,{className:"gd-empty-list-item-tooltip",showDelay:0,hideDelay:0},W.createElement("span",{className:"gd-icon-circle-question gd-empty-value-tooltip-icon"}),W.createElement(J.Bubble,{className:"bubble-primary gd-empty-item-bubble",alignTo:".gd-empty-value-tooltip-icon",alignPoints:ea},W.createElement(ee.Z,{id:"attributesDropdown.empty.item.tooltip"})))),W.createElement("span",{className:"gd-list-item-only",onClick:s},W.createElement(ee.Z,{id:"gs.list.only"})))},na=()=>W.createElement(J.Message,{type:"error"},W.createElement(ee.Z,{id:"gs.list.error"})),ia=e=>W.createElement(J.LoadingMask,{height:e.height}),ra=()=>{const e=(0,jl.Z)();return W.createElement(J.NoData,{noDataLabel:e.formatMessage({id:"attributesDropdown.noResultsMatch"})})},la=()=>{const e=(0,jl.Z)();return W.createElement(J.NoData,{noDataLabel:e.formatMessage({id:"attributesDropdown.noData"})})},aa=[{align:"cr cl"}],oa={"cr cl":[10,0]},sa=e=>{const{parentFilterTitles:t}=e;return W.createElement("div",{className:"gd-attribute-filter-empty-filtered-result__next s-attribute-filter-dropdown-all-items-filtered"},W.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement("div",{className:"gd-filtered-message__next"},W.createElement(ee.Z,{id:"attributesDropdown.allItemsFiltered"}),W.createElement("span",{className:"gd-icon-circle-question"})),W.createElement(J.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:aa,arrowOffsets:oa},W.createElement(ee.Z,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:t.join(", "),strong:e=>W.createElement("strong",null,e)}}))))},ca=({height:e,totalItemsCount:t,searchString:n,isFilteredByParentFilters:i,parentFilterTitles:r=[]})=>{let l=null;const a=(0,W.useMemo)((()=>({height:e})),[e]);return 0===t?l=W.createElement(la,null):i?l=W.createElement(sa,{parentFilterTitles:r}):n.length>0&&(l=W.createElement(ra,null)),W.createElement("div",{className:"gd-attribute-filter-empty-result__next",style:a},l)},ua=[{align:"cr cl"}],da={"cr cl":[10,0]},ma=e=>{const{parentFilterTitles:t}=e,n=(0,W.useMemo)((()=>t?t.join(", "):""),[t]);return W.createElement("div",{className:"gd-attribute-filter-filtered-status__next s-attribute-filter-dropdown-items-filtered"},W.createElement(J.BubbleHoverTrigger,{showDelay:0,hideDelay:0},W.createElement("div",{className:"gd-filtered-message__next"}," ",W.createElement(ee.Z,{id:"attributesDropdown.itemsFiltered"}),W.createElement("span",{className:"gd-icon-circle-question"})),W.createElement(J.Bubble,{className:"bubble-primary gd-attribute-filter-dropdown-bubble__next s-attribute-filter-dropdown-bubble",alignPoints:ua,arrowOffsets:da},W.createElement(ee.Z,{id:"attributesDropdown.itemsFiltered.tooltip",values:{filters:n,strong:e=>W.createElement("strong",null,e)}}))))},ga=e=>{const{isInverted:t,selectedItems:n,getItemTitle:i,selectedItemsLimit:r}=e;return W.createElement(J.InvertableSelectStatusBar,{className:"gd-attribute-filter-selection-status__next",isInverted:t,getItemTitle:i,selectedItems:n,selectedItemsLimit:r})},pa=e=>{const{isFilteredByParentFilters:t,parentFilterTitles:n,totalElementsCountWithCurrentSettings:i,getItemTitle:r,isInverted:l,selectedItems:a,selectedItemsLimit:o}=e;return W.createElement("div",{className:"gd-attribute-filter-status-bar__next"},W.createElement(ga,{isInverted:l,getItemTitle:r,selectedItems:a,selectedItemsLimit:o}),t&&i>0?W.createElement(ma,{parentFilterTitles:n}):null)},ha=e=>{const{checked:t,isVisible:n,onChange:i,onToggle:r,isFiltered:l,totalItemsCount:a,isPartialSelection:o}=e;return W.createElement(J.InvertableSelectAllCheckbox,{isVisible:n,checked:t,onChange:i,onToggle:r,isFiltered:l,totalItemsCount:a,isPartialSelection:o})},fa=e=>{const{item:t,onSelectOnly:n,isSelected:i,fullscreenOnMobile:r=!1}=e,l=(0,jl.Z)(),a=(0,W.useCallback)((e=>{e.stopPropagation(),n()}),[n]),o=(0,W.useMemo)((()=>kl(t,l)),[t,l]),s=(0,J.useMediaQuery)("mobileDevice"),c=te("gd-single-selection-attribute-filter-elements-select-item","gd-list-item","s-attribute-filter-list-item",`s-attribute-filter-list-item-${Xl(t.title)}`,{"is-selected":i},{"s-attribute-filter-list-item-selected":i});return W.createElement("div",{className:c,onClick:a,title:o},W.createElement("span",null,o),i&&s&&r?W.createElement("span",{className:"gd-customizable-checkmark-mobile-navigation-wrapper"},W.createElement(J.CustomizableCheckmark,{className:"gd-customizable-checkmark-mobile-navigation"})):null)};function ba(){return W.createElement("div",{style:{marginTop:-5}})}const va=e=>{const{isFilteredByParentFilters:t,parentFilterTitles:n,totalElementsCountWithCurrentSettings:i}=e;return W.createElement("div",{className:"gd-attribute-filter-status-bar__next"},t&&i>0?W.createElement(ma,{parentFilterTitles:n}):null)},Ea=()=>W.createElement("div",null),ya={ErrorComponent:Ul,LoadingComponent:zl,DropdownButtonComponent:Gl,DropdownBodyComponent:Kl,DropdownActionsComponent:Yl,ElementsSearchBarComponent:Ql,ElementsSelectComponent:Jl,ElementsSelectItemComponent:ta,ElementsSelectErrorComponent:na,ElementsSelectLoadingComponent:ia,ElementsSelectActionsComponent:ha,EmptyResultComponent:ca,StatusBarComponent:pa},Ca=e=>{const{resetOnParentFilterChange:t=!0,children:n,locale:i,backend:r,workspace:l,title:a,filter:o,connectToPlaceholder:s,parentFilters:c,parentFilterOverAttribute:u,hiddenElements:d,staticElements:m,fullscreenOnMobile:g=!1,selectionMode:p="multi",selectFirst:h=!1,onApply:f,onError:b,ErrorComponent:v,LoadingComponent:E,DropdownButtonComponent:y,DropdownBodyComponent:C,DropdownActionsComponent:S,ElementsSearchBarComponent:I,ElementsSelectComponent:w,ElementsSelectItemComponent:F,ElementsSelectErrorComponent:k,ElementsSelectLoadingComponent:x,ElementsSelectActionsComponent:O,EmptyResultComponent:P,StatusBarComponent:D}=e,A=(({selectionMode:e})=>Object.assign(Object.assign({},ya),"single"===e?{ElementsSelectItemComponent:fa,ElementsSelectActionsComponent:ba,StatusBarComponent:va,DropdownActionsComponent:Ea}:{}))(e);return W.createElement(R.IntlWrapper,{locale:i},W.createElement(Al,{ErrorComponent:null!=v?v:A.ErrorComponent,LoadingComponent:null!=E?E:A.LoadingComponent,DropdownButtonComponent:null!=y?y:A.DropdownButtonComponent,DropdownBodyComponent:null!=C?C:A.DropdownBodyComponent,DropdownActionsComponent:null!=S?S:A.DropdownActionsComponent,ElementsSearchBarComponent:null!=I?I:A.ElementsSearchBarComponent,ElementsSelectComponent:null!=w?w:A.ElementsSelectComponent,ElementsSelectItemComponent:null!=F?F:A.ElementsSelectItemComponent,ElementsSelectErrorComponent:null!=k?k:A.ElementsSelectErrorComponent,ElementsSelectLoadingComponent:null!=x?x:A.ElementsSelectLoadingComponent,ElementsSelectActionsComponent:null!=O?O:A.ElementsSelectActionsComponent,EmptyResultComponent:null!=P?P:A.EmptyResultComponent,StatusBarComponent:null!=D?D:A.StatusBarComponent},W.createElement(Hl,{backend:r,workspace:l,title:a,filter:o,connectToPlaceholder:s,resetOnParentFilterChange:t,parentFilters:c,parentFilterOverAttribute:u,onApply:f,onError:b,hiddenElements:d,staticElements:m,fullscreenOnMobile:g,selectionMode:p,selectFirst:h},n)))},Sa=[{align:"bc tc"}],Ia=({children:e,errorMessage:t})=>t?W.createElement("div",{className:"gd-attribute-filter-button-wrapper"},W.createElement(J.BubbleHoverTrigger,null,e,W.createElement(J.Bubble,{className:"bubble-negative gd-attribute-filter-button-error s-attribute-filter-error-bubble",alignPoints:Sa},W.createElement("span",null,W.createElement(ee.Z,{id:"gs.filter.error.tooltip"}))))):W.createElement(W.Fragment,null,e),wa=[{align:"bl tl"},{align:"tr tl"},{align:"br tr",offset:{x:-11}},{align:"tl bl",offset:{x:0,y:0}},{align:"tr tl",offset:{x:0,y:-50}},{align:"tr tl",offset:{x:0,y:-100}},{align:"tr tl",offset:{x:0,y:-200}},{align:"tr tl",offset:{x:0,y:-300}},{align:"tr tl",offset:{x:0,y:-400}}],Fa=()=>{const{DropdownButtonComponent:e,DropdownBodyComponent:t,LoadingComponent:n,ErrorComponent:i}=Dl(),{title:r,isInitializing:l,initError:a,isFiltering:o,committedSelectionElements:s,onReset:c,onApply:u,fullscreenOnMobile:d,isCommittedSelectionInverted:m,selectionMode:g}=Vl(),p=(0,J.useMediaQuery)("mobileDevice"),h=function(e,t){const n=(0,jl.Z)(),i=0===t.length,r=i&&!e,l=!i&&e,a=!i&&!e;let o=n.formatMessage({id:"gs.list.all"});return l?o=`${n.formatMessage({id:"gs.list.all"})} ${n.formatMessage({id:"gs.list.except"})} ${xl(t,n)}`:a?o=xl(t,n):r&&(o=n.formatMessage({id:"gs.filterLabel.none"})),o}(m,s),f="single"!==g&&0!==s.length;return W.createElement(J.Dropdown,{className:"gd-attribute-filter__next",closeOnParentScroll:!0,closeOnMouseDrag:!0,closeOnOutsideClick:!0,enableEventPropagation:!0,alignPoints:wa,fullscreenOnMobile:d,renderButton:({toggleDropdown:t,isOpen:c})=>W.createElement("div",{className:te({"gd-is-mobile":d&&p&&c})},!!l&&W.createElement(n,{onClick:t,isOpen:c}),!l&&!!a&&!r&&W.createElement(i,{message:a.message,error:a}),!l&&!!r&&W.createElement(Ia,{errorMessage:null==a?void 0:a.message},W.createElement(e,{title:r,subtitle:h,isFiltering:o,isLoaded:!l,isLoading:l,isOpen:c,selectedItemsCount:s.length,showSelectionCount:f,onClick:t,isError:!!a}))),onOpenStateChanged:e=>{e||c()},renderBody:({closeDropdown:e})=>W.createElement("div",{className:te({"gd-is-mobile":d&&p}),style:{height:d&&p?"100%":"auto"}},W.createElement(t,{onApplyButtonClick:()=>{u(),e()},onCancelButtonClick:e}))})},ka=e=>{const t=(0,R.useBackendStrict)(e.backend,"AttributeFilter");return function(e){var t,n;const{connectToPlaceholder:i,filter:r,onApply:l,parentFilters:a,hiddenElements:o,staticElements:s,backend:c}=e;(0,Pi.kG)(!(r&&i),"It's not possible to combine 'filter' property with 'connectToPlaceholder' property. Either provide a filter, or a placeholer."),(0,Pi.kG)(!(r&&!l),"It's not possible to use 'filter' property without 'onApply' property. Either provide 'onApply' callback or use placeholders."),(0,Pi.kG)(r||i,"No filter or placeholer provided. Provide one of the properties: 'filter', 'connectToPlaceholder'."),(0,Pi.kG)(!(!(null===(t=null==c?void 0:c.capabilities)||void 0===t?void 0:t.supportsElementsQueryParentFiltering)&&!I(a)),"Parent filtering is not supported by the current backend implementation."),(0,Pi.kG)(!(!(null===(n=null==c?void 0:c.capabilities)||void 0===n?void 0:n.supportsElementsQueryParentFiltering)&&!I(o)&&I(s)),"Hidden elements are not supported by the current backend implementation.")}(Object.assign({backend:t},e)),W.createElement(Ca,Object.assign({},e),W.createElement(Fa,null))},xa=e=>{const{isOpen:t,title:n,isLoading:i,isFiltering:r,onClick:l}=e,a=(0,jl.Z)();let o=n;return i?o=a.formatMessage({id:"loading"}):r&&(o=a.formatMessage({id:"filtering"})),W.createElement(J.DropdownButton,{className:"gd-attribute-filter-dropdown-simple-button__next",disabled:i,isOpen:t,value:o,onClick:l})},Oa=e=>{const{isOpen:t,subtitle:n,title:i,selectedItemsCount:r,onClick:l,isLoading:a,isFiltering:o,showSelectionCount:s=!0}=e,c=(0,jl.Z)();let u=`${i}: ${n}`;(a||o)&&(u=c.formatMessage({id:"loading"}));const d=te("gd-button-primary","button-dropdown","dropdown-button","gd-button-small","gd-button",{"is-dropdown-open":t},{"is-active":t}),m=te("gd-button-icon",{"gd-icon-navigateup":t},{"gd-icon-navigatedown":!t}),g=s?`(${r})`:void 0;return W.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button__next"},W.createElement("button",{className:d,onClick:l,title:u},W.createElement("span",{className:"gd-button-text"},W.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-text"},W.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-selection"},u),g?W.createElement("div",{className:"gd-attribute-filter-dropdown-simple-button-selection-count"},g):null)),W.createElement("span",{className:m,role:"button-icon"})))},Pa=e=>{var t;const{titleWithSelection:n}=e,i=(0,$.__rest)(e,["titleWithSelection"]),r=n?Oa:xa;return W.createElement(ka,Object.assign({},i,{DropdownButtonComponent:null!==(t=e.DropdownButtonComponent)&&void 0!==t?t:r}))},Da=e=>{var t;return W.createElement(ka,Object.assign({},e,{DropdownButtonComponent:null!==(t=e.DropdownButtonComponent)&&void 0!==t?t:Gl}))},Aa=({isOpened:e,text:t,toggleDropdown:n})=>{const i=(0,jl.Z)(),r=te("gd-button-primary","gd-button-small","button-dropdown","dropdown-button","gd-attribute-filter-display-form-button","s-attribute-display-form-button",{"is-active":e}),l=e?"gd-icon-navigateup":"gd-icon-navigatedown",a=i.formatMessage({id:"attributesDropdown.display_as"},{title:t});return W.createElement(J.Button,{className:r,title:a,value:a,onClick:n,iconRight:l})},Na=[{align:"cl cr",offset:{x:-10,y:0}},{align:"cr cl",offset:{x:10,y:0}}],Ma=e=>{const{displayForm:t,selected:n}=e,{title:i,type:r}=t,l=te("gd-list-item","gd-attribute-display-form","s-attribute-display-form-name",`s-attribute-display-form-name-${On.gl(i)}`,(e=>{switch(e){case"GDC.link":return"gd-icon-hyperlink-warning";case"GDC.geo.pin":case"GDC.geo.pin_latitude":case"GDC.geo.pin_longitude":return"gd-icon-earth";default:return"gd-icon-label-warning"}})(r),{"is-selected":n});return W.createElement("div",{className:l,onClick:t=>{const{displayForm:n,onClick:i}=e;i(n.ref),t.preventDefault()}},W.createElement(J.ShortenedText,{className:"gd-attribute-display-form-name",tooltipAlignPoints:Na},i))},Ta=[{align:"bl tl",offset:{x:0,y:1}},{align:"tl bl",offset:{x:0,y:-1}}],Ra=e=>{const{displayForms:t,selectedDisplayForm:n,onSelect:i,alignPoints:r}=e,l=(0,W.useMemo)((()=>{var e;return null===(e=t.find((e=>(0,g.areObjRefsEqual)(e.ref,n))))||void 0===e?void 0:e.title}),[t,n]);return W.createElement(J.Dropdown,{className:"gd-attribute-display-form-dropdown",alignPoints:null!=r?r:Ta,closeOnMouseDrag:!0,closeOnParentScroll:!0,renderButton:({isOpen:e,toggleDropdown:t})=>W.createElement(Aa,{text:l,isOpened:e,toggleDropdown:t}),renderBody:({closeDropdown:e})=>W.createElement(J.DropdownList,{className:"gd-attribute-display-form-dropdown-body s-attribute-display-form-dropdown-body",items:t,itemHeight:23,renderItem:({item:t})=>{const r=(0,g.areObjRefsEqual)(t.ref,n);return W.createElement(Ma,{key:t.id,displayForm:t,onClick:t=>{e(),r||i(t)},selected:r})}})})},La=e=>{const{onSelect:t,alignPoints:n}=e,{displayForms:i,currentDisplayFormRef:r}=Vl();return W.createElement(Ra,{displayForms:i,selectedDisplayForm:r,alignPoints:n,onSelect:t})},_a=[{align:"bc tc",offset:{x:-1,y:5}}],Ba=e=>{const{onConfiguration:t}=e;return W.createElement("div",{className:"gd-attribute-filter-configuration-button"},W.createElement(J.BubbleHoverTrigger,null,W.createElement(J.Button,{className:"gd-button-link gd-button-icon-only gd-icon-settings gd-button-small gd-configuration-button s-configuration-button",disabled:!1,onClick:t}),W.createElement(J.Bubble,{className:"bubble-primary",alignPoints:_a},W.createElement(ee.Z,{id:"attributesDropdown.configuration"}))))},Va=[{align:"bc tc",offset:{x:-1,y:5}}],Ha=e=>{const{onDelete:t}=e;return W.createElement("div",{className:"gd-attribute-filter-delete-button"},W.createElement(J.BubbleHoverTrigger,null,W.createElement(J.Button,{className:"gd-button-link gd-button-icon-only gd-button-small gd-icon-trash gd-delete-button s-delete-button",disabled:!1,onClick:t}),W.createElement(J.Bubble,{className:"bubble-primary",alignPoints:Va},W.createElement(ee.Z,{id:"attributesDropdown.removeTooltip"}))))},ja=({title:e,defaultAttributeFilterTitle:t,attributeDataSet:n})=>W.createElement("div",{className:"gd-attribute-filter-tooltip-content s-attribute-filter-tooltip-content"},W.createElement("h3",{className:"s-attribute-filter-tooltip-header"},null!=e?e:t),W.createElement("h4",null,W.createElement(ee.Z,{id:"attributesDropdown.details.type"})),W.createElement("p",{className:"s-attribute-filter-tooltip-item-name"},t),W.createElement("h4",null,W.createElement(ee.Z,{id:"attributesDropdown.details.dataset"})),W.createElement("p",{className:"s-attribute-filter-tooltip-item-dataset"},n.title)),Za=e=>W.createElement("div",{className:"gd-empty-select-search-bar"}),qa=(e,t)=>{const{onClick:n}=e,{isOpen:i}=(0,R.usePrevious)(e);(0,W.useEffect)((()=>{t&&!i&&n()}),[n,t,i])},Wa=(e,t)=>{const{isOpen:n}=e,{isOpen:i}=(0,R.usePrevious)(e);(0,W.useEffect)((()=>{t&&i&&!n&&t()}),[t,n,i])},Ga=e=>{const{onSearch:t,searchString:n}=e,[i,r]=(0,W.useState)(n);(0,W.useEffect)((()=>{r(n)}),[n]);const l=(0,W.useCallback)((e=>{r(e),t(e)}),[t]);return{onSearch:l,search:i}}}}]);